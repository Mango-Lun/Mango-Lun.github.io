<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Vue 3.x | Mangoの</title><meta name="keywords" content="Note,Vue"><meta name="author" content="Kshtor_Mango"><meta name="copyright" content="Kshtor_Mango"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1 Vue 简介1.1 什么是 Vue官方给出的概念：Vue (读音 &#x2F;vjuː&#x2F;，类似于 view) 是一套用于构建用户界面的前端框架。 1.2 构建用户界面的传统方式在传统的 Web 前端开发中，是基于 JQuery + 模板引擎 的方式来构建用户界面的  编写结构  ​    基于模板引擎技术，把数据渲染到页面上。 ​    优点：初步解放了前端开发者，从此不用手动拼接字符串来渲染网页结构了">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue 3.x">
<meta property="og:url" content="http://example.com/2022/10/21/Vue/index.html">
<meta property="og:site_name" content="Mangoの">
<meta property="og:description" content="1 Vue 简介1.1 什么是 Vue官方给出的概念：Vue (读音 &#x2F;vjuː&#x2F;，类似于 view) 是一套用于构建用户界面的前端框架。 1.2 构建用户界面的传统方式在传统的 Web 前端开发中，是基于 JQuery + 模板引擎 的方式来构建用户界面的  编写结构  ​    基于模板引擎技术，把数据渲染到页面上。 ​    优点：初步解放了前端开发者，从此不用手动拼接字符串来渲染网页结构了">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/banner/14.jpg">
<meta property="article:published_time" content="2022-10-21T06:51:20.000Z">
<meta property="article:modified_time" content="2022-10-23T10:44:13.014Z">
<meta property="article:author" content="Kshtor_Mango">
<meta property="article:tag" content="Note">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/banner/14.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2022/10/21/Vue/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vue 3.x',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-23 18:44:13'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/VolantisTags.css"><link rel="stylesheet" href="/css/myCustom.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/banner/14.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Mangoの</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Vue 3.x</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-21T06:51:20.000Z" title="发表于 2022-10-21 14:51:20">2022-10-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-23T10:44:13.014Z" title="更新于 2022-10-23 18:44:13">2022-10-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Note/">Note</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Note/Vue/">Vue</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-Vue-简介"><a href="#1-Vue-简介" class="headerlink" title="1 Vue 简介"></a>1 Vue 简介</h2><h3 id="1-1-什么是-Vue"><a href="#1-1-什么是-Vue" class="headerlink" title="1.1 什么是 Vue"></a>1.1 什么是 Vue</h3><p>官方给出的概念：Vue (读音 /vjuː/，类似于 view) 是一套用于构建用户界面的前端框架。</p>
<h3 id="1-2-构建用户界面的传统方式"><a href="#1-2-构建用户界面的传统方式" class="headerlink" title="1.2 构建用户界面的传统方式"></a>1.2 构建用户界面的传统方式</h3><p>在传统的 Web 前端开发中，是基于 JQuery + 模板引擎 的方式来构建用户界面的</p>
<ul>
<li>编写结构</li>
</ul>
<p>​    基于模板引擎技术，把数据渲染到页面上。</p>
<p>​    优点：初步解放了前端开发者，从此不用手动拼接字符串来渲染网页结构了。</p>
<p>​    缺点：1. 需要定义大量的模板结构；2. 缺少语法高亮和只能提示；3. 数据变化时需要重新调用模板编译的函数，否则页面结构不会更新。</p>
<ul>
<li>美化样式</li>
</ul>
<p>​    基础 CSS 样式，美化网页的可视化效果</p>
<ul>
<li>处理交互</li>
</ul>
<p>​    基于 JQuery 技术，处理用户和网页之间的交互行为。</p>
<p>​    优点：屏蔽了 DOM API 之间的兼容性，提高了 DOM 的操作效率和体验。</p>
<p>​    缺点：当业务复杂时、数据变化频繁时，前端开发者需要把大量的事件和精力浪费在 DOM 的操作上，而不是核心业务的处理上</p>
<h3 id="1-3-使用-vue-构建用户界面"><a href="#1-3-使用-vue-构建用户界面" class="headerlink" title="1.3 使用 vue 构建用户界面"></a>1.3 使用 vue 构建用户界面</h3><p>使用 vue 构建用户界面，解决了 jQuery + 模板引擎 的诸多痛点，极大的提高了前端开发的效率和体验。</p>
<ul>
<li>编写结构</li>
</ul>
<p>​    基于 vue 中提供的指令，可以方便快捷的渲染页面的结构（乐不思蜀）。 数据驱动视图（只要页面依赖的数据源变化，则页面自动重新渲染） Ps：指令是 vue 为开发者提供的模板语法，用来辅助开发者渲染页面的结构。</p>
<ul>
<li>美化样式</li>
</ul>
<p>​    基础 CSS 样式，美化网页的可视化效果。</p>
<ul>
<li>处理交互</li>
</ul>
<p>​    基于 vue 中提供的事件绑定，可以轻松处理用户和页面之间的交互行为。 Ps：开发者把工作的重心放在核心业务的实现上</p>
<h3 id="1-4-解读核心关键词：框架"><a href="#1-4-解读核心关键词：框架" class="headerlink" title="1.4 解读核心关键词：框架"></a>1.4 解读核心关键词：框架</h3><p>官方给 vue 的定位是前端框架，因为它提供了构建用户界面的一整套解决方案（俗称 vue 全家桶）：</p>
<ul>
<li><p>vue（核心库） </p>
</li>
<li><p>vue-router（路由方案） </p>
</li>
<li><p>vuex（状态管理方案） </p>
</li>
<li><p>vue 组件库（快速搭建页面 UI 效果的方案） </p>
</li>
</ul>
<p>以及辅助 vue 项目开发的一系列工具： </p>
<ul>
<li><p>vue-cli（npm 全局包：一键生成工程化的 vue 项目 - 基于 webpack、大而全） </p>
</li>
<li><p>vite（npm 全局包：一键生成工程化的 vue 项目 - 小而巧） </p>
</li>
<li><p>vue-devtools（浏览器插件：辅助调试的工具） </p>
</li>
<li><p>vetur（vscode 插件：提供语法高亮和智能提示）</p>
</li>
</ul>
<h2 id="2-Vue-的基本使用"><a href="#2-Vue-的基本使用" class="headerlink" title="2 Vue 的基本使用"></a>2 Vue 的基本使用</h2><h3 id="2-1-基本使用步骤"><a href="#2-1-基本使用步骤" class="headerlink" title="2.1 基本使用步骤"></a>2.1 基本使用步骤</h3><ul>
<li>导入 vue.js 的 script 脚本文件</li>
<li>在页面中声明一个将要被 vue 所控制的 DOM 区域</li>
<li>创建 vm 实例对象（vue 实例对象）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">	// 2. 在页面中声明一个将要被 vue 所控制的 DOM 区域</span><br><span class="line">    &lt;div id = &quot;app&quot;&gt;</span><br><span class="line">        &#123;&#123;username&#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">    // 1. 导入 vue.js 的 script 脚本文件</span><br><span class="line">    &lt;script src = &quot;./lib/vue-2.6.12.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    	// 创建 vm 实例对象</span><br><span class="line">        const vm = new Vue(&#123;</span><br><span class="line">            // 指定当前 vm 实例要控制页面的哪个区域</span><br><span class="line">            el: &#x27;#app&#x27;,</span><br><span class="line">            // 指定 Model 数据员</span><br><span class="line">            data: &#123;</span><br><span class="line">                username: &#x27;zs&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-基本代码与-MVVM-的对应关系"><a href="#2-2-基本代码与-MVVM-的对应关系" class="headerlink" title="2.2  基本代码与 MVVM 的对应关系"></a>2.2  基本代码与 MVVM 的对应关系</h3><h2 id="3-Vue-的指令与过滤器"><a href="#3-Vue-的指令与过滤器" class="headerlink" title="3 Vue 的指令与过滤器"></a>3 Vue 的指令与过滤器</h2><p>指令（Directives）是 vue 为开发者提供的模板语法，用于辅助开发者渲染页面的基本结构。</p>
<p>vue 中的指令按照不同的用途可以分为如下 6 大类：</p>
<ul>
<li>内容渲染指令</li>
<li>属性绑定指令</li>
<li>事件绑定指令</li>
<li>双向绑定指令</li>
<li>条件渲染指令</li>
<li>列表渲染指令</li>
</ul>
<blockquote>
<p>注意：指令是 vue 开发中最基础、最常用、最简单的知识点</p>
</blockquote>
<h3 id="3-1-内容渲染指令"><a href="#3-1-内容渲染指令" class="headerlink" title="3.1 内容渲染指令"></a>3.1 内容渲染指令</h3><p>内容渲染指令用来辅助开发者渲染 DOM 元素的文本内容。常用的内容渲染指令有如下 3 个：</p>
<ul>
<li>v-text</li>
<li><code>&#123;&#123; &#125;&#125;</code></li>
<li>v-html</li>
</ul>
<h4 id="3-1-1-v-text"><a href="#3-1-1-v-text" class="headerlink" title="3.1.1 v-text"></a>3.1.1 v-text</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 把 username 对应的值，渲染到第一个 p 标签中 --&gt;</span><br><span class="line">&lt;p v-text=&quot;username&quot;&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 把 gender 对应的值，渲染到第二个 p 标签中 --&gt;</span><br><span class="line">&lt;!-- 注意： 第二个 p 标签中，默认的文本 ”性别“ 会被 gender 的值覆盖 --&gt;</span><br><span class="line">&lt;p v-text=&quot;gender&quot;&gt;性别&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：v-text 指令会覆盖元素内默认的值</p>
</blockquote>
<h4 id="3-1-2-双括号语法"><a href="#3-1-2-双括号语法" class="headerlink" title="3.1.2 双括号语法"></a>3.1.2 双括号语法</h4><p>vue 提供的 <code>&#123;&#123; &#125;&#125;</code> 语法，专门用来解决 v-text 会覆盖默认文本内容的问题。这种 <code>&#123;&#123; &#125;&#125;</code> 语法的专业名称是插值表达 式（英文名为：Mustache）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用 &#123;&#123; &#125;&#125; 插值表达式，将对应的值渲染到元素的内容节点中 --&gt;</span><br><span class="line">&lt;!-- 同时保留元素自身的默认值 --&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">    姓名: &#123;&#123;username&#125;&#125;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意: 相对于 v-text 指令来说, 插值表达式在开发中更常用一些! 因为它不会覆盖元素中默认的文本内容</p>
</blockquote>
<p>在 vue 提供的模板渲染语法中，除了支持绑定简单的数据值之外，还支持 Javascript 表达式的运算，例如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123; number + 1 &#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; ok ? &#x27;Yes&#x27; : &#x27;No&#x27;&#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123; message.split(&#x27;&#x27;)revverse().join(&#x27;&#x27;) &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;&#x27;list&#x27; + id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-1-3-v-html"><a href="#3-1-3-v-html" class="headerlink" title="3.1.3 v-html"></a>3.1.3 v-html</h4><p>v-text 指令和插值表达式只能渲染纯文本内容。如果要把包含 HTML 标签的字符串渲染为页面的 HTML 元素， 则需要用到 v-html 这个指令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 假设 data 中定义了名为 discription 的数据,数据的值包含 HTML 标签 的字符串 --&gt;</span><br><span class="line">&lt;p v-html=&quot;discription&quot;&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-属性绑定指令"><a href="#3-2-属性绑定指令" class="headerlink" title="3.2  属性绑定指令"></a>3.2  属性绑定指令</h3><p>如果需要为元素的属性动态绑定属性值,则需要用到 v-bind 属性绑定指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 假设有如下的 data 数据</span><br><span class="line">data: &#123;</span><br><span class="line">	inputValue: &#x27;请输入内容&#x27;,</span><br><span class="line">	imgSrc: &#x27;https://cn.vuejs.org/images/logo.png&#x27;</span><br><span class="line">&#125;</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 使用 v-bind 指令, 为 input 的 placeholder 动态绑定属性值 --&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-bind:placeholder=&quot;inputValue&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;img v-bind:src=&quot;imgSrc&quot; alt=&quot;&quot; /&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-1-属性绑定指令的简写形式"><a href="#3-2-1-属性绑定指令的简写形式" class="headerlink" title="3.2.1 属性绑定指令的简写形式"></a>3.2.1 属性绑定指令的简写形式</h4><p>由于 v-bind 指令在开发中使用频率非常高，因此，vue 官方为其提供了简写形式（简写为英文的 : ）。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:placeholder</span>=<span class="string">&quot;inputValue&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;imgSrc&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 100px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">inputValue</span>: <span class="string">&#x27;请输入内容&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">imgSrc</span>: <span class="string">&#x27;./Website01/images/bg.jpg&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-事件绑定指令"><a href="#3-3-事件绑定指令" class="headerlink" title="3.3 事件绑定指令"></a>3.3 事件绑定指令</h3><p>vue 提供了 v-on 事件绑定指令，用来辅助程序员为 DOM 元素绑定事件监听。语法格式如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>count 的值为: &#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;addCount&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：原生 DOM 对象有 onclick、oninput、onkeyup 等原生事件，替换为 vue 的事件绑定形式后， 分别为：v-on:click、v-on:input、v-on:keyup</p>
</blockquote>
<p>通过 v-on 绑定的事件处理函数，需要在 methods 节点中进行声明：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">count</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;         <span class="comment">// v-on 绑定的事件处理函数需要声明在 methods 节点中</span></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">addCount</span>(<span class="params"></span>) &#123;   <span class="comment">//事件处理函数的名字</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// this 表示当前 new 出来的 vm 实例对象</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//通过 this 可以访问到 data 中的数据</span></span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">count</span> += <span class="number">1</span>    </span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-3-1-事件绑定的简写形式"><a href="#3-3-1-事件绑定的简写形式" class="headerlink" title="3.3.1 事件绑定的简写形式"></a>3.3.1 事件绑定的简写形式</h4><p>由于 v-on 指令在开发中使用频率非常高，因此，vue 官方为其提供了简写形式（简写为英文的 @ ）。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>count 的值为：&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 完整写法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;addCount&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 简写形式 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 如果事件处理函数中的代码足够简单，只有一行代码，可以简写到行内 --&gt;</span>、</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">clock</span>=<span class="string">&quot;count += 1&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-3-2-事件对象-event"><a href="#3-3-2-事件对象-event" class="headerlink" title="3.3.2 事件对象 event"></a>3.3.2 事件对象 event</h4><p>在原生的 DOM 事件绑定中，可以在事件处理函数的形参处，接收事件对象 event(简写为e)。同理，在 v-on 指令（简 写为 @ ）所绑定的事件处理函数中，同样可以接收到事件对象 event，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3&gt;count 的值为: &#123;&#123;count&#125;&#125;&lt;/h3&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;addCount&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="comment">// ---------------------------------</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="title function_">addCount</span>(<span class="params">e</span>) &#123;</span><br><span class="line">		<span class="keyword">const</span> nowBagColor = e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span>;</span><br><span class="line">		e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = nowBgColor === <span class="string">&#x27;red&#x27;</span> ? <span class="string">&#x27;&#x27;</span> : <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cout</span> += <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-3-绑定事件并传参"><a href="#3-3-3-绑定事件并传参" class="headerlink" title="3.3.3 绑定事件并传参"></a>3.3.3 绑定事件并传参</h4><p>在使用 v-on 指令绑定事件时，可以使用 ( ) 进行传参，示例代码如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;h3&gt;count 的值为: &#123;&#123;count&#125;&#125;&lt;/h3&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;addNewCount(2)&quot;</span>&gt;</span>+2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="comment">// ---------------------------------</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="title function_">addNewCount</span>(<span class="params">step</span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">count</span> += step;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-4-event"><a href="#3-3-4-event" class="headerlink" title="3.3.4 $event"></a>3.3.4 $event</h4><p>$event 是 vue 提供的特殊变量，用来表示原生的事件参数对象 event。$event 可以解决事件参数对象 event  被覆盖的问题。示例用法如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>count 的值为: &#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;addNewCount(2, $event)&quot;</span>&gt;</span>+2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="title function_">addNewCount</span>(<span class="params">step, e</span>) &#123;</span><br><span class="line">         <span class="keyword">const</span> nowBagColor = e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span>;</span><br><span class="line">		e.<span class="property">target</span>.<span class="property">style</span>.<span class="property">backgroundColor</span> = nowBgColor === <span class="string">&#x27;red&#x27;</span> ? <span class="string">&#x27;&#x27;</span> : <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">count</span> += step;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-5-事件修饰符"><a href="#3-3-5-事件修饰符" class="headerlink" title="3.3.5 事件修饰符"></a>3.3.5 事件修饰符</h4><p>在事件处理函数中调用 preventDefault() 或 stopPropagation() 是非常常见的需求。因此，vue 提供了事件 修饰符的概念，来辅助程序员更方便的对事件的触发进行控制。常用的 5 个事件修饰符如下：</p>
<table>
<thead>
<tr>
<th>事件修饰符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.prevent</td>
<td>阻止默认行为 ( 例如: 阻止 a 链接的跳转, 阻止表单的提交等)</td>
</tr>
<tr>
<td>.stop</td>
<td>阻止事件冒泡</td>
</tr>
<tr>
<td>.capture</td>
<td>以捕获模式触发当前的事件处理函数</td>
</tr>
<tr>
<td>.once</td>
<td>绑定的事件只触发1次</td>
</tr>
<tr>
<td>.self</td>
<td>只有在 event.target 是当前元素自身出发事件处理函数</td>
</tr>
</tbody></table>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 触发 click 点击事件时,阻止 a 链接的默认跳转行为 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;onLinkClick&quot;</span>&gt;</span>百度首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-3-6-按键修饰符"><a href="#3-3-6-按键修饰符" class="headerlink" title="3.3.6 按键修饰符"></a>3.3.6 按键修饰符</h4><p>在监听键盘事件时，我们经常需要判断详细的按键。此时，可以为键盘相关的事件添加按键修饰符，例如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 只有在 &#x27;key&#x27; 是 &#x27;Enter&#x27; 时调用 &#x27;vm.submit()&#x27; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 只有在 &#x27;key&#x27; 是 &#x27;Esc&#x27; 时调用 &#x27;vm.clearInput()&#x27; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.esc</span>=<span class="string">&quot;clearInput&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-双向绑定指令"><a href="#3-4-双向绑定指令" class="headerlink" title="3.4 双向绑定指令"></a>3.4 双向绑定指令</h3><p>vue 提供了 v-model 双向数据绑定指令，用来辅助开发者在不操作 DOM 的前提下，快速获取表单的数据。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>用户名是：&#123;&#123;username&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">P</span>&gt;</span>选中的省份是：&#123;&#123;province&#125;&#125;<span class="tag">&lt;/<span class="name">P</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;province&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>--请选择--<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>河北<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>黑龙江<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：v-model 指令只能配合表单元素使用</p>
</blockquote>
<h4 id="3-4-1-v-model-指令的修饰符"><a href="#3-4-1-v-model-指令的修饰符" class="headerlink" title="3.4.1 v-model 指令的修饰符"></a>3.4.1 v-model 指令的修饰符</h4><p>为了方便对用户输入的内容进行处理，vue 为 v-model 指令提供了 3 个修饰符，分别是：</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>作用</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>.number</td>
<td>自动将用户的输入值转为数值类型</td>
<td><code>&lt;input v-model.number=&quot;age&quot; /&gt;</code></td>
</tr>
<tr>
<td>.trim</td>
<td>自动过滤用户输入的首位空白字符</td>
<td><code>&lt;input v-model.trim=&quot;msg&quot; /&gt;</code></td>
</tr>
<tr>
<td>.lazy</td>
<td>在 ”change“ 时而非 ”input“ 时更新</td>
<td><code>&lt;input v-model.lazy=&quot;msg&quot; /&gt;</code></td>
</tr>
</tbody></table>
<h3 id="3-5-条件渲染指令"><a href="#3-5-条件渲染指令" class="headerlink" title="3.5 条件渲染指令"></a>3.5 条件渲染指令</h3><p>条件渲染指令用来辅助开发者按需控制 DOM 的显示与隐藏。条件渲染指令有如下两个，分别是：</p>
<ul>
<li>v-if</li>
<li>v-show</li>
</ul>
<h4 id="3-5-1-v-if-和-v-show-的区别"><a href="#3-5-1-v-if-和-v-show-的区别" class="headerlink" title="3.5.1 v-if 和 v-show 的区别"></a>3.5.1 v-if 和 v-show 的区别</h4><p>实现原理不同：</p>
<ul>
<li><p>v-if 指令会动态地创建或移除 DOM 元素，从而控制元素在页面上的显示与隐藏</p>
</li>
<li><p>v-show 指令会动态为元素添加或移除 style=”display: none;” 样式，从而控制元素的显示与隐藏；</p>
</li>
</ul>
<p>性能消耗不同：</p>
<p>v-if 有更高的切换开销，而 v-show 有更高的初始渲染开销。</p>
<ul>
<li>如果需要非常频繁地切换，则使用 v-show 较好</li>
<li>如果在运行时条件很少改变，则使用 v-if 较好</li>
</ul>
<h4 id="3-5-2-v-else"><a href="#3-5-2-v-else" class="headerlink" title="3.5.2 v-else"></a>3.5.2 v-else</h4><p>v-if 可以单独使用，或配合 v-else 指令一起使用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;Math.random() &gt; 0.5&quot;</span>&gt;</span></span><br><span class="line">    随机数大于 0.5</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">    随机数小于或等于 0.5</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-5-3-v-else-if"><a href="#3-5-3-v-else-if" class="headerlink" title="3.5.3 v-else-if"></a>3.5.3 v-else-if</h4><p>v-else-if 指令，顾名思义，充当 v-if 的“else-if 块”，可以连续使用：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span>优秀<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span>良好<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;C&#x27;&quot;</span>&gt;</span>一般<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span>差<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-6-列表渲染指令"><a href="#3-6-列表渲染指令" class="headerlink" title="3.6 列表渲染指令"></a>3.6 列表渲染指令</h3><p>vue 提供了 v-for 指令，用来辅助开发者基于一个数组来循环渲染相似的 UI 结构。</p>
<p>v-for 指令需要使用 item in items 的特殊语法，其中：</p>
<ul>
<li><p>items 是待循环的数组</p>
</li>
<li><p>item 是当前的循环项</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">	<span class="attr">list</span>: [</span><br><span class="line">		&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>&#125;,</span><br><span class="line">		&#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;ls&#x27;</span>&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span>&gt;</span>姓名是：&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-6-1-v-for-中的索引"><a href="#3-6-1-v-for-中的索引" class="headerlink" title="3.6.1 v-for 中的索引"></a>3.6.1 v-for 中的索引</h4><p>v-for 指令还支持一个可选的第二个参数，即当前项的索引。语法格式为 (item, index) in items，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">	<span class="attr">list</span>: [</span><br><span class="line">		&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>&#125;,</span><br><span class="line">		&#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;ls&#x27;</span>&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span>&gt;</span>索引是：&#123;&#123;index&#125;&#125;，姓名是：&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：v-for 指令中的 item 项和 index 索引都是形参，可以根据需要进行重命名。例如 (user, i) in userlist</p>
</blockquote>
<h4 id="3-6-2-使用-key-维护列表的状态"><a href="#3-6-2-使用-key-维护列表的状态" class="headerlink" title="3.6.2 使用 key 维护列表的状态"></a>3.6.2 使用 key 维护列表的状态</h4><p>当列表的数据变化时，默认情况下，vue 会尽可能的复用已存在的 DOM 元素，从而提升渲染的性能。但这种 默认的性能优化策略，会导致有状态的列表无法被正确更新。 为了给 vue 一个提示，以便它能跟踪每个节点的身份，从而在保证有状态的列表被正确更新的前提下，提升渲 染的性能。此时，需要为每项提供一个唯一的 key 属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 用户列表区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 加 key 属性的好处: --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1. 正确维护列表的状态 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2. 复用现有的 DOM 元素,提升渲染的性能 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;user in userlist&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;user.id&quot;</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> /&gt;</span></span><br><span class="line">        姓名: &#123;&#123;user.name&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-6-3-key-的注意事项"><a href="#3-6-3-key-的注意事项" class="headerlink" title="3.6.3 key 的注意事项"></a>3.6.3 key 的注意事项</h4><ul>
<li>key 的值只能是字符串或数字类型</li>
<li>key 的值必须具有唯一性（即：key 的值不能重复）</li>
<li>建议把数据项 id 属性的值作为 key 的值（因为 id 属性的值具有唯一性）</li>
<li>使用 index 的值当作 key 的值没有任何意义（因为 index 的值不具有唯一性）</li>
<li>建议使用 v-for 指令时一定要指定 key 的值（既提升性能、又防止列表状态紊乱）</li>
</ul>
<h3 id="3-7-过滤器"><a href="#3-7-过滤器" class="headerlink" title="3.7 过滤器"></a>3.7 过滤器</h3><p>过滤器（Filters）常用于文本的格式化。例如： hello -&gt; Hello</p>
<p>过滤器应该被添加在 JavaScript 表达式的尾部，由“管道符”进行调用，示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在双花括号中通过&quot;管道符&quot;调用 capitalize 过滤器,对 message 的值进行格式化 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message | capitalize &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在 v-bind 中通过&quot;管道符&quot;调用 formatId 过滤器,对 rawId的值进行格式化 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind</span>=<span class="string">&quot;rawId | formatId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>过滤器可以用在两个地方：插值表达式和 v-bind 属性绑定。</p>
</blockquote>
<h4 id="3-7-1-定义过滤器"><a href="#3-7-1-定义过滤器" class="headerlink" title="3.7.1 定义过滤器"></a>3.7.1 定义过滤器</h4><p>在创建 vue 实例期间，可以在 filters 节点中定义过滤器，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">message</span>: <span class="string">&#x27;hello vue.js&#x27;</span>,</span><br><span class="line">        <span class="attr">info</span>: <span class="string">&#x27;title info&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">filters</span>: &#123;				<span class="comment">//在 filters 节点下定义&quot;过滤器&quot;</span></span><br><span class="line">        <span class="title function_">capitalize</span>(<span class="params">str</span>) &#123;	<span class="comment">// 把首字符大写的过滤器</span></span><br><span class="line">            <span class="keyword">return</span> str.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + str.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-7-2-私有过滤器和全局过滤器"><a href="#3-7-2-私有过滤器和全局过滤器" class="headerlink" title="3.7.2 私有过滤器和全局过滤器"></a>3.7.2 私有过滤器和全局过滤器</h4><p>在 filters 节点下定义的过滤器，称为“私有过滤器”，因为它只能在当前 vm 实例所控制的 el 区域内使用。 如果希望在多个 vue 实例之间共享过滤器，则可以按照如下的格式定义全局过滤器：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局过滤器 - 独立于每个 vm 实例之外</span></span><br><span class="line"><span class="comment">// Vue.filter() 方法接受两个参数</span></span><br><span class="line"><span class="comment">// 第一个参数,是全局过滤器的&quot;名字&quot;</span></span><br><span class="line"><span class="comment">// 第二个参数,是全局过滤器的&quot;处理函数&quot;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;capitalize&#x27;</span>, <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> str.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + str.<span class="title function_">slice</span>(<span class="number">1</span>) + <span class="string">&#x27;~~~&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-7-3-连续调用多个过滤器"><a href="#3-7-3-连续调用多个过滤器" class="headerlink" title="3.7.3 连续调用多个过滤器"></a>3.7.3 连续调用多个过滤器</h4><p>过滤器可以串联地进行调用，例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 把 message 的值,交给 filterA 进行处理 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 把 filterA 处理的结果,再交给 filterB 进行处理 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 最终把 filterB 处理的结果,作为最终的值渲染到页面上 --&gt;</span></span><br><span class="line">&#123;&#123;message | filterA | filterB&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;&#123;&#123; text | capitalize | maxLength &#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局过滤器 - 首字母大写</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;capitalize&#x27;</span>, <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> str.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + str.<span class="title function_">slice</span>(<span class="number">1</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局过滤器 - 控制文本的最大长度</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;maxLength&#x27;</span>, <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (str.<span class="property">length</span> &lt;= <span class="number">10</span>) <span class="keyword">return</span> str</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">strslice</span>(<span class="number">0</span>, <span class="number">10</span>) + <span class="string">&#x27;...&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-7-4-过滤器传参"><a href="#3-7-4-过滤器传参" class="headerlink" title="3.7.4 过滤器传参"></a>3.7.4 过滤器传参</h4><p>过滤器的本质是 JavaScript 函数，因此可以接收参数，格式如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- arg1 和 arg2 是传递给 filterA 的参数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message | filterA(arg1, arg2) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 过滤器处理函数中的形参:</span></span><br><span class="line"><span class="comment">// 第一个参数: 永远都是&quot;管道符&quot;前面的待处理的值</span></span><br><span class="line"><span class="comment">// 从第二个参数开始: 才是调用过滤器时传递过来的 arg1 和 arg2 参数</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;filterA&#x27;</span>, <span class="function">(<span class="params">msg, arg1, arg2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 逻辑代码...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-7-5-过滤器的兼容性"><a href="#3-7-5-过滤器的兼容性" class="headerlink" title="3.7.5 过滤器的兼容性"></a>3.7.5 过滤器的兼容性</h4><p>过滤器仅在 vue 2.x 和 1.x 中受支持，在 vue 3.x 的版本中剔除了过滤器相关的功能。</p>
<p>在企业级项目开发中：</p>
<ul>
<li><p>如果使用的是 2.x 版本的 vue，则依然可以使用过滤器相关的功能</p>
</li>
<li><p>如果项目已经升级到了 3.x 版本的 vue，官方建议使用计算属性或方法代替被剔除的过滤器功能</p>
</li>
</ul>
<h3 id="3-8-品牌列表案例"><a href="#3-8-品牌列表案例" class="headerlink" title="3.8 品牌列表案例"></a>3.8 品牌列表案例</h3><h4 id="3-8-0-整体实现步骤"><a href="#3-8-0-整体实现步骤" class="headerlink" title="3.8.0 整体实现步骤"></a>3.8.0 整体实现步骤</h4><ol>
<li>创建基本的 vue 实例</li>
<li>基于 vue 渲染表格数据</li>
<li>实现添加品牌的功能</li>
<li>实现删除品牌的功能</li>
<li>实现修改品牌状态的功能</li>
</ol>
<h4 id="3-8-1-创建基本的-vue-实例"><a href="#3-8-1-创建基本的-vue-实例" class="headerlink" title="3.8.1 创建基本的 vue 实例"></a>3.8.1 创建基本的 vue 实例</h4><ul>
<li>导入 vue 的 js 文件 -&gt; 在  标签中声明 el 区域</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建 vue 实例对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">brandlist</span>: [</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">brandname</span>:<span class="string">&#x27;宝马&#x27;</span>, <span class="attr">state</span>: <span class="literal">true</span>, <span class="attr">addtime</span>: <span class="keyword">new</span> <span class="title class_">Date</span>() &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">brandname</span>:<span class="string">&#x27;奥迪&#x27;</span>, <span class="attr">state</span>: <span class="literal">false</span>, <span class="attr">addtime</span>: <span class="keyword">new</span> <span class="title class_">Date</span>() &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">brandname</span>:<span class="string">&#x27;奔驰&#x27;</span>, <span class="attr">state</span>: <span class="literal">true</span>, <span class="attr">addtime</span>: <span class="keyword">new</span> <span class="title class_">Date</span>() &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="3-8-2-基于-vue-渲染表格数据"><a href="#3-8-2-基于-vue-渲染表格数据" class="headerlink" title="3.8.2 基于 vue 渲染表格数据"></a>3.8.2 基于 vue 渲染表格数据</h4><ul>
<li>使用 v-for 指令循环渲染表格的数据：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in brandlist&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;index + 1&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.brandname&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.state&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.addtime&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>将品牌的状态渲染为 Switch 开关效果：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;custom-control custom-switch&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">class</span>=<span class="string">&quot;custom-control-input&quot;</span> <span class="attr">:id</span>=<span class="string">&quot;item.id&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;item.state&quot;</span> /&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;custom-control-label&quot;</span> <span class="attr">:for</span>=<span class="string">&quot;item.id&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;item.state&quot;</span>&gt;</span>已启用<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;custom-control-label&quot;</span> <span class="attr">:for</span>=<span class="string">&quot;item.id&quot;</span> <span class="attr">v-else</span>&gt;</span>已禁用<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Switch 开关效果的官方文档地址： <a target="_blank" rel="noopener" href="https://v4.bootcss.com/docs/components/forms/#switches">https://v4.bootcss.com/docs/components/forms/#switches</a></p>
<ul>
<li>使用全局过滤器对时间进行格式化：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.addtime | dateFoemate&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;dateFormate&#x27;</span>, <span class="function">(<span class="params">str</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>(dtStr)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> y = dt.<span class="title function_">getFullYear</span>()</span><br><span class="line">    <span class="keyword">const</span> m = <span class="title function_">padZero</span>(dt.<span class="title function_">getMonth</span>() + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">const</span> d = <span class="title function_">padZero</span>(dt.<span class="title function_">getDate</span>())</span><br><span class="line">    <span class="keyword">const</span> hh = <span class="title function_">padZero</span>(dt.<span class="title function_">getHours</span>())</span><br><span class="line">    <span class="keyword">const</span> mm = <span class="title function_">padZero</span>(dt.<span class="title function_">getMintues</span>())</span><br><span class="line">    <span class="keyword">const</span> ss = <span class="title function_">padZero</span>(dt.<span class="title function_">getSeconds</span>())</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;y&#125;</span>-<span class="subst">$&#123;m&#125;</span>-<span class="subst">$&#123;d&#125;</span> <span class="subst">$&#123;hh&#125;</span>:<span class="subst">$&#123;mm&#125;</span>:<span class="subst">$&#123;ss&#125;</span>`</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义补零函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">padZero</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> n &gt; <span class="number">9</span> ? n : <span class="string">&#x27;0&#x27;</span> + n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-8-3-添加品牌"><a href="#3-8-3-添加品牌" class="headerlink" title="3.8.3 添加品牌"></a>3.8.3 添加品牌</h4><ul>
<li>阻止表单的默认提交行为</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-inline&quot;</span> @<span class="attr">submit.prevent</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>为 input 输入框进行 v-model 双向数据绑定：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入品牌名称&quot;</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;brandname&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：需要在 data 数据中声明 brandname 属性字段。</p>
</blockquote>
<ul>
<li>为“添加品牌”的 button 按钮绑定 click 事件处理函数：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary mb-2&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;addNewBrand&quot;</span>&gt;</span>添加品牌<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在 data 中声明 nextId 属性（用来记录下一个可用的 id 值），并在 methods 中声明 addNewBrand 事件处理函数：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">nextId</span>: <span class="number">4</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">addNewBrand</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="variable language_">this</span>.<span class="property">brandname</span>) <span class="keyword">return</span> <span class="title function_">alert</span>(<span class="string">&#x27;品牌名不能为空！&#x27;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">brandlist</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: <span class="variable language_">this</span>.<span class="property">nextId</span>, <span class="attr">brandname</span>: <span class="variable language_">this</span>.<span class="property">brandname</span>, <span class="attr">state</span>: <span class="literal">true</span>, <span class="attr">addtime</span>: <span class="keyword">new</span> <span class="title class_">Date</span>() &#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">brandname</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">nextId</span> ++</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>监听 input 输入框的 keyup 事件，通过 .esc 按键修饰符快速清空文本框中的内容：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入品牌名称&quot;</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;brandname&quot;</span> @<span class="attr">keyup.esc</span>=<span class="string">&quot;brandname=&#x27;&#x27;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-8-4-删除品牌"><a href="#3-8-4-删除品牌" class="headerlink" title="3.8.4 删除品牌"></a>3.8.4 删除品牌</h4><ul>
<li>为删除的 a 链接绑定 click 点击事件处理函数，并阻止其默认行为：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;removeBrand(item.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在 methods 节点中声明 removeBrand 事件处理函数如下</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">removeBrand</span>(<span class="params">id</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">brandlist</span> = <span class="variable language_">this</span>.<span class="property">brandlist</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> x.<span class="property">id</span> !== id)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="4-单页面应用程序"><a href="#4-单页面应用程序" class="headerlink" title="4 单页面应用程序"></a>4 单页面应用程序</h2><h3 id="4-1-什么是单页面应用程序"><a href="#4-1-什么是单页面应用程序" class="headerlink" title="4.1 什么是单页面应用程序"></a>4.1 什么是单页面应用程序</h3><p>单页面应用程序（英文名：Single Page Application）简称 SPA，顾名思义，指的是一个 Web 网站中只有唯一的一个 HTML 页面，所有的功能与交互都在这唯一的一个页面内完成。</p>
<h3 id="4-2-单页面应用程序的特点"><a href="#4-2-单页面应用程序的特点" class="headerlink" title="4.2 单页面应用程序的特点"></a>4.2 单页面应用程序的特点</h3><p>单页面应用程序将所有的功能局限于一个 web 页面中，仅在该 web 页面初始化时加载相应的资源（ HTML、 JavaScript 和 CSS）。</p>
<p> 一旦页面加载完成了，SPA 不会因为用户的操作而进行页面的重新加载或跳转。而是利用 JavaScript 动态地变换 HTML 的内容，从而实现页面与用户的交互</p>
<h3 id="4-3-单页面应用程序的优点"><a href="#4-3-单页面应用程序的优点" class="headerlink" title="4.3 单页面应用程序的优点"></a>4.3 单页面应用程序的优点</h3><ol>
<li>良好的交互体验</li>
</ol>
<ul>
<li>单页应用的内容的改变不需要重新加载整个页面</li>
<li>获取数据也是通过 Ajax 异步获取</li>
<li>没有页面之间的跳转，不会出现“白屏现象”</li>
</ul>
<ol start="2">
<li>良好的前后全分离公式</li>
</ol>
<ul>
<li>后端专注于提供 API 接口，更易实现 API 接口的复用</li>
<li>前端专注于页面的渲染，更利于前端工程化的发展</li>
</ul>
<ol start="3">
<li>减轻服务器的压力</li>
</ol>
<ul>
<li>服务器只提供数据，不负责页面的合成与逻辑的处理，吞吐能力会提高几倍</li>
</ul>
<h3 id="4-4-单页面应用程序的缺点"><a href="#4-4-单页面应用程序的缺点" class="headerlink" title="4.4 单页面应用程序的缺点"></a>4.4 单页面应用程序的缺点</h3><ol>
<li>首屏加载慢</li>
</ol>
<ul>
<li>路由懒加载</li>
<li>代码压缩</li>
<li>CDN 加速</li>
<li>网络传输压缩</li>
</ul>
<ol start="2">
<li>不利于 SEO</li>
</ol>
<ul>
<li>SEO 服务器端渲染</li>
</ul>
<h3 id="4-5-如何快速创建-vue-的-SPA-项目"><a href="#4-5-如何快速创建-vue-的-SPA-项目" class="headerlink" title="4.5 如何快速创建 vue 的 SPA 项目"></a>4.5 如何快速创建 vue 的 SPA 项目</h3><p>vue 官方提供了两种快速创建工程化的 SPA 项目的方式：</p>
<ol>
<li>基于 vite 创建 SPA 项目</li>
<li>基于 vue-cli 创建 SPA 项目</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th>vite</th>
<th>vue-cli</th>
</tr>
</thead>
<tbody><tr>
<td>支持的 vue 版本</td>
<td>仅支持 vue3.x</td>
<td>支持 3.x 和 2.x</td>
</tr>
<tr>
<td>是否基于 webpack</td>
<td>否</td>
<td>是</td>
</tr>
<tr>
<td>运行速度</td>
<td>快</td>
<td>较慢</td>
</tr>
<tr>
<td>功能完整度</td>
<td>小而巧（逐渐完善）</td>
<td>大而全</td>
</tr>
<tr>
<td>是否建议在企业级开发中使用</td>
<td>目前不建议</td>
<td>建议在企业级开发中使用</td>
</tr>
</tbody></table>
<h2 id="5-vite-的基本使用"><a href="#5-vite-的基本使用" class="headerlink" title="5 vite 的基本使用"></a>5 vite 的基本使用</h2><h3 id="5-1-创建-vite-的项目"><a href="#5-1-创建-vite-的项目" class="headerlink" title="5.1 创建 vite 的项目"></a>5.1 创建 vite 的项目</h3><p>按照顺序执行如下的命令，即可基于 vite 创建 vue 3.x 的工程化项目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm init vite-app 项目名称</span><br><span class="line"> </span><br><span class="line"><span class="built_in">cd</span> 项目名称</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h3 id="5-2-梳理项目的结构"><a href="#5-2-梳理项目的结构" class="headerlink" title="5.2 梳理项目的结构"></a>5.2 梳理项目的结构</h3><p>使用 vite 创建的项目结构如下：</p>
<ul>
<li>node_modules 目录用来存放第三方依赖包</li>
<li>public 是公共的静态资源目录</li>
<li>src 是项目的源代码目录（程序员写的所有代码都要放在此目录下）</li>
<li>.gitgnore 是Git 的忽略文件</li>
<li>index.html 是SPA 单页面应用程序中唯一的 HTML 页面</li>
<li>package.json 是项目的包管理配置文件</li>
<li>assets目录是用来存放项目中所有的静态资源文件（css，fonts 等）</li>
<li>components 目录用来存放项目中所有的自定义组件</li>
<li>App.vue 是项目的根组件</li>
<li>index.css 是项目的全局样式表文件</li>
<li>main.js 是整个项目的打包入口文件</li>
</ul>
<h3 id="5-3-vite-项目的运行流程"><a href="#5-3-vite-项目的运行流程" class="headerlink" title="5.3 vite 项目的运行流程"></a>5.3 vite 项目的运行流程</h3><p>在工程化的项目中，vue 要做的事情很单纯：通过 main.js 把 App.vue 渲染到 index.html 的指定区域中。</p>
<p>其中：</p>
<ol>
<li>App.vue 用来编写待渲染的模板结构</li>
<li>index.html 中需要预留一个 el 区域</li>
<li>main.js 把 App.vue 渲染到了 index.html 所预留的区域中</li>
</ol>
<h4 id="5-3-1-在-App-vue-中编写模板结构"><a href="#5-3-1-在-App-vue-中编写模板结构" class="headerlink" title="5.3.1 在 App.vue 中编写模板结构"></a>5.3.1 在 App.vue 中编写模板结构</h4><p>清空 App.vue 的默认内容，并书写如下的模板结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h1&gt;这是 App 根组件&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="5-3-2-在-index-html-中预留-el-区域"><a href="#5-3-2-在-index-html-中预留-el-区域" class="headerlink" title="5.3.2 在 index.html 中预留 el 区域"></a>5.3.2 在 index.html 中预留 el 区域</h4><p>打开 index.html 页面，确认预留了 el 区域</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- id 为 app 的 div 元素，就是将来 vue 要控制的区域 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;moudle&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-3-3-在-main-js-中进行渲染"><a href="#5-3-3-在-main-js-中进行渲染" class="headerlink" title="5.3.3 在 main.js 中进行渲染"></a>5.3.3 在 main.js 中进行渲染</h4><p>按照 vue 3.x 的标准用法，把 App.vue 中的模板内容渲染到 index.html 页面的 el 区域中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 从 vue 中按需导入 createApp 函数</span></span><br><span class="line"><span class="comment">// createApp 函数的作用：创建 vue 的“单页面应用程序实例”</span></span><br><span class="line"><span class="keyword">import</span> &#123;createApp&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// 2. 导入待渲染的 App 组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.调用 createApp() 函数，返回值是“单页面应用程序的实例”，用常量 spa_app 进行接收，同时把 App 组件作为参数传给 createApp 函数，表示要把 App 渲染到 index.html 页面上</span></span><br><span class="line"><span class="keyword">const</span> spa_app = <span class="title function_">createApp</span>(app)</span><br><span class="line"><span class="comment">//4. 调用 spa_app 实例的 mount 方法，用来指定 vue 实例要控制的区域</span></span><br><span class="line">spa_app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="6-组件化开发思想"><a href="#6-组件化开发思想" class="headerlink" title="6 组件化开发思想"></a>6 组件化开发思想</h2><h3 id="6-1-什么是组件化开发"><a href="#6-1-什么是组件化开发" class="headerlink" title="6.1 什么是组件化开发"></a>6.1 什么是组件化开发</h3><p>组件化开发指的是：根据封装的思想，把页面上可重用的部分封装为组件，从而方便项目的开发和维护。</p>
<h3 id="6-2-组件化开发的好处"><a href="#6-2-组件化开发的好处" class="headerlink" title="6.2 组件化开发的好处"></a>6.2 组件化开发的好处</h3><ul>
<li>提高了前端代码的复用性和灵活性</li>
<li>提升了开发效率和后期的可维护性</li>
</ul>
<h3 id="6-3-vue-中的组件化开发"><a href="#6-3-vue-中的组件化开发" class="headerlink" title="6.3 vue 中的组件化开发"></a>6.3 vue 中的组件化开发</h3><p>vue 是一个完全支持组件化开发的框架。vue 中规定组件的后缀名是 .vue。之前接触到的 App.vue 文件本质 上就是一个 vue 的组件。</p>
<h2 id="7-vue-组件的构成"><a href="#7-vue-组件的构成" class="headerlink" title="7 vue 组件的构成"></a>7 vue 组件的构成</h2><h3 id="7-1-vue-组件组成结构"><a href="#7-1-vue-组件组成结构" class="headerlink" title="7.1 vue 组件组成结构"></a>7.1 vue 组件组成结构</h3><p>每个 .vue 组件都由 3 部分构成，分别是：</p>
<ul>
<li>template -&gt; 组件的模板结构</li>
<li>script -&gt; 组件的 JavaScript 行为</li>
<li>style -&gt; 组件的样式</li>
</ul>
<blockquote>
<p>其中，每个组件中必须包含 template 模板结构，而 script 行为和 style 样式是可选的组成部分。</p>
</blockquote>
<h3 id="7-2-组件的-template-节点"><a href="#7-2-组件的-template-节点" class="headerlink" title="7.2 组件的 template 节点"></a>7.2 组件的 template 节点</h3><p>vue 规定：每个组件对应的模板结构，需要定义到 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- 当前组件的 DOM 结构，需要定义到 template 标签内部 --&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：<code>&lt;template&gt;</code> 是 vue 提供的容器标签，只起到包裹性质的作用，它不会被渲染为真正的 DOM 元素。</p>
</blockquote>
<h4 id="7-2-1-在-template-中使用指令"><a href="#7-2-1-在-template-中使用指令" class="headerlink" title="7.2.1 在 template 中使用指令"></a>7.2.1 在 template 中使用指令</h4><p>在组件的 <code>&lt;template&gt;</code> 节点中，支持使用前面所学的指令语法，来辅助开发者渲染当前组件的 DOM 结构。代码示例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h1&gt;这是 App 根组件&lt;/h1&gt;</span><br><span class="line">	&lt;p&gt;生成一个随机数字：&#123;&#123; (Math.random() * 10).toFixed(2) &#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;p :title=&quot;new Date().toLocaleTimeString*()&quot;&gt;我在黑马学 vue&lt;/p&gt;</span><br><span class="line">	&lt;p @click=&quot;showInfo&quot;&gt;按钮&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="7-2-2-在-template-中定义根节点"><a href="#7-2-2-在-template-中定义根节点" class="headerlink" title="7.2.2 在 template 中定义根节点"></a>7.2.2 在 template 中定义根节点</h4><p>在 vue 2.x 的版本中，<code>&lt;template&gt;</code> 节点内的 DOM 结构仅支持单个根节点：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- vue 2.x 中，template 节点内的所有元素，最外层“必须有”唯一的根节点进行包裹，否则报错 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是 App 根组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>这是副标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>但是，在 vue 3.x 的版本中，<code>&lt;template&gt;</code> 中支持定义多个根节点：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这是包含多个根节点的 template 结构，因为 h1 标签和 h2 标签外层没有包裹性根元素 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是 App 根组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>这是副标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-组件的-script-节点"><a href="#7-3-组件的-script-节点" class="headerlink" title="7.3 组件的 script 节点"></a>7.3 组件的 script 节点</h3><p>vue 规定：组件内的 <code>&lt;script&gt;</code> 节点是可选的，开发者可以在 <code>&lt;script&gt;</code> 节点中封装组件的 JavaScript 业务逻辑。 <code>&lt;script &gt;</code> 节点的基本结构如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 今后，组将相关的 data 数据、methods 方法等，都需要定义到 export default 所导出的对象中</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-3-1-script-中的-name-节点"><a href="#7-3-1-script-中的-name-节点" class="headerlink" title="7.3.1 script 中的 name 节点"></a>7.3.1 script 中的 name 节点</h4><p>可以通过 name 节点为当前组件定义一个名称：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// name 属性指向的是当前组建的名称（建议每个单词的首字母大写）</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;MyApp&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-3-2-script-中的-data-节点"><a href="#7-3-2-script-中的-data-节点" class="headerlink" title="7.3.2 script 中的 data 节点"></a>7.3.2 script 中的 data 节点</h4><p>vue 组件渲染期间需要用到的数据，可以定义在 data 节点中：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;MyApp&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">username</span>: <span class="string">&#x27;zs&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>组件中的 data 必须是函数.</p>
<p>vue 规定：组件中的 data 必须是一个函数，不能直接指向一个数据对象。因此在组件中定义 data 数据节点 时，下面的方式是错误的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-3-3-script-中的-methods-节点"><a href="#7-3-3-script-中的-methods-节点" class="headerlink" title="7.3.3 script 中的 methods 节点"></a>7.3.3 script 中的 methods 节点</h4><p>组件中的事件处理函数，必须定义到 methods 节点中，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;MyApp&#x27;</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">addCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-4-组件的-style-节点"><a href="#7-4-组件的-style-节点" class="headerlink" title="7.4 组件的 style 节点"></a>7.4 组件的 style 节点</h3><p>vue 规定：组件内的 <code>&lt;style&gt;</code> 节点是可选的，开发者可以在 <code>&lt;style&gt;</code> 节点中编写样式美化当前组件的 UI 结构。<code>&lt;script &gt;</code> 节点的基本结构如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: normal</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>其中 <code>&lt;style&gt;</code> 标签上的 lang=”css” 属性是可选的，它表示所使用的样式语言。默认只支持普通的 css 语法，可<br>选值还有 less、scss 等</p>
</blockquote>
<h4 id="7-4-1-让-style-中支持-less-语法"><a href="#7-4-1-让-style-中支持-less-语法" class="headerlink" title="7.4.1 让 style 中支持 less 语法"></a>7.4.1 让 style 中支持 less 语法</h4><p>如果希望使用 less 语法编写组件的 style 样式，可以按照如下两个步骤进行配置：</p>
<ol>
<li>运行 npm install less -D 命令安装依赖包，从而提供 less 语法的编译支持</li>
<li>在 <code>&lt;style&gt;</code> 标签上添加 lang=”less” 属性，即可使用 less 语法编写组件的样式</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: normal;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">i</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-style</span>: normal;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="8-组件的基本使用"><a href="#8-组件的基本使用" class="headerlink" title="8 组件的基本使用"></a>8 组件的基本使用</h2><h3 id="8-1-组件的注册"><a href="#8-1-组件的注册" class="headerlink" title="8.1 组件的注册"></a>8.1 组件的注册</h3><p>组件之间可以进行相互的引用，例如：</p>
<blockquote>
<p>vue 中组件的引用原则：先注册后使用。</p>
</blockquote>
<h4 id="8-1-1-注册组件的两种方式"><a href="#8-1-1-注册组件的两种方式" class="headerlink" title="8.1.1 注册组件的两种方式"></a>8.1.1 注册组件的两种方式</h4><p>vue 中注册组件的方式分为“全局注册”和“局部注册”两种，其中：</p>
<ul>
<li>被全局注册的组件，可以在全局任何一个组件内使用</li>
<li>被局部注册的组件，只能在当前注册的范围内使用</li>
</ul>
<h4 id="8-1-2-全局注册组件"><a href="#8-1-2-全局注册组件" class="headerlink" title="8.1.2 全局注册组件"></a>8.1.2 全局注册组件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createApp&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">// 1.导入Swiper 和 Test 两个组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Swiper</span> <span class="keyword">from</span> <span class="string">&#x27;./components/MySwiper.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Test</span> <span class="keyword">from</span> <span class="string">&#x27;./components/MyTest.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.调用 app 实例的 conponent（）方法，在全局注册 my-swiper 和 my-test 两个组件</span></span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;my-swiper&#x27;</span>, <span class="title class_">Swiper</span>)</span><br><span class="line">app.<span class="title function_">conponent</span>(<span class="string">&#x27;my-test&#x27;</span>, <span class="title class_">Test</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="8-1-3-使用全局注册组件"><a href="#8-1-3-使用全局注册组件" class="headerlink" title="8.1.3 使用全局注册组件"></a>8.1.3 使用全局注册组件</h4><p>使用 app.component() 方法注册的全局组件，直接以标签的形式进行使用即可，例如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">my-swiper</span>&gt;</span><span class="tag">&lt;/<span class="name">my-swiper</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-test</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-1-4-局部注册组件"><a href="#8-1-4-局部注册组件" class="headerlink" title="8.1.4 局部注册组件"></a>8.1.4 局部注册组件</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>这个 App 根组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-swiper</span>&gt;</span><span class="tag">&lt;/<span class="name">my-swiper</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-search</span>&gt;</span><span class="tag">&lt;/<span class="name">my-search</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">import</span> <span class="title class_">Search</span> <span class="keyword">from</span> <span class="string">&#x27;./components/MySearch.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;my-search&#x27;</span>: <span class="title class_">Search</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-1-5-全局注册和局部注册的区别"><a href="#8-1-5-全局注册和局部注册的区别" class="headerlink" title="8.1.5 全局注册和局部注册的区别"></a>8.1.5 全局注册和局部注册的区别</h4><ul>
<li>被全局注册的组件，可以在全局任何一个组件内使用</li>
<li>被局部注册的组件，只能在当前注册的范围内使用</li>
</ul>
<p>应用场景：</p>
<ul>
<li>如果某些组件在开发期间的使用频率很高，推荐进行全局注册；</li>
<li>如果某些组件只在特定的情况下会被用到，推荐进行局部注册。</li>
</ul>
<h4 id="8-1-6-组件注册时名称的大小写"><a href="#8-1-6-组件注册时名称的大小写" class="headerlink" title="8.1.6 组件注册时名称的大小写"></a>8.1.6 组件注册时名称的大小写</h4><p>在进行组件的注册时，定义组件注册名称的方式有两种：</p>
<ul>
<li><p>使用 kebab-case 命名法（俗称短横线命名法，例如 my-swiper 和 my-search）</p>
</li>
<li><p>使用 PascalCase 命名法（俗称帕斯卡命名法或大驼峰命名法，例如 MySwiper 和 MySearch）</p>
</li>
</ul>
<p>短横线命名法的特点：</p>
<p>必须严格按照短横线名称进行使用</p>
<p>帕斯卡命名法的特点：</p>
<p>既可以严格按照帕斯卡名称进行使用，又可以转化为短横线名称进行使用</p>
<blockquote>
<p>注意：在实际开发中，推荐使用帕斯卡命名法为组件注册名称，因为它的适用性更强</p>
</blockquote>
<h4 id="8-1-7-通过-name-属性注册组件"><a href="#8-1-7-通过-name-属性注册组件" class="headerlink" title="8.1.7 通过 name 属性注册组件"></a>8.1.7 通过 name 属性注册组件</h4><p>在注册组件期间，除了可以直接提供组件的注册名称之外，还可以把组件的 name 属性作为注册后组件的名称， 示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>轮播图组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;MySwiper&#x27;</span> <span class="comment">// name 属性为当前组件的名字</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Swiper</span> <span class="keyword">from</span> <span class="string">&#x27;./components/MySwiper.vue&#x27;</span></span><br><span class="line">app.<span class="title function_">component</span>(<span class="title class_">Swiper</span>.<span class="property">name</span>, <span class="title class_">Swiper</span>)</span><br></pre></td></tr></table></figure>

<h3 id="8-2-组件之间的样式冲突问题"><a href="#8-2-组件之间的样式冲突问题" class="headerlink" title="8.2 组件之间的样式冲突问题"></a>8.2 组件之间的样式冲突问题</h3><p>默认情况下，写在 .vue 组件中的样式会全局生效，因此很容易造成多个组件之间的样式冲突问题。导致组件 之间样式冲突的根本原因是：</p>
<ul>
<li>单页面应用程序中，所有组件的 DOM 结构，都是基于唯一的 index.html 页面进行呈现的</li>
<li>每个组件中的样式，都会影响整个 index.html 页面中的 DOM 元素</li>
</ul>
<h4 id="8-2-1-思考：如何解决组件样式冲突的问题"><a href="#8-2-1-思考：如何解决组件样式冲突的问题" class="headerlink" title="8.2.1 思考：如何解决组件样式冲突的问题"></a>8.2.1 思考：如何解决组件样式冲突的问题</h4><p>为每个组件分配唯一的自定义属性，在编写组件样式时，通过属性选择器来控制样式的作用域，示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">data-v-001</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span> <span class="attr">data-v-001</span>&gt;</span>轮播图组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* 通过中括号“属性选择器”，来防止组件之间的样式冲突问题，因为每个组件分配的自定义属性是“唯一的” */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span><span class="selector-attr">[data-v-001]</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-2-2-style-节点的-scoped-属性"><a href="#8-2-2-style-节点的-scoped-属性" class="headerlink" title="8.2.2 style 节点的 scoped 属性"></a>8.2.2 style 节点的 scoped 属性</h4><p>为了提高开发效率和开发体验，vue 为 style 节点提供了 scoped 属性，从而防止组件之间的样式冲突问题：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">data-v-001</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span> <span class="attr">data-v-001</span>&gt;</span>轮播图组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="comment">/* style 节点的 scoped 属性，用来自动为每个组件分配唯一的“自定义属性”，并自动为当前组件的 DOM 标签和 style 样式应用这个自定义属性，防止组件的样式冲突问题 */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-2-3-deep-样式穿透"><a href="#8-2-3-deep-样式穿透" class="headerlink" title="8.2.3 /deep/ 样式穿透"></a>8.2.3 /deep/ 样式穿透</h4><p>如果给当前组件的 style 节点添加了 scoped 属性，则当前组件的样式对其子组件是不生效的。如果想让某些样 式对子组件生效，可以使用 /deep/ 深度选择器。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.title</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: blue;   <span class="comment">/* 不加 /deep/ 时，生成的选择器格式为 .title[data-v-0522442de] */</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    </span></span><br><span class="line"><span class="language-css">    /deep/ <span class="selector-class">.title</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: blue; <span class="comment">/* 加上 /deep/ 时，生成的选择器为 [data-v-052242de] .title */</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：/deep/ 是 vue2.x 中实现样式穿透的方案。在 vue3.x 中推荐使用 :deep() 替代 /deep/。</p>
</blockquote>
<h3 id="8-3-组件的-props"><a href="#8-3-组件的-props" class="headerlink" title="8.3 组件的 props"></a>8.3 组件的 props</h3><p>为了提高组件的复用性，在封装 vue 组件时需要遵守如下的原则：</p>
<ul>
<li>组件的 DOM 结构、Style 样式要尽量复用</li>
<li>组件中要展示的数据，尽量由组件的使用者提供</li>
</ul>
<p>为了方便使用者为组件提供要展示的数据，vue 组件提供了 props 的概念.</p>
<h4 id="8-3-1-什么是组件的-props"><a href="#8-3-1-什么是组件的-props" class="headerlink" title="8.3.1 什么是组件的 props"></a>8.3.1 什么是组件的 props</h4><p>props 是组件的自定义属性，组件的使用者可以通过 props 把数据传递到子组件内部，供子组件内部进行使 用。代码示例如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 通过自定义 props ，把文章的标题和作责，传递到 my-article 组件中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-article</span> <span class="attr">title</span>=<span class="string">&quot;面朝大海，春暖花开&quot;</span> <span class="attr">author</span>=<span class="string">&quot;海子&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-article</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>props 的作用：父组件通过 props 向子组件传递要展示的数据。</p>
<p>props 的好处：提高了组件的复用性。</p>
<h4 id="8-3-2-在组件中声明-props"><a href="#8-3-2-在组件中声明-props" class="headerlink" title="8.3.2 在组件中声明 props"></a>8.3.2 在组件中声明 props</h4><p>在封装 vue 组件时，可以把动态的数据项声明为 props 自定义属性。自定义属性可以在当前组件的模板结构 中被直接使用。示例代码如下</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- my-article 组件的定义如下 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题：&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>作者：&#123;&#123;author&#125;&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">props</span>: [<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;author&#x27;</span>],     <span class="comment">// 父组件传递给 my-aricle 组件的数据，必须在 props 节点中声明</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-3-3-无法使用未声明的-props"><a href="#8-3-3-无法使用未声明的-props" class="headerlink" title="8.3.3 无法使用未声明的 props"></a>8.3.3 无法使用未声明的 props</h4><p>如果父组件给子组件传递了未声明的 props 属性，则这些属性会被忽略，无法被子组件使用，示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span>&gt;</span>标题：&#123;&#123;title&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>作者：&#123;&#123;author&#125;&#125;<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">props</span>: [<span class="string">&#x27;title&#x27;</span>],     <span class="comment">// author 属性没有声明，因此子组件中无法访问到 author 的值</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-3-4-动态绑定-props-的值"><a href="#8-3-4-动态绑定-props-的值" class="headerlink" title="8.3.4 动态绑定 props 的值"></a>8.3.4 动态绑定 props 的值</h4><p>可以使用 v-bind 属性绑定的形式，为组件动态绑定 props 的值，示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-article</span> <span class="attr">:title</span>=<span class="string">&quot;info.title&quot;</span> <span class="attr">:author</span>=<span class="string">&quot;&#x27;post by&#x27; + info.author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-article</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-3-5-props-的大小写命名"><a href="#8-3-5-props-的大小写命名" class="headerlink" title="8.3.5 props 的大小写命名"></a>8.3.5 props 的大小写命名</h4><p>组件中如果使用“camelCase (驼峰命名法)”声明了 props 属性的名称，则有两种方式为其绑定属性的值：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>发布时间：&#123;&#123;pubTime&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">props</span>: [<span class="string">&#x27;pubTime&#x27;</span>],   <span class="comment">// 采用驼峰命名法为当前的组件声明了 pubTime 属性</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 既可以使用“驼峰命名法”的形式为组件绑定属性的值 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-article</span> <span class="attr">pubTime</span>=<span class="string">&quot;1989&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-article</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 也可以使用“短横线分割命名”的形式为组件绑定属性的值 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-article</span> <span class="attr">pub-time</span>=<span class="string">&quot;1989&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-article</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-4-Class-与-Style-绑定"><a href="#8-4-Class-与-Style-绑定" class="headerlink" title="8.4 Class 与 Style 绑定"></a>8.4 Class 与 Style 绑定</h3><p>在实际开发中经常会遇到动态操作元素样式的需求。因此，vue 允许开发者通过 v-bind 属性绑定指令，为元 素动态绑定 class 属性的值和行内的 style 样式。</p>
<h4 id="8-4-1-动态绑定-HTML-的-class"><a href="#8-4-1-动态绑定-HTML-的-class" class="headerlink" title="8.4.1 动态绑定 HTML 的 class"></a>8.4.1 动态绑定 HTML 的 class</h4><p>可以通过三元表达式，动态的为元素绑定 class 的类名。示例代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;thin&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;isItalic ? &#x27;italic&#x27; : &#x27;&#x27;&quot;</span>&gt;</span>MyDeep 组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isItalic=!isItalic&quot;</span>&gt;</span>Toggle Italic<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123; <span class="attr">isItalic</span>: ture &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.thin</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>: <span class="number">200</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.italic</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-style</span>: italic;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-4-2-以数组语法绑定-HTML-的-class"><a href="#8-4-2-以数组语法绑定-HTML-的-class" class="headerlink" title="8.4.2 以数组语法绑定 HTML 的 class"></a>8.4.2 以数组语法绑定 HTML 的 class</h4><p>如果元素需要动态绑定多个 class 的类名，此时可以使用数组的语法格式：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;thin&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;[isItalic ? &#x27;italic&#x27; : &#x27;&#x27;, isDelete ? &#x27;delete&#x27; : &#x27;&#x27;]&quot;</span>&gt;</span></span><br><span class="line">    MyDeep 组件</span><br><span class="line"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isItalic=!isItalic&quot;</span>&gt;</span>Toggle Italic<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isDelete=!isDelete&quot;</span>&gt;</span>Toggle Delete<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">isItalic</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">isDelete</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-4-3-以对象语法绑定-HTML-的-class"><a href="#8-4-3-以对象语法绑定-HTML-的-class" class="headerlink" title="8.4.3 以对象语法绑定 HTML 的 class"></a>8.4.3 以对象语法绑定 HTML 的 class</h4><p>使用数组语法动态绑定 class 会导致模板结构臃肿的问题。此时可以使用对象语法进行简化：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">cliss</span>=<span class="string">&quot;thin&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;classObj&quot;</span>&gt;</span>MyDeep 组件<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;classObj.italic = !classObj.italic&quot;</span>&gt;</span>Toggle Italic<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;classObj.delete = !classObj.delete&quot;</span>&gt;</span>Toggle Delete<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">classObj</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">				  <span class="attr">italic</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">delete</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="8-4-4-以对象语法绑定内联的-style以对象语法绑定内联的-style"><a href="#8-4-4-以对象语法绑定内联的-style以对象语法绑定内联的-style" class="headerlink" title="8.4.4 以对象语法绑定内联的 style以对象语法绑定内联的 style"></a>8.4.4 以对象语法绑定内联的 style以对象语法绑定内联的 style</h4><p>:style 的对象语法十分直观——看着非常像 CSS，但其实是一个 JavaScript 对象。CSS property 名可以用驼 峰式 (camelCase) 或短横线分隔 (kebab-case，记得用引号括起来) 来命名：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;color: active, fontSize: fsize + &#x27;px&#x27;, &#x27;background-color: bgcolor&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">	黑马程序员    </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;fsize += 1&quot;</span>&gt;</span>字号 +1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;fsize -= 1&quot;</span>&gt;</span>字号 -1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">active</span>: <span class="string">&#x27;red&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">fsize</span>: <span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">bgcolor</span>: <span class="string">&#x27;pink&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-5-组件封装案例"><a href="#8-5-组件封装案例" class="headerlink" title="8.5 组件封装案例"></a>8.5 组件封装案例</h3><ul>
<li>封装要求：</li>
</ul>
<ol>
<li>允许用户自定义 title 标题</li>
<li>允许用户自定义 bgcolor 背景色</li>
<li>允许用户自定义 color 文本颜色</li>
<li>MyHeader 组件需要在页面顶部进行 fixed 固定定位，且 z-index 等于 999</li>
</ol>
<ul>
<li>示例如下：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-header title=&quot;黑马程序员&quot; bgcolor=&quot;#000&quot; color=&quot;#f8f8f8&quot;&gt;&lt;/my-header&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div class=&quot;header-container&quot; :style=&quot;&#123;backgroundColor: bgcolor, color: color&#125;&quot;&gt;</span><br><span class="line">        &#123;&#123;title || &#x27;Header组件&#x27;&#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &#x27;MyHeader&#x27;</span><br><span class="line">    props: [&#x27;title&#x27;,&#x27;bgcolor&#x27;,&#x27;color&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">    .header-container &#123;</span><br><span class="line">        hight: 45px;</span><br><span class="line">        background-color: pink;</span><br><span class="line">        text-align: center;</span><br><span class="line">        line-height: 45px;</span><br><span class="line">        position: fixed;</span><br><span class="line">        top: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        widh: 100%;</span><br><span class="line">        z-index: 999;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="9-组件深入"><a href="#9-组件深入" class="headerlink" title="9 组件深入"></a>9 组件深入</h2><h3 id="9-1-props-验证"><a href="#9-1-props-验证" class="headerlink" title="9.1 props 验证"></a>9.1 props 验证</h3><h4 id="9-1-1-什么是-props-验证"><a href="#9-1-1-什么是-props-验证" class="headerlink" title="9.1.1 什么是 props 验证"></a>9.1.1 什么是 props 验证</h4><p>指的是：在封装组件时对外界传递过来的 props 数据进行合法性的校验，从而防止数据不合法的问题。</p>
<p>使用数据类型的 props 节点的缺点：无法为每个 prop 指定具体的数据类型。</p>
<p>对象类型的 props 节点提供了多种数据验证方案：</p>
<ul>
<li>基础的类型检查</li>
<li>多个可能的类型</li>
<li>必填项校验</li>
<li>属性默认值</li>
<li>自定义验证函数</li>
</ul>
<h4 id="9-1-2-对象类型的-props-节点"><a href="#9-1-2-对象类型的-props-节点" class="headerlink" title="9.1.2 对象类型的 props 节点"></a>9.1.2 对象类型的 props 节点</h4><p>使用对象类型的 props 节点，可以对每个 prop 进行数据类型的校验。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">        &lt;p&gt;数量：&#123;&#123;count&#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;状态：&#123;&#123;state&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &#x27;MyCount&#x27;,</span><br><span class="line">    props: &#123;</span><br><span class="line">        count: Number,</span><br><span class="line">        state: Boolean</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&#x27;less&#x27; scoped&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="9-1-3-基础的类型检查"><a href="#9-1-3-基础的类型检查" class="headerlink" title="9.1.3 基础的类型检查"></a>9.1.3 基础的类型检查</h4><p>可以直接为组件的 prop 属性指定基础的检验类型，从而防止组件的使用者为其绑定错误类型的书数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">export deafuet&#123;</span><br><span class="line">	props: &#123;</span><br><span class="line">		propA: String,</span><br><span class="line">		propB: Number,</span><br><span class="line">		propC: Boolean,</span><br><span class="line">		propD: Array,</span><br><span class="line">		propE: Object,</span><br><span class="line">		propF: Date,</span><br><span class="line">		propG: Function,</span><br><span class="line">		propH: Symbol  // 符号类型</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9-1-4-多个可能的类型"><a href="#9-1-4-多个可能的类型" class="headerlink" title="9.1.4 多个可能的类型"></a>9.1.4 多个可能的类型</h4><p>如果某个 prop 属性值的类型不唯一，此时可以通过数组的形式为其指定多个可能的类型。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">	props: &#123;</span><br><span class="line">		propA: [String, Number]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9-1-5-必填项校验"><a href="#9-1-5-必填项校验" class="headerlink" title="9.1.5 必填项校验"></a>9.1.5 必填项校验</h4><p>如果组件的某个 prop 属性是必填项，必须让组件的使用者为其传递属性的值，此时可以通过如下的方式将其设置为必填项。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">	props: &#123;</span><br><span class="line">		propB: &#123;</span><br><span class="line">			type: String,</span><br><span class="line">			required: true</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9-1-6-属性默认值"><a href="#9-1-6-属性默认值" class="headerlink" title="9.1.6 属性默认值"></a>9.1.6 属性默认值</h4><p>在封装时，可以为某个 prop 属性指定默认值。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">	props: &#123;</span><br><span class="line">		propC: &#123;</span><br><span class="line">			type: Number,</span><br><span class="line">			default: 100</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9-1-7-自定义验证函数"><a href="#9-1-7-自定义验证函数" class="headerlink" title="9.1.7 自定义验证函数"></a>9.1.7 自定义验证函数</h4><p>在封装组件时，可以为 prop 属性指定自定义的验证函数，从而对 prop 属性的值进行更加精确的控制.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">	props: &#123;</span><br><span class="line">		// 通过“配置对象”的形式，来定义 propD 属性的“验证规则”</span><br><span class="line">		propD: &#123;</span><br><span class="line">			// 通过 validator 函数，对 propD 属性的值进行校验，“属性的值”可以通过形参 value 进行接收</span><br><span class="line">			validator(value) &#123;</span><br><span class="line">				// propD 属性的值，必须匹配下列字符串中的一个</span><br><span class="line">				// validator 函数的返回值为 true 表示验证通过，false 表示验证失败</span><br><span class="line">				return [&#x27;success&#x27;, &#x27;warning&#x27;, &#x27;danger&#x27;].indexof(value) !==-1</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-2-计算属性"><a href="#9-2-计算属性" class="headerlink" title="9.2 计算属性"></a>9.2 计算属性</h3><h4 id="9-2-1-什么是计算属性"><a href="#9-2-1-什么是计算属性" class="headerlink" title="9.2.1 什么是计算属性"></a>9.2.1 什么是计算属性</h4><p>计算属性本质上就是一个 function 函数，它可以实时监听 data 中数据的变化，并 return 一个计算后的新值，供组件渲染 DOM 时使用。</p>
<h4 id="9-2-2-如何生命计算属性"><a href="#9-2-2-如何生命计算属性" class="headerlink" title="9.2.2 如何生命计算属性"></a>9.2.2 如何生命计算属性</h4><p>计算属性需要以 function 函数的形式声明到组件的 computed 选项中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; v-model.number=&quot;count&quot; /&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;count&#125;&#125; 乘以 2 的值为： &#123;&#123;plus&#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">data() &#123;</span><br><span class="line">	return &#123;count: 1&#125;</span><br><span class="line">&#125;,</span><br><span class="line">computed: &#123;</span><br><span class="line">	plus() &#123;</span><br><span class="line">		return this.count * 2</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9-2-3-计算属性的使用注意点"><a href="#9-2-3-计算属性的使用注意点" class="headerlink" title="9.2.3 计算属性的使用注意点"></a>9.2.3 计算属性的使用注意点</h4><ol>
<li>计算属性必须定义在 computed 节点中</li>
<li>计算属性必须是一个 function 函数</li>
<li>计算属性必须有返回值</li>
<li>计算属性必须当作普通属性使用</li>
</ol>
<h4 id="9-2-4-计算属性-vs-方法"><a href="#9-2-4-计算属性-vs-方法" class="headerlink" title="9.2.4 计算属性 vs 方法"></a>9.2.4 计算属性 vs 方法</h4><p>相对于方法来说，计算属性会缓存计算的结果，只有计算属性的依赖项发生变化时，才会重新进行运算。因此，计算属性的性能更好。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; v-model.number=&quot;count&quot; /&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;count&#125;&#125; 乘以 2 的值为： &#123;&#123;plus()&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;count&#125;&#125; 乘以 2 的值为： &#123;&#123;plus()&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;count&#125;&#125; 乘以 2 的值为： &#123;&#123;plus()&#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">	plus() &#123;</span><br><span class="line">		console.log(&#x27;方法被执行了&#x27;)</span><br><span class="line">		return this.count * 2</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>控制台输出： 方法被执行了</p>
<p>​                        方法被执行了</p>
<p>​                        方法被执行了</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; v-model.number=&quot;count&quot; /&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;count&#125;&#125; 乘以 2 的值为： &#123;&#123;plus&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;count&#125;&#125; 乘以 2 的值为： &#123;&#123;plus&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;count&#125;&#125; 乘以 2 的值为： &#123;&#123;plus&#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">	plus() &#123;</span><br><span class="line">		console.log(&#x27;计算属性被执行了&#x27;)</span><br><span class="line">		return this.count * 2</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>控制台输出：计算属性被执行了</p>
</blockquote>
<h4 id="9-2-5-计算属性案例"><a href="#9-2-5-计算属性案例" class="headerlink" title="9.2.5 计算属性案例"></a>9.2.5 计算属性案例</h4><ul>
<li>商品购物篮案例</li>
</ul>
<p>案例需求：</p>
<ol>
<li>已勾选的商品总数</li>
<li>已勾选的商品总价</li>
<li>结算按钮的禁用状态</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        ...</span><br><span class="line">        computed: &#123;</span><br><span class="line">        	// 动态计算勾选水果的总数量</span><br><span class="line">			total() &#123;</span><br><span class="line">                let t = 0</span><br><span class="line">                this.fruitlist.forEach(x =&gt; &#123;</span><br><span class="line">                    if (x.state) &#123;</span><br><span class="line">                        t += x.count</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                return t</span><br><span class="line">            &#125;,</span><br><span class="line">            // 动态计算勾选商品总价</span><br><span class="line">            amount() &#123;</span><br><span class="line">                let a = 0</span><br><span class="line">                this.fruitlisst.filter(x =&gt; x.state).forEach(x =&gt; &#123;</span><br><span class="line">                    a += x.price * x.count</span><br><span class="line">                &#125;)</span><br><span class="line">                return a</span><br><span class="line">            &#125;,</span><br><span class="line">            // 控制按钮的禁用状态</span><br><span class="line">            isDisabled() &#123;</span><br><span class="line">                return this.total === 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="9-3-自定义事件"><a href="#9-3-自定义事件" class="headerlink" title="9.3 自定义事件"></a>9.3 自定义事件</h3><h4 id="9-3-1-什么是自定义事件"><a href="#9-3-1-什么是自定义事件" class="headerlink" title="9.3.1 什么是自定义事件"></a>9.3.1 什么是自定义事件</h4><p>在封装组件时，为了让组件的使用者可以监听到组件内状态的变化，此时需要用到组件的自定义事件。</p>
<p><img src="https://cdn.staticaly.com/gh/Mango-Lun/images@main/img/202209081652782.png"></p>
<h4 id="9-3-2-自定义事件的-3-个使用步骤"><a href="#9-3-2-自定义事件的-3-个使用步骤" class="headerlink" title="9.3.2 自定义事件的 3 个使用步骤"></a>9.3.2 自定义事件的 3 个使用步骤</h4><p>在封装组件时：</p>
<ol>
<li>声明自定义事件</li>
<li>触发自定义事件</li>
</ol>
<p>在使用组件时：</p>
<ol start="3">
<li>监听自定义事件</li>
</ol>
<h5 id="9-3-2-1-声明自定义事件"><a href="#9-3-2-1-声明自定义事件" class="headerlink" title="9.3.2.1 声明自定义事件"></a>9.3.2.1 声明自定义事件</h5><p>开发者为自定义组件封装的自定义事件，必须事先在 emits 节点中声明。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h3&gt;Counter组件&lt;/h3&gt;</span><br><span class="line">	&lt;button&gt;+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    // my-counter 组件的自定义事件，必须实现声明到 emits 节点中</span><br><span class="line">    emits:[&#x27;change&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="9-3-2-2-触发自定义事件"><a href="#9-3-2-2-触发自定义事件" class="headerlink" title="9.3.2.2 触发自定义事件"></a>9.3.2.2 触发自定义事件</h5><p>在 emits 节点下声明的自定义事件，可以通过 this.$emit(‘自定义事件名称’)方法进行触发。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h3&gt;Counter组件&lt;/h3&gt;</span><br><span class="line">	&lt;button&gt;+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    // my-counter 组件的自定义事件，必须实现声明到 emits 节点中</span><br><span class="line">    emits:[&#x27;change&#x27;],</span><br><span class="line">    methods: &#123;</span><br><span class="line">        onBtnClick() &#123;</span><br><span class="line">            this.$emit(&#x27;change&#x27;)</span><br><span class="line">            // 当点击 +1 按钮时，调用 this.$emit()方法，触发自定义事件</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="9-3-2-3-监听自定义事件"><a href="#9-3-2-3-监听自定义事件" class="headerlink" title="9.3.2.3 监听自定义事件"></a>9.3.2.3 监听自定义事件</h5><p>在使用自定义的组件时，可以通过 v-on 的形式监听自定义事件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-counter @change=&quot;getCount&quot;&gt;&lt;/my-counter&gt;</span><br><span class="line"></span><br><span class="line">method: &#123;</span><br><span class="line">	getCount() &#123;</span><br><span class="line">		console.log(&#x27;监听到了 count 值的变化&#x27;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9-3-3-自定义事件传参"><a href="#9-3-3-自定义事件传参" class="headerlink" title="9.3.3 自定义事件传参"></a>9.3.3 自定义事件传参</h4><p>在调用 this.$emit() 方法触发自定义事件时，可以通过第二个参数为自定义事件传参。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h3&gt;Counter组件&lt;/h3&gt;</span><br><span class="line">	&lt;button&gt;+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    emits:[&#x27;change&#x27;],</span><br><span class="line">    methods: &#123;</span><br><span class="line">        onBtnClick() &#123;</span><br><span class="line">            this.$emit(&#x27;change&#x27;,this.count)</span><br><span class="line">            // 触发自定义事件时，通过第二个参数传参</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="9-4-组件上的-v-model"><a href="#9-4-组件上的-v-model" class="headerlink" title="9.4 组件上的 v-model"></a>9.4 组件上的 v-model</h3><h4 id="9-4-1-为什么需要在组件上使用-v-model"><a href="#9-4-1-为什么需要在组件上使用-v-model" class="headerlink" title="9.4.1 为什么需要在组件上使用 v-model"></a>9.4.1 为什么需要在组件上使用 v-model</h4><p>v-model 是双向数据绑定指令，当需要维护组件内外数据的同步时，可以在组件上使用 v-model 指令。</p>
<p><img src="https://cdn.staticaly.com/gh/Mango-Lun/images@main/img/202209081732528.png"></p>
<ul>
<li>外界数据的变化会自动同步到 counter 组件中</li>
<li>counter 组件中数据的变化，也会自动同步到外界</li>
</ul>
<h4 id="9-4-2-在组件上使用-v-model"><a href="#9-4-2-在组件上使用-v-model" class="headerlink" title="9.4.2 在组件上使用 v-model"></a>9.4.2 在组件上使用 v-model</h4><ul>
<li>父 -&gt; 子</li>
</ul>
<ol>
<li>父组件通过 v-bind： 属性绑定的形式，把数据传递给子组件</li>
<li>子组件中，通过 props 接收父组件传递过来的数据</li>
</ol>
<p><img src="https://cdn.staticaly.com/gh/Mango-Lun/images@main/img/202209081738145.png"></p>
<ul>
<li>子 -&gt; 父</li>
</ul>
<ol>
<li>在 v-bind：指令之前添加 v-model 指令</li>
<li>在子组件中声明 emits 自定事件，格式为 update：xxx</li>
<li>调用 $emit() 触发自定义事件，更新父组件的数据</li>
</ol>
<p><img src="https://cdn.staticaly.com/gh/Mango-Lun/images@main/img/202209081751315.png"></p>
<h3 id="9-5-案例"><a href="#9-5-案例" class="headerlink" title="9.5 案例"></a>9.5 案例</h3><h4 id="9-5-1-初始化项目"><a href="#9-5-1-初始化项目" class="headerlink" title="9.5.1 初始化项目"></a>9.5.1 初始化项目</h4><ol>
<li>在终端运行一下命令，初始化 vite 项目</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init vite-app todos</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用 vscode 打开项目，并安装依赖项</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>安装 less 语法相关的依赖项</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i less -D</span><br></pre></td></tr></table></figure>

<h4 id="9-5-2-梳理项目结构"><a href="#9-5-2-梳理项目结构" class="headerlink" title="9.5.2 梳理项目结构"></a>9.5.2 梳理项目结构</h4><ol>
<li>重置 index.css 中的全局样式</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>重置 App.vue 组件的代码结构</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;App 根组件&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;MyApp&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        // 任务列表数组</span><br><span class="line">        todolist: [</span><br><span class="line">          &#123; id: 1, task: &#x27;周一早晨9点开会&#x27;, done: false&#125;,</span><br><span class="line">          &#123; id: 2, task: &#x27;周一晚上8点聚餐&#x27;, done: false&#125;,</span><br><span class="line">          &#123; id: 3, task: &#x27;准备周三上午的演讲稿&#x27;, done: true&#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>删除 components 目录下的 HelloWorld.vue 组件</li>
<li>在终端运行一下命令，把项目运行起来</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h4 id="9-5-3-封装-todo-list-组件"><a href="#9-5-3-封装-todo-list-组件" class="headerlink" title="9.5.3 封装 todo-list 组件"></a>9.5.3 封装 todo-list 组件</h4><h5 id="9-5-3-1-创建并注册-TodoList-组件"><a href="#9-5-3-1-创建并注册-TodoList-组件" class="headerlink" title="9.5.3.1 创建并注册 TodoList 组件"></a>9.5.3.1 创建并注册 TodoList 组件</h5><ol>
<li>在 <code>src/components/todo-list/</code>目录下新建<code>TodoList.vue</code>组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;todolist 组件&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;TodoList&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App.vue 组件中导入并注册 TodeList.vue 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;App 根组件&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;todo-list&gt;&lt;/todo-list&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 导入 TodoList 组件</span><br><span class="line">import TodoList from &#x27;./components/todo-list/TodoList.vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;MyApp&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 任务列表数组</span><br><span class="line">      todolist: [</span><br><span class="line">        &#123; id: 1, task: &#x27;周一早晨9点开会&#x27;, done: false &#125;,</span><br><span class="line">        &#123; id: 2, task: &#x27;周一晚上8点聚餐&#x27;, done: false &#125;,</span><br><span class="line">        &#123; id: 3, task: &#x27;准备周三上午的演讲稿&#x27;, done: true &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    TodoList,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App.vue 的 template 模板结构中使用注册的 TodoList 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;App 根组件&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;todo-list&gt;&lt;/todo-list&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="9-5-3-2-基于-bootstrap-渲染列表组件"><a href="#9-5-3-2-基于-bootstrap-渲染列表组件" class="headerlink" title="9.5.3.2 基于 bootstrap 渲染列表组件"></a>9.5.3.2 基于 bootstrap 渲染列表组件</h5><ol>
<li>将 bootstrap 文件拷贝到 <code>src/assets/</code> 静态资源目录中</li>
<li>在 main.js 入口文件中，导入 <code>src/assets/css/bootstrap.css</code>样式表</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/css/bootstrap.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>根据 bootstrap 提供的列表组和复选框渲染列表组件的基本效果</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;ul class=&quot;list-group&quot;&gt;</span><br><span class="line">      &lt;!-- 列表组 --&gt;</span><br><span class="line">      &lt;li class=&quot;list-group-item d-flex justify-content-between align-items-center&quot;&gt;</span><br><span class="line">        &lt;!-- 复选框 --&gt;</span><br><span class="line">        &lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; value=&quot;&quot; id=&quot;flexCheckDefault&quot;&gt;</span><br><span class="line">        &lt;label class=&quot;form-check-label&quot; for=&quot;flexCheckDefault&quot;&gt;</span><br><span class="line">          Default checkbox</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">        &lt;!-- 徽标 --&gt;</span><br><span class="line">        &lt;span class=&quot;badge bg-success rounded-pill&quot;&gt;完成&lt;/span&gt;</span><br><span class="line">        &lt;span class=&quot;badge bg-warning rounded-pill&quot;&gt;未完成&lt;/span&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;TodoList&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="9-5-3-3-为-TodoList-声明-props-属性"><a href="#9-5-3-3-为-TodoList-声明-props-属性" class="headerlink" title="9.5.3.3 为 TodoList 声明 props 属性"></a>9.5.3.3 为 TodoList 声明 props 属性</h5><ol>
<li>为了接收外界传递过来的列表数据，需要在 TodoList 组件中声明如下的 props 属性</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;TodoList&#x27;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    list: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      required: true,</span><br><span class="line">      default: [],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App 组件中通过 list 属性，将数据传递到 TodoList 组件中</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;todo-list :list=&quot;todolist&quot;&gt;&lt;/todo-list&gt;</span><br></pre></td></tr></table></figure>

<h5 id="9-5-3-4-渲染列表的-DOM-结构"><a href="#9-5-3-4-渲染列表的-DOM-结构" class="headerlink" title="9.5.3.4 渲染列表的 DOM 结构"></a>9.5.3.4 渲染列表的 DOM 结构</h5><ol>
<li>通过 v-for 指令，循环渲染列表的 DOM 结构</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;ul class=&quot;list-group&quot;&gt;</span><br><span class="line">      &lt;!-- 列表组 --&gt;</span><br><span class="line">      &lt;li class=&quot;list-group-item d-flex justify-content-between align-items-center&quot; v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;!-- 复选框 --&gt;</span><br><span class="line">        &lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; value=&quot;&quot; :id=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;label class=&quot;form-check-label&quot; :for=&quot;item.id&quot;&gt;</span><br><span class="line">          &#123;&#123;item.task&#125;&#125;</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">        &lt;!-- 徽标 --&gt;</span><br><span class="line">        &lt;span class=&quot;badge bg-success rounded-pill&quot; v-if=&quot;item.done&quot;&gt;完成&lt;/span&gt;</span><br><span class="line">        &lt;span class=&quot;badge bg-warning rounded-pill&quot; v-else&gt;未完成&lt;/span&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>通过 v-if 和 v-else 指令，按需渲染 bedge 效果</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;badge bg-success rounded-pill&quot; v-if=&quot;item.done&quot;&gt;完成&lt;/span&gt;</span><br><span class="line">&lt;span class=&quot;badge bg-warning rounded-pill&quot; v-else&gt;未完成&lt;/span&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>通过 v-model 指令，双向绑定任务的完成情况</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; value=&quot;&quot; :id=&quot;item.id&quot; v-model=&quot;item.done&quot;&gt;</span><br><span class="line">&lt;!-- 注意：App父组件通过 props 传递过来的 list 是引用类型的数据 --&gt;</span><br><span class="line">&lt;!-- 这里 v-model 双向绑定的结果是：用户的操作修改的是 App 组件中数据的状态 --&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>通过 v-bind 属性绑定，动态切换元素的 class 类名</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;label class=&quot;form-check-label&quot; :for=&quot;item.id&quot; :class=&quot;item.done ? &#x27;delete&#x27; : &#x27;&#x27;&quot;&gt;&#123;&#123;item.task&#125;&#125;&lt;/label&gt;</span><br></pre></td></tr></table></figure>

<p>​      在 TodoList 组件中声明如下样式，美化当前组件的 UI 结构</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.list-group</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.delete</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">  <span class="attribute">color</span>: gray;</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9-5-4-封装-todo-input-组件"><a href="#9-5-4-封装-todo-input-组件" class="headerlink" title="9.5.4 封装 todo-input 组件"></a>9.5.4 封装 todo-input 组件</h4><h5 id="9-5-4-1-创建并注册-TodoInput-组件"><a href="#9-5-4-1-创建并注册-TodoInput-组件" class="headerlink" title="9.5.4.1 创建并注册 TodoInput 组件"></a>9.5.4.1 创建并注册 TodoInput 组件</h5><ol>
<li>在 <code>src/components/todo-list/</code> 目录下新建 TodoInput.vue 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    TodoInput</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;TodoInput&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App.vue 组件中导入并注册 TodoInput.vue 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">// 导入 TodoInput 组件</span><br><span class="line">import TodoInput from &#x27;./components/todo-input/TodoInput.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;MyApp&#x27;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    TodoList,</span><br><span class="line">    TodoInput</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App.vue 的 template 模板结构中使用注册的 TodoInput 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;App 根组件&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  &lt;todo-input&gt;&lt;/todo-input&gt;</span><br><span class="line">  &lt;todo-list :list=&quot;todolist&quot; class=&quot;mt-2&quot;&gt;&lt;/todo-list&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="9-5-4-2-基于-bootstrap-渲染组件结构"><a href="#9-5-4-2-基于-bootstrap-渲染组件结构" class="headerlink" title="9.5.4.2 基于 bootstrap 渲染组件结构"></a>9.5.4.2 基于 bootstrap 渲染组件结构</h5><ol>
<li>根据 bootstrap 提供的 inline-forms 渲染 TodoInput 组件的基本结构</li>
<li>在 TodoInput 组件中渲染如下的 DOM 结构</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- form 表单 --&gt;</span><br><span class="line">  &lt;form class=&quot;form-inline&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;input-group mb-2 mr-sm-2&quot;&gt;</span><br><span class="line">      &lt;!-- 输入框前缀 --&gt;</span><br><span class="line">      &lt;div class=&quot;input-group-prepend&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;input-group-text&quot;&gt;任务&lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- 文本输入框 --&gt;</span><br><span class="line">      &lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;请填写任务信息&quot; style=&quot;width: 356px;&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary mb-2&quot;&gt;添加新任务&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="9-5-4-3-通过自定义事件向外传递数据"><a href="#9-5-4-3-通过自定义事件向外传递数据" class="headerlink" title="9.5.4.3 通过自定义事件向外传递数据"></a>9.5.4.3 通过自定义事件向外传递数据</h5><blockquote>
<p>需求：</p>
<p>在 App 组件中，监听 TodoInput 组件的自定义事件，获取到要添加的任务名称，示例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;todo-input @add=&quot;onAddNewTask&quot;&gt;&lt;/todo-input&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<ol>
<li>在 TodoInput 组件的 data 中声明如下的数据：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// 新任务名称</span></span><br><span class="line">        <span class="attr">taskname</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>为 input 输入框进行 v-model 的双向数据绑定</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;请填写任务信息&quot; style=&quot;width: 356px;&quot; v-model.trim=&quot;taskname&quot;&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>监听 form 表单的 submit 事件，阻止默认提交行为并指定事件处理函数</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;form class=&quot;form-inline&quot; @submit.prevent=&quot;onFormSubmit&quot;&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>在 methods 中声明 onFormSubmit 事件处理函数</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;TodoInput&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        // 新任务名称</span><br><span class="line">        taskname: &#x27;&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      onFormSubmit() &#123;</span><br><span class="line">        if(!this.taskname) return alert(&#x27;任务名称不能为空！&#x27;)</span><br><span class="line">        // 触发自定义事件，并向外传递参数</span><br><span class="line">        this.$emit(&#x27;add&#x27;, this.taskname)</span><br><span class="line">        // 传递完成，清空文本框</span><br><span class="line">        this.taskname = &#x27;&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    emits: [&#x27;add&#x27;]</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="9-5-4-4-实现添加任务的功能"><a href="#9-5-4-4-实现添加任务的功能" class="headerlink" title="9.5.4.4 实现添加任务的功能"></a>9.5.4.4 实现添加任务的功能</h5><ol>
<li>在 App 组件中监听 TodoInput 组件自定义的 add 事件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;todo-input @add=&quot;onAddNewTask&quot;&gt;&lt;/todo-input&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App 组件中的 data 中声明 nextId 来模拟自增 +1 的操作</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 任务列表数组</span></span><br><span class="line">      <span class="attr">todolist</span>: [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">task</span>: <span class="string">&#x27;周一早晨9点开会&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">task</span>: <span class="string">&#x27;周一晚上8点聚餐&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">task</span>: <span class="string">&#x27;准备周三上午的演讲稿&#x27;</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">// 下一个可用的 Id</span></span><br><span class="line">      <span class="attr">nextId</span>: <span class="number">4</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App 组件的 methods 中声明 onAddNewTask 事件处理函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="title function_">onAddNewTask</span>(<span class="params">x</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">todolist</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="variable language_">this</span>.<span class="property">nextId</span>,</span><br><span class="line">        <span class="attr">task</span>: x,</span><br><span class="line">        <span class="attr">done</span>: <span class="literal">false</span>, <span class="comment">// 默认未完成</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// id 自增1</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">nextId</span>++</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="9-5-5-封装-todo-button-组件"><a href="#9-5-5-封装-todo-button-组件" class="headerlink" title="9.5.5 封装 todo-button 组件"></a>9.5.5 封装 todo-button 组件</h4><h5 id="9-5-5-1-创建并注册-TodoButton-组件"><a href="#9-5-5-1-创建并注册-TodoButton-组件" class="headerlink" title="9.5.5.1 创建并注册 TodoButton 组件"></a>9.5.5.1 创建并注册 TodoButton 组件</h5><ol>
<li>在 <code>src/components/todo-button/</code> 目录下新建 TodoButton.vue 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    xxx</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;TodoButton&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App.vue 组件中导入并注册 TodoButton.vue 组件</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 TodoButton 组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TodoButton</span> <span class="keyword">from</span> <span class="string">&#x27;./components/todo-button/TodoButton.vue&#x27;</span></span><br></pre></td></tr></table></figure>

<h5 id="9-5-5-2-基于-bootstrap-渲染组件结构"><a href="#9-5-5-2-基于-bootstrap-渲染组件结构" class="headerlink" title="9.5.5.2 基于 bootstrap 渲染组件结构"></a>9.5.5.2 基于 bootstrap 渲染组件结构</h5><ol>
<li>根据 bootstrap 提供的 Button group 渲染 TodoButton 组件的基本结构</li>
<li>在 TodoButton 组件中渲染如下 DOM 结构</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;mt-3 btn-container&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;btn-group&quot; role=&quot;group&quot; aria-label=&quot;Basic example&quot;&gt;</span><br><span class="line">      &lt;button type=&quot;button&quot; class=&quot;btn btn-primary&quot;&gt;全部&lt;/button&gt;</span><br><span class="line">      &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot;&gt;已完成&lt;/button&gt;</span><br><span class="line">      &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot;&gt;未完成&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>并通过 btn-container 类名美化组件样式</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"><span class="selector-class">.btn-container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="9-5-5-3-通过-props-指定默认激活的按钮"><a href="#9-5-5-3-通过-props-指定默认激活的按钮" class="headerlink" title="9.5.5.3 通过 props 指定默认激活的按钮"></a>9.5.5.3 通过 props 指定默认激活的按钮</h5><ol>
<li>在 TodoButton 组件中声明如下的 props，用来指定默认激活的按钮的索引</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">  <span class="attr">active</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>通过动态绑定 class 类名的方式控制按钮的激活状态</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button type=&quot;button&quot; class=&quot;btn&quot; :class=&quot;active === 0 ? &#x27;btn-primary&#x27; : &#x27;btn-secondary&#x27;&quot;&gt;全部&lt;/button&gt;</span><br><span class="line">&lt;button type=&quot;button&quot; class=&quot;btn&quot; :class=&quot;active === 1 ? &#x27;btn-primary&#x27; : &#x27;btn-secondary&#x27;&quot;&gt;已完成&lt;/button&gt;</span><br><span class="line">&lt;button type=&quot;button&quot; class=&quot;btn&quot; :class=&quot;active === 2 ? &#x27;btn-primary&#x27; : &#x27;btn-secondary&#x27;&quot;&gt;未完成&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App 组件中声明默认激活项的索引，并通过属性绑定的方式传递给 TodoButton 组件</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;todo-button :active=<span class="string">&quot;defaultActive&quot;</span>&gt;&lt;/todo-button&gt;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 任务列表数组</span></span><br><span class="line">      <span class="attr">todolist</span>: [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">task</span>: <span class="string">&#x27;周一早晨9点开会&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">task</span>: <span class="string">&#x27;周一晚上8点聚餐&#x27;</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">task</span>: <span class="string">&#x27;准备周三上午的演讲稿&#x27;</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">// 下一个可用的 Id</span></span><br><span class="line">      <span class="attr">nextId</span>: <span class="number">4</span>,</span><br><span class="line"></span><br><span class="line">      <span class="attr">defaultActive</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="9-5-5-4-通过-v-model-更新激活项的索引"><a href="#9-5-5-4-通过-v-model-更新激活项的索引" class="headerlink" title="9.5.5.4 通过 v-model 更新激活项的索引"></a>9.5.5.4 通过 v-model 更新激活项的索引</h5><blockquote>
<p>需求分析：</p>
<p>父 -&gt; 子 通过 props 传递了激活项的索引</p>
<p>子 -&gt; 父 需要更新父组件中激活项的索引</p>
<p>这种场景下适合在组件上使用 v-model 指令，维护组件内外数据的同步。</p>
</blockquote>
<ol>
<li>为 TodoButton 组件中的三个按钮分别别绑定 click 事件处理函数</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;btn-group&quot; role=&quot;group&quot; aria-label=&quot;Basic example&quot;&gt;</span><br><span class="line">      &lt;button type=&quot;button&quot; class=&quot;btn&quot; :class=&quot;active === 0 ? &#x27;btn-primary&#x27; : &#x27;btn-secondary&#x27;&quot;</span><br><span class="line">        @click=&quot;onBtnClick(0)&quot;&gt;全部&lt;/button&gt;</span><br><span class="line">      &lt;button type=&quot;button&quot; class=&quot;btn&quot; :class=&quot;active === 1 ? &#x27;btn-primary&#x27; : &#x27;btn-secondary&#x27;&quot;</span><br><span class="line">        @click=&quot;onBtnClick(1)&quot;&gt;已完成&lt;/button&gt;</span><br><span class="line">      &lt;button type=&quot;button&quot; class=&quot;btn&quot; :class=&quot;active === 2 ? &#x27;btn-primary&#x27; : &#x27;btn-secondary&#x27;&quot;</span><br><span class="line">        @click=&quot;onBtnClick(2)&quot;&gt;未完成&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 TodoButton 组件中声明如下的自定义事件，用来更新父组件通过 v-model 指令传递过来的 props 数据</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">emits</span>:[<span class="string">&#x27;update:active&#x27;</span>],</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 TodoButton 组件的 methods 节点中声明 onBtnClick 事件处理函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">   <span class="title function_">onBtnClick</span>(<span class="params">index</span>) &#123;</span><br><span class="line">   	<span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">active</span> === index) <span class="keyword">return</span></span><br><span class="line">   	<span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:active&#x27;</span>, index)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="9-5-5-5-通过计算属性动态切换列表的数据"><a href="#9-5-5-5-通过计算属性动态切换列表的数据" class="headerlink" title="9.5.5.5 通过计算属性动态切换列表的数据"></a>9.5.5.5 通过计算属性动态切换列表的数据</h5><blockquote>
<p>需求分析：</p>
<p>点击不同的按钮，切换显示不同的列表数据，此时可以根据当前激活按钮的索引，动态计算出要显示的列表数据并返回即可</p>
</blockquote>
<ol>
<li>在 App 跟组件中声明如下的计算属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">tasklist</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">switch</span>(<span class="variable language_">this</span>.<span class="property">defaultActive</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">// 全部</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">todolist</span></span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">// 已完成</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">todolist</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> x.<span class="property">done</span> === <span class="literal">true</span>)</span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">// 未完成</span></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">todolist</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> x.<span class="property">done</span> !== <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App 根组件中 DOM 结构中，将 TodoList 组件的 <code>:list=&quot;todolist&quot;</code> 修改为</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;todo-list :list=&quot;tasklist&quot; class=&quot;mt-2&quot;&gt;&lt;/todo-list&gt;</span><br></pre></td></tr></table></figure>

<h2 id="10-组件高级"><a href="#10-组件高级" class="headerlink" title="10 组件高级"></a>10 组件高级</h2><h3 id="10-1-watch-侦听器"><a href="#10-1-watch-侦听器" class="headerlink" title="10.1 watch 侦听器"></a>10.1 watch 侦听器</h3><h4 id="10-1-1-什么是-watch-侦听器"><a href="#10-1-1-什么是-watch-侦听器" class="headerlink" title="10.1.1 什么是 watch 侦听器"></a>10.1.1 什么是 watch 侦听器</h4><p>watch 侦听器允许开发者监视数据的变化，从而针对数据的变化做特定的操作。例如，监视用户名的变化并发起请求，判断用户名是否可用。</p>
<h4 id="10-1-2-watch-侦听器的基本语法"><a href="#10-1-2-watch-侦听器的基本语法" class="headerlink" title="10.1.2 watch 侦听器的基本语法"></a>10.1.2 watch 侦听器的基本语法</h4><p>开发者需要在 watch 节点下，定义自己的侦听器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">	data() &#123;</span><br><span class="line">		return &#123;</span><br><span class="line">            username:&#x27;&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    watch: &#123;</span><br><span class="line">        // 监听 username 的值的变化</span><br><span class="line">        // 形参列表中，第一个值是变化后的新值，第二个是变化前的旧值</span><br><span class="line">        username(newVal, oldVal) &#123;</span><br><span class="line">            console.log(newVal, oldVal)</span><br><span class="line">        &#125;，</span><br><span class="line">    &#125;，</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-1-3-使用-watch-检车用户名是否可用"><a href="#10-1-3-使用-watch-检车用户名是否可用" class="headerlink" title="10.1.3 使用 watch 检车用户名是否可用"></a>10.1.3 使用 watch 检车用户名是否可用</h4><p>监听 username 的值的变化，并使用 axios 发起 Ajax 请求，检测当前输入的用户名是否可用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="keyword">async</span> <span class="title function_">username</span>(<span class="params"><span class="keyword">new</span>, old</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;<span class="attr">data</span>: res&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://www.escook.cn/api/finduser&#x27;</span> + <span class="keyword">new</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-1-4-immediate-选项"><a href="#10-1-4-immediate-选项" class="headerlink" title="10.1.4 immediate 选项"></a>10.1.4 immediate 选项</h4><p>默认情况下，组件在初次加载完毕后不会调用 watch 侦听器。如果想让 watch 侦听器立即被调用，则需要使用 immediate 选项。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line"> <span class="attr">username</span>: &#123;</span><br><span class="line">     <span class="comment">// handler 属性是固定写法：当 username 变化是，调用 handler</span></span><br><span class="line">     <span class="keyword">async</span> <span class="title function_">handler</span>(<span class="params">newVal, oldVal</span>) &#123;</span><br><span class="line">         <span class="keyword">const</span> &#123;<span class="attr">data</span>: res&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://www.escook.cn/api/finduser&#x27;</span> + newVal)</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">     &#125;,</span><br><span class="line">     <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line"> &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-1-5-deep-选项"><a href="#10-1-5-deep-选项" class="headerlink" title="10.1.5 deep 选项"></a>10.1.5 deep 选项</h4><p>当 watch 侦听的是一个对象，如果对象中的属性值发生了变化，则无法被监听到。此时需要使用 deep 选项。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">info</span>:&#123;</span><br><span class="line">            <span class="attr">username</span>: <span class="string">&#x27;zs&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">match</span>: &#123;</span><br><span class="line">    <span class="attr">info</span>: &#123;</span><br><span class="line">        <span class="keyword">async</span> <span class="title function_">handler</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">         <span class="keyword">const</span> &#123;<span class="attr">data</span>: res&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://www.escook.cn/api/finduser&#x27;</span> + newVal.<span class="property">username</span>)</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">     	&#125;,</span><br><span class="line">        <span class="attr">deep</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="10-1-6-监听对象中单个属性的变化"><a href="#10-1-6-监听对象中单个属性的变化" class="headerlink" title="10.1.6 监听对象中单个属性的变化"></a>10.1.6 监听对象中单个属性的变化</h4><p>如果只想监听对象中单个属性的变化，则可以按照如下的方式定义 watch 侦听器</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">info</span>:&#123;</span><br><span class="line">            <span class="attr">username</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">match</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;info.username&#x27;</span>: &#123; <span class="comment">// 只监听 info.username 属性值的变化</span></span><br><span class="line">        <span class="keyword">async</span> <span class="title function_">handler</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">         <span class="keyword">const</span> &#123;<span class="attr">data</span>: res&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://www.escook.cn/api/finduser&#x27;</span> + newVal.<span class="property">username</span>)</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">     	&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="10-1-7-计算属性-vs-侦听器"><a href="#10-1-7-计算属性-vs-侦听器" class="headerlink" title="10.1.7 计算属性 vs 侦听器"></a>10.1.7 计算属性 vs 侦听器</h4><p>计算属性和侦听器侧重的应用场景不同：</p>
<p>计算属性侧重于监听多个值的变化，最终计算并返回一个值</p>
<p>侦听器侧重于监听单个数据的变化，最终执行特定的业务处理，不需要有任何返回值</p>
<h3 id="10-2-组件的生命周期"><a href="#10-2-组件的生命周期" class="headerlink" title="10.2 组件的生命周期"></a>10.2 组件的生命周期</h3><h4 id="10-2-1-组件运行的过程"><a href="#10-2-1-组件运行的过程" class="headerlink" title="10.2.1 组件运行的过程"></a>10.2.1 组件运行的过程</h4><p>组件从创建 -&gt; 运行（渲染）-&gt; 销毁的整个过程，强调的是一个时间段</p>
<h4 id="10-2-2-如何监听组件的不同过程"><a href="#10-2-2-如何监听组件的不同过程" class="headerlink" title="10.2.2 如何监听组件的不同过程"></a>10.2.2 如何监听组件的不同过程</h4><p>vue 框架为组件内置了不同时刻的生命周期函数，声明周期函数会伴随着组件的运行而自动调用。</p>
<ol>
<li>当组件在内存中被创建完毕之后，会自动调用 created 函数</li>
<li>当组件被成功的渲染到页面上之后，会自动调用 mounted 函数</li>
<li>当组件被销毁完毕之后，会自动调用 unmounted 函数</li>
</ol>
<h4 id="10-2-3-如何监听组件的更新"><a href="#10-2-3-如何监听组件的更新" class="headerlink" title="10.2.3 如何监听组件的更新"></a>10.2.3 如何监听组件的更新</h4><p>当组件的 data 数据更新后，vue 会自动重新渲染组件的 DOM 结构，从而保证 View 试图展示的数据和 Model 数据源保持一致。</p>
<p>当组件被重新渲染完毕之后，会自动调用 updated 声明周期函数。</p>
<h4 id="10-2-4-组件中主要的声明周期函数"><a href="#10-2-4-组件中主要的声明周期函数" class="headerlink" title="10.2.4 组件中主要的声明周期函数"></a>10.2.4 组件中主要的声明周期函数</h4><table>
<thead>
<tr>
<th align="center">生命周期函数</th>
<th align="center">执行时机</th>
<th align="center">所属阶段</th>
<th align="center">执行次数</th>
<th align="center">应用场景</th>
</tr>
</thead>
<tbody><tr>
<td align="center">created</td>
<td align="center">组件在内存中创建完毕之后</td>
<td align="center">创建阶段</td>
<td align="center">唯一1次</td>
<td align="center">发 ajax 请求初始数据</td>
</tr>
<tr>
<td align="center">mounted</td>
<td align="center">组件初次在页面中渲染完毕之后</td>
<td align="center">创建阶段</td>
<td align="center">唯一1次</td>
<td align="center">操作 DOM 元素</td>
</tr>
<tr>
<td align="center">updated</td>
<td align="center">组件在页面中被重新渲染完毕之后</td>
<td align="center">运行阶段</td>
<td align="center">0 或 多次</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">unmounted</td>
<td align="center">组件被销毁后（页面和内存）</td>
<td align="center">销毁阶段</td>
<td align="center">唯一1次</td>
<td align="center">-</td>
</tr>
</tbody></table>
<blockquote>
<p>注意：在实际开发中，created 是最常用的生命周期函数</p>
</blockquote>
<h4 id="10-2-5-组件中全部的声明周期函数"><a href="#10-2-5-组件中全部的声明周期函数" class="headerlink" title="10.2.5 组件中全部的声明周期函数"></a>10.2.5 组件中全部的声明周期函数</h4><table>
<thead>
<tr>
<th align="center">生命周期函数</th>
<th align="center">执行时机</th>
<th align="center">所属阶段</th>
<th align="center">执行次数</th>
<th align="center">应用场景</th>
</tr>
</thead>
<tbody><tr>
<td align="center">beforeCreate</td>
<td align="center">在内尺中开始创建组件之前</td>
<td align="center">创建阶段</td>
<td align="center">唯一1次</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">created</td>
<td align="center">组件在内存中创建完毕之后</td>
<td align="center">创建阶段</td>
<td align="center">唯一1次</td>
<td align="center">发 ajax 请求初始数据</td>
</tr>
<tr>
<td align="center">beforeMount</td>
<td align="center">组件初次渲染到页面之前</td>
<td align="center">创建阶段</td>
<td align="center">唯一1次</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">mounted</td>
<td align="center">组件初次在页面中渲染完毕之后</td>
<td align="center">创建阶段</td>
<td align="center">唯一1次</td>
<td align="center">操作 DOM 元素</td>
</tr>
<tr>
<td align="center">beforeUpdat</td>
<td align="center">在组件被重新渲染之前</td>
<td align="center">运行阶段</td>
<td align="center">0 或 多次</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">updated</td>
<td align="center">组件在页面中被重新渲染完毕之后</td>
<td align="center">运行阶段</td>
<td align="center">0 或 多次</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">beforeUnmount</td>
<td align="center">在组件被销毁之前</td>
<td align="center">销毁阶段</td>
<td align="center">唯一1次</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">unmounted</td>
<td align="center">组件被销毁后（页面和内存）</td>
<td align="center">销毁阶段</td>
<td align="center">唯一1次</td>
<td align="center">-</td>
</tr>
</tbody></table>
<blockquote>
<p>疑问：为什么不在 beforeCreate 中发 ajax 请求初始数据？</p>
<p>在发起 ajax 请求后，我们需要把请求获取到的数据挂在到我们的 data（） 节点中，而在 beforeCreate 阶段，我们无法访问到 data（） 节点，所以最早只能在 created 阶段发起 ajax 请求</p>
</blockquote>
<h3 id="10-3-组件之间的数据共享"><a href="#10-3-组件之间的数据共享" class="headerlink" title="10.3 组件之间的数据共享"></a>10.3 组件之间的数据共享</h3><h4 id="10-3-1-组件之间的关系"><a href="#10-3-1-组件之间的关系" class="headerlink" title="10.3.1 组件之间的关系"></a>10.3.1 组件之间的关系</h4><ol>
<li>父子关系</li>
<li>兄弟关系</li>
<li>后代关系</li>
</ol>
<h4 id="10-3-2-父子组件之间的数据共享"><a href="#10-3-2-父子组件之间的数据共享" class="headerlink" title="10.3.2 父子组件之间的数据共享"></a>10.3.2 父子组件之间的数据共享</h4><ol>
<li>父 -&gt; 子共享数据</li>
<li>子 -&gt; 父共享数据</li>
<li>父 &lt;-&gt; 子双向数据同步</li>
</ol>
<h5 id="10-3-2-1-父组件向子组件共享数据"><a href="#10-3-2-1-父组件向子组件共享数据" class="headerlink" title="10.3.2.1 父组件向子组件共享数据"></a>10.3.2.1 父组件向子组件共享数据</h5><p>父组件通过 v-bind 属性绑定向子组件共享数据。同时，子组件需要使用 props 接收数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 父组件</span><br><span class="line">&lt;my-test-1 :msg=&quot;message&quot; :user=&quot;userinfo&quot;&gt;&lt;/my-test-1&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default&#123;</span><br><span class="line">        name: &#x27;App&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                message: &#x27;hello vue&#x27;,</span><br><span class="line">                userinfo: &#123;</span><br><span class="line">                    name: &#x27;zs&#x27;,</span><br><span class="line">                    age: 20</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 子组件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h3&gt;测试父子传值&lt;/h3&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;&#123;&#123;user&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        props: [&#x27;msg&#x27;, &#x27;user&#x27;]</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-3-2-2-子组件向父组件共享数据"><a href="#10-3-2-2-子组件向父组件共享数据" class="headerlink" title="10.3.2.2 子组件向父组件共享数据"></a>10.3.2.2 子组件向父组件共享数据</h5><p>子组件通过自定义事件的方式向父组件共享数据。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="attr">emits</span>: [<span class="string">&#x27;n1change&#x27;</span>],</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">n1</span>: <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">addN1</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">N1</span> ++</span><br><span class="line">            <span class="variable language_">this</span>.$emit(<span class="string">&#x27;n1change&#x27;</span>,<span class="variable language_">this</span>.<span class="property">N1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 父组件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;my-test-1 @n1change=&quot;getn1&quot;&gt;&lt;/my-test-1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">	data() &#123; return &#123; n1FromSon: 0 &#125; &#125;,</span><br><span class="line">	methods: &#123;</span><br><span class="line">		getn1(n1) &#123;</span><br><span class="line">			this.n1FromSon = n1</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="10-3-2-3-父子组件之间数据的双向同步"><a href="#10-3-2-3-父子组件之间数据的双向同步" class="headerlink" title="10.3.2.3 父子组件之间数据的双向同步"></a>10.3.2.3 父子组件之间数据的双向同步</h5><p>父组件在使用子组件期间，可以使用 v-model 指令维护组件内外数据的双向同步。</p>
<h4 id="10-3-3-兄弟组件之间的数据共享"><a href="#10-3-3-兄弟组件之间的数据共享" class="headerlink" title="10.3.3 兄弟组件之间的数据共享"></a>10.3.3 兄弟组件之间的数据共享</h4><p>兄弟组件之间实现数据共享的方案是 EventBus。可以借助第三方的包 mitt 来创建 eventBus 对象，从而实现兄弟组件之间的数据共享。</p>
<h5 id="10-3-3-1-安装-mitt-依赖包"><a href="#10-3-3-1-安装-mitt-依赖包" class="headerlink" title="10.3.3.1 安装 mitt 依赖包"></a>10.3.3.1 安装 mitt 依赖包</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mitt</span><br></pre></td></tr></table></figure>

<h5 id="10-3-3-2-创建公共的-EventBus-模块"><a href="#10-3-3-2-创建公共的-EventBus-模块" class="headerlink" title="10.3.3.2 创建公共的 EventBus 模块"></a>10.3.3.2 创建公共的 EventBus 模块</h5><p>在项目中创建公共的 eventBus 模块如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// evenBus.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入 mitt 包</span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"><span class="comment">// 创建 EventBus 的实例对象</span></span><br><span class="line"><span class="keyword">const</span> bus = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 EventBus 的示例对象共享出去</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> bus</span><br></pre></td></tr></table></figure>

<h5 id="10-3-3-3-在数据接收方自定义事件"><a href="#10-3-3-3-在数据接收方自定义事件" class="headerlink" title="10.3.3.3 在数据接收方自定义事件"></a>10.3.3.3 在数据接收方自定义事件</h5><p>在数据接收方，调用 bus.on(‘事件名称’，事件处理函数) 方法注册一个自定义事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 eventBus.js 模块，得到共享的 bus 对象</span></span><br><span class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;./eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> &#123; <span class="attr">count</span>: <span class="number">0</span> &#125; &#125;,</span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 调用 bus.on() 方法注册一个自定义事件，通过事件处理函数的形参接收数据</span></span><br><span class="line">        bus.<span class="title function_">on</span>(<span class="string">&#x27;countChange&#x27;</span>, <span class="function">(<span class="params">count</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">count</span> = count</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="10-3-3-4-在数据发送方触发事件"><a href="#10-3-3-4-在数据发送方触发事件" class="headerlink" title="10.3.3.4 在数据发送方触发事件"></a>10.3.3.4 在数据发送方触发事件</h5><p>在数据发送方调用，bus.emit(‘事件名称’，要发送的数据) 方法触发自定义事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入 eventBus.js 模块，得到共享的 bus 对象</span></span><br><span class="line"><span class="keyword">import</span> bus <span class="keyword">from</span> <span class="string">&#x27;./eventBus.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> &#123; <span class="attr">count</span>:<span class="number">0</span> &#125; &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">addCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">            bus.<span class="title function_">emit</span>(<span class="string">&#x27;countChange&#x27;</span>, <span class="variable language_">this</span>.<span class="property">count</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-3-4-后带关系组件之间的数据共享"><a href="#10-3-4-后带关系组件之间的数据共享" class="headerlink" title="10.3.4 后带关系组件之间的数据共享"></a>10.3.4 后带关系组件之间的数据共享</h4><p>后代关系组件之间的数据共享，指的是父节点的组件向其子孙组件共享数据。此时组件之间的嵌套关系比较复杂，可以使用 provide 和 inject 实现后代关系组件之间的数据共享。</p>
<h5 id="10-3-4-1-父节点通过-provide-共享数据"><a href="#10-3-4-1-父节点通过-provide-共享数据" class="headerlink" title="10.3.4.1 父节点通过 provide 共享数据"></a>10.3.4.1 父节点通过 provide 共享数据</h5><p>父节点的组件可以通过 provide 方法，对其子孙组件共享数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;rea&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">provide</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="variable language_">this</span>.<span class="property">color</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="10-3-4-2-子孙节点通过-inject-接收数据"><a href="#10-3-4-2-子孙节点通过-inject-接收数据" class="headerlink" title="10.3.4.2 子孙节点通过 inject 接收数据"></a>10.3.4.2 子孙节点通过 inject 接收数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h5&gt;子孙组件 -- &#123;&#123; color &#125;&#125;&lt;/h5&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        inject: [&#x27;color&#x27;]</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-3-4-3-父节点对外共享响应式的数据"><a href="#10-3-4-3-父节点对外共享响应式的数据" class="headerlink" title="10.3.4.3 父节点对外共享响应式的数据"></a>10.3.4.3 父节点对外共享响应式的数据</h5><p>父节点使用 provide 向下共享数据时，可以结合 computed 函数向下共享响应式的数据。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span> <span class="comment">// 1. 从 vue 中按需导入 computed 函数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;<span class="keyword">return</span> &#123;<span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>&#125;&#125;,</span><br><span class="line">    <span class="title function_">provide</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// 2.使用 computed 函数，可以把需要共享的数据“封装为”响应式数据</span></span><br><span class="line">            <span class="attr">color</span>: <span class="title function_">computed</span>( <span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="property">color</span> )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="10-3-4-4-子孙节点使用响应式的数据"><a href="#10-3-4-4-子孙节点使用响应式的数据" class="headerlink" title="10.3.4.4 子孙节点使用响应式的数据"></a>10.3.4.4 子孙节点使用响应式的数据</h5><p>如果如节点共享的是响应式的数据，则子孙节点必须以 .value 的形式进行使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h5&gt;子孙组件 -- &#123;&#123; color.value &#125;&#125;&lt;/h5&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        inject: [&#x27;color&#x27;]</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-3-5-vuex"><a href="#10-3-5-vuex" class="headerlink" title="10.3.5 vuex"></a>10.3.5 vuex</h4><p>vuex 是终极的组件之间的数据共享方案。在企业级的 vue 项目中，vuex 可以让组件之间的数据共享变得高效、清晰、且易于维护。</p>
<h3 id="10-4-vue-3-x-中全局配置-axios"><a href="#10-4-vue-3-x-中全局配置-axios" class="headerlink" title="10.4 vue 3.x 中全局配置 axios"></a>10.4 vue 3.x 中全局配置 axios</h3><h4 id="10-4-1-为什么要全局配置-axios"><a href="#10-4-1-为什么要全局配置-axios" class="headerlink" title="10.4.1 为什么要全局配置 axios"></a>10.4.1 为什么要全局配置 axios</h4><p>在实际开发中，几乎每个组件都会用到 axios 发起数据请求。此时会遇到如下两个问题：</p>
<ol>
<li>每个组件中都需要导入 axios （代码臃肿）</li>
<li>每次发请求都需要填写完整的请求路径（不利于后期维护）</li>
</ol>
<h4 id="10-4-2-如何全局配置-axios"><a href="#10-4-2-如何全局配置-axios" class="headerlink" title="10.4.2 如何全局配置 axios"></a>10.4.2 如何全局配置 axios</h4><p>在 main.js 入口文件中，通过 app.config.globalProperties 全局挂载 axios ，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为 axios 配置请求的根路径</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://api.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 axios 挂载为 app 的全局子当以属性之后，每个组件可以通过 this 直接访问到全局挂载的自定义属性</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$http</span> = axios</span><br></pre></td></tr></table></figure>

<blockquote>
<p>$http 可以是任意编写</p>
</blockquote>
<p><code>this.$http.get(&#39;/user&#39;)</code></p>
<h3 id="10-5-购物车案例"><a href="#10-5-购物车案例" class="headerlink" title="10.5 购物车案例"></a>10.5 购物车案例</h3><h4 id="10-5-1-实现步骤"><a href="#10-5-1-实现步骤" class="headerlink" title="10.5.1 实现步骤"></a>10.5.1 实现步骤</h4><ol>
<li>初始化项目基本结构</li>
<li>封装 EsHeader 组件</li>
<li>基于 axios 请求商品列表数据</li>
<li>封装 EsFooter 组件</li>
<li>封装 EsGoods 组件</li>
<li>封装 EsCounter 组件</li>
</ol>
<h4 id="10-5-2-初始化项目结构"><a href="#10-5-2-初始化项目结构" class="headerlink" title="10.5.2 初始化项目结构"></a>10.5.2 初始化项目结构</h4><ol>
<li>运行如下的命令，初始化 vite 项目</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm init vite-app code-cart</span><br><span class="line"><span class="built_in">cd</span> code-cart</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>清空项目结构：</li>
</ol>
<ul>
<li>把 bootstrap 相关文件放入 src/assets 目录下</li>
<li>在 main.js 中导入 bootstrap.css</li>
<li>清空 App.vue 组件</li>
<li>删除 components 目录下的 HelloWorld.vue 组件</li>
</ul>
<ol start="3">
<li>为组件的样式启用 less 语法</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i less -D</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>初始化 index.css 全局样式</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-5-3-封装-es-header-组件"><a href="#10-5-3-封装-es-header-组件" class="headerlink" title="10.5.3 封装 es-header 组件"></a>10.5.3 封装 es-header 组件</h4><h5 id="10-5-3-1-创建并注册-EsHeader-组件"><a href="#10-5-3-1-创建并注册-EsHeader-组件" class="headerlink" title="10.5.3.1 创建并注册 EsHeader 组件"></a>10.5.3.1 创建并注册 EsHeader 组件</h5><ol>
<li>在 <code>src/components/es-header/</code>目录下新建 EsHeader.vue 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    esheader</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;EsHeader&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App.vue 组件中导入并注册 EsHeader.vue 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  import EsHeader from &#x27;./components/es-header/EsHeader.vue&#x27;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;MyApp&#x27;,</span><br><span class="line">    components: &#123;</span><br><span class="line">      EsHeader</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App.vue 的 template 模板结构中使用 EsHeader 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;es-header&gt;&lt;/es-header&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-5-3-2-封装-es-header-组件"><a href="#10-5-3-2-封装-es-header-组件" class="headerlink" title="10.5.3.2 封装 es-header 组件"></a>10.5.3.2 封装 es-header 组件</h5><ol start="0">
<li>封装需求：</li>
</ol>
<ul>
<li>允许用户自定义 title 标题内容</li>
<li>允许用户自定义 color 文字颜色</li>
<li>允许用户自定义 bgcolor 背景颜色</li>
<li>允许用户自定义 fsize 字体大小</li>
<li>es-header 组件中必须固定定位到页面顶部的位置，高二为 45px ，文本居中，z-index 为 999.</li>
</ul>
<ol>
<li>在 es-header 组件中封装以下的 props 属性：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&#x27;es-header&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">bgcolor</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&#x27;#007BFF&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">color</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&#x27;#ffffff&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fsize</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="number">12</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>渲染标题内容，并动态为 DOM 元素绑定行内的 style 样式对象</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;header-container&quot; :style=&quot;&#123; backgroundColor: bgcolor, color: color, fontSize: fsize + &#x27;px&#x27; &#125;&quot;&gt; &#123;&#123;title&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App 组件中传递 title 属性值，并添加样式</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;h1&gt;App&lt;/h1&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;es-header title=&quot;购物车案例&quot;&gt;&lt;/es-header&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.app-container &#123;</span><br><span class="line">  padding-top: 45px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-5-4-基于-axios-请求商品列表数据"><a href="#10-5-4-基于-axios-请求商品列表数据" class="headerlink" title="10.5.4 基于 axios 请求商品列表数据"></a>10.5.4 基于 axios 请求商品列表数据</h4><h5 id="10-5-4-1-全局配置-axios"><a href="#10-5-4-1-全局配置-axios" class="headerlink" title="10.5.4.1 全局配置 axios"></a>10.5.4.1 全局配置 axios</h5><ol>
<li>运行如下命令安装 axios</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios -S</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 main.js 入口文件中导入并全局配置 axios</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/css/bootstrap.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://www.escook.cn&#x27;</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$http</span> = axios</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h5 id="10-5-4-2-请求商品列表数据"><a href="#10-5-4-2-请求商品列表数据" class="headerlink" title="10.5.4.2 请求商品列表数据"></a>10.5.4.2 请求商品列表数据</h5><ol>
<li>在 App 组件中声明如下的 data 数据</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// 商品列表数据</span></span><br><span class="line">        <span class="attr">goodslist</span>: []</span><br><span class="line">      &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App 组件的 created 声明周期函数中，预调用 获取商品列表数据的 methods 方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getGoodsList</span>()</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App 组件的 methods 节点中，声明刚刚预调用的 getGoodList 方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="comment">// 获取商品列表</span></span><br><span class="line">      <span class="keyword">async</span> <span class="title function_">getGoodsList</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;<span class="attr">data</span>: res&#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">&#x27;/api/cart&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">status</span> !== <span class="number">200</span>) <span class="keyword">return</span> <span class="title function_">alert</span>(<span class="string">&#x27;数据请求失败&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">goodslist</span> = res.<span class="property">list</span>;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="10-5-5-封装-es-footer-组件"><a href="#10-5-5-封装-es-footer-组件" class="headerlink" title="10.5.5 封装 es-footer 组件"></a>10.5.5 封装 es-footer 组件</h4><h5 id="10-5-5-1-创建并注册-EsFooter-组件"><a href="#10-5-5-1-创建并注册-EsFooter-组件" class="headerlink" title="10.5.5.1 创建并注册 EsFooter 组件"></a>10.5.5.1 创建并注册 EsFooter 组件</h5><ol>
<li><p>在 <code>src/components/es-footer</code>目录下新建 EsFooter.vue 组件</p>
</li>
<li><p>在 App 组件中导入并注册 EsFooter.vue 组件</p>
</li>
<li><p>在 App 的template 模板结构中使用 EsFooter 组件</p>
</li>
</ol>
<h5 id="10-5-5-2-封装-es-footer-组件"><a href="#10-5-5-2-封装-es-footer-组件" class="headerlink" title="10.5.5.2 封装 es-footer 组件"></a>10.5.5.2 封装 es-footer 组件</h5><ol start="0">
<li>封装需求</li>
</ol>
<ul>
<li>es-footer 组件必须固定定位到页面底部的位置，高度为 50px，内容两端贴边对齐，z-index 为 999</li>
<li>允许用户自定义 amout 总价格，并在渲染时保留两位小数</li>
<li>允许用户自定义 total 总数量，并渲染到结算按钮中，如果要结算的商品数量为 0 ，则禁用结算按钮</li>
<li>允许用户自定义 infull 全选按钮的选中状态</li>
<li>允许用户通过自定义事件的形式，监听全选按钮选中状态的变化，并获取到最新的选中状态</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-footer :isfull=&quot;flase&quot; :total=&quot;1&quot; :amount=&quot;98&quot; @fullChange=&quot;onFullStateChange&quot;&gt;&lt;/my-footer&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>将 EsFooter.vue 组件在页面底部进行固定定位</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.footer-container &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 50px;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  border-top: 1px solid #efefef;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">  padding: 0 10px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>根据 bootstrap 提供的 Checkboxs 渲染左侧的全选按钮</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;footer-container&quot;&gt;</span><br><span class="line">    &lt;!-- 全选区域 --&gt;</span><br><span class="line">    &lt;div class=&quot;form-check&quot;&gt;</span><br><span class="line">      &lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; value=&quot;&quot; id=&quot;fullCheck&quot;&gt;</span><br><span class="line">      &lt;label class=&quot;form-check-label&quot; for=&quot;fullCheck&quot;&gt;</span><br><span class="line">        全选</span><br><span class="line">      &lt;/label&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 合计区域 --&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;合计：&lt;/span&gt;</span><br><span class="line">      &lt;span class=&quot;amount&quot;&gt;￥0.00&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 结算按钮 --&gt;</span><br><span class="line">    &lt;button type=&quot;button&quot; class=&quot;btn btn-primary btn-settle&quot;&gt;结算(0)&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;EsFooter&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.footer-container &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 50px;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  border-top: 1px solid #efefef;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">  padding: 0 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.amount &#123;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">  color: red</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.btn-settle &#123;</span><br><span class="line">  min-width: 90px;</span><br><span class="line">  height: 38px;</span><br><span class="line">  border-radius: 19px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-5-5-3-封装自定义属性-amount"><a href="#10-5-5-3-封装自定义属性-amount" class="headerlink" title="10.5.5.3 封装自定义属性 amount"></a>10.5.5.3 封装自定义属性 amount</h5><blockquote>
<p>amount 是已勾选商品的总价</p>
</blockquote>
<ol>
<li>在 EsFooter 组件的 props 节点中声明如下自定义属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">amount</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 EsFooter 组件的 DOM 结构中渲染 amount 的值</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;amount&quot;&gt;￥&#123;&#123;amount.toFixed(2)&#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>toFixed(2) 保留两位小数</p>
</blockquote>
<h5 id="10-5-5-4-封装自定义属性-total"><a href="#10-5-5-4-封装自定义属性-total" class="headerlink" title="10.5.5.4 封装自定义属性 total"></a>10.5.5.4 封装自定义属性 total</h5><blockquote>
<p>total 是已勾选商品的总数量</p>
</blockquote>
<ol>
<li>在 EsFooter 组件的 props 节点中声明如下的自定义属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">total</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>在 EsFooter 组件的 DOM 结构中渲染 total 的值</p>
</li>
<li><p>动态控制结算按钮的禁用状态</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button type=&quot;button&quot; class=&quot;btn btn-primary btn-settle&quot; :disabled=&quot;total === 0&quot;&gt;结算(&#123;&#123;total&#125;&#125;)&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-5-5-5-封装自定义属性-isfull"><a href="#10-5-5-5-封装自定义属性-isfull" class="headerlink" title="10.5.5.5 封装自定义属性 isfull"></a>10.5.5.5 封装自定义属性 isfull</h5><blockquote>
<p>isfull 是全选按钮的选中状态，true 表示选中，false 表示未选中</p>
</blockquote>
<ol>
<li>在 EsFooter 组件的 props 节点中声明如下的自定义属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">isfull</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>为复选框动态绑定 checked 属性的值</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; value=&quot;&quot; id=&quot;fullCheck&quot; :checked=&quot;isfull&quot;&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-5-5-6-封装自定义事件-fullChange"><a href="#10-5-5-6-封装自定义事件-fullChange" class="headerlink" title="10.5.5.6 封装自定义事件 fullChange"></a>10.5.5.6 封装自定义事件 fullChange</h5><blockquote>
<p>通过自定义事件 fullChange，把最新的选中状态传递给组件的使用者</p>
</blockquote>
<ol>
<li>监听复选框选中状态变化的 change 事件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; value=&quot;&quot; id=&quot;fullCheck&quot; :checked=&quot;isfull&quot; @change=&quot;onCheckBoxChange&quot;&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 methods 中声明 onCheckBoxChange，并通过事件对象 e 获取到最新的选中状态</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="comment">// 监听 checkbox 选中状态变化的事件</span></span><br><span class="line">      <span class="title function_">onCheckBoxChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="comment">// console.log(e.target.checked)</span></span><br><span class="line">        <span class="variable language_">this</span>.$emit(<span class="string">&#x27;fullChange&#x27;</span>, e.<span class="property">target</span>.<span class="property">checked</span>)</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 emits 中声明自定义事件</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">emits</span>: [<span class="string">&#x27;fullChange&#x27;</span>],</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>在 onCheckBoxChange 事件处理函数中，通过 $emit() 触发自定义事件，把最新的选中状态传递给当前组件的使用者</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="comment">// 监听 checkbox 选中状态变化的事件</span></span><br><span class="line">      <span class="title function_">onCheckBoxChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="comment">// console.log(e.target.checked)</span></span><br><span class="line">        <span class="variable language_">this</span>.$emit(<span class="string">&#x27;fullChange&#x27;</span>, e.<span class="property">target</span>.<span class="property">checked</span>)</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>在 App 组件中测试 EsFooter 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;es-footer @fullChange=&quot;onFullStateChange&quot;&gt;&lt;/es-footer&gt;</span><br></pre></td></tr></table></figure>

<p>​    并在 methods 中声明 onFullStateChange 处理函数，通过形参获取到全选按钮最新的选中状态</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听选中状态变化的事件</span></span><br><span class="line">      <span class="title function_">onFullStateChange</span>(<span class="params">isFull</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(isFull);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-5-6-封装-es-goods-组件"><a href="#10-5-6-封装-es-goods-组件" class="headerlink" title="10.5.6 封装 es-goods 组件"></a>10.5.6 封装 es-goods 组件</h4><h5 id="10-5-6-1-创建并注册-EsGood-组件"><a href="#10-5-6-1-创建并注册-EsGood-组件" class="headerlink" title="10.5.6.1 创建并注册 EsGood 组件"></a>10.5.6.1 创建并注册 EsGood 组件</h5><p>…</p>
<h5 id="10-5-6-2-封装-es-goods-组件"><a href="#10-5-6-2-封装-es-goods-组件" class="headerlink" title="10.5.6.2 封装 es-goods 组件"></a>10.5.6.2 封装 es-goods 组件</h5><ol start="0">
<li>封装需求</li>
</ol>
<ul>
<li>实现 EsGoods 组件的基础布局</li>
<li>封装组件的 6 个自定义属性（id、thumb、title、price、count、checked）</li>
<li>封装组件的自定义事件 stateChange，允许外界监听组件选中状态的变化</li>
</ul>
<ol>
<li>渲染 EsGoods 组件的基础结构</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;goods-container&quot;&gt;</span><br><span class="line">    &lt;!-- 左侧图片区域 --&gt;</span><br><span class="line">    &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;&quot; alt=&quot;商品图片&quot; class=&quot;thumb&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 右侧信息区域 --&gt;</span><br><span class="line">    &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">      &lt;!-- 商品名称 --&gt;</span><br><span class="line">      &lt;div class=&quot;top&quot;&gt;xxxx&lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;bottom&quot;&gt;</span><br><span class="line">        &lt;!-- 商品价格 --&gt;</span><br><span class="line">        &lt;div class=&quot;price&quot;&gt;￥0.00&lt;/div&gt;</span><br><span class="line">        &lt;!-- 商品数量 --&gt;</span><br><span class="line">        &lt;div class=&quot;count&quot;&gt;数量&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>美化组件样式</li>
</ol>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.goods-container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 左侧图片</span></span><br><span class="line">  <span class="selector-class">.left</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 商品图片</span></span><br><span class="line">    <span class="selector-class">.thumb</span> &#123;</span><br><span class="line">      <span class="attribute">display</span>: block;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#efefef</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 右侧商品信息</span></span><br><span class="line">  <span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.top</span> &#123;</span><br><span class="line">      <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.bottom</span> &#123;</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">      <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">      <span class="attribute">align-items</span>: center;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.price</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: red;</span><br><span class="line">        <span class="attribute">font-weight</span>: bold;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在商品缩略图之外包裹复选框效果</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;left&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;form-check&quot;&gt;</span><br><span class="line">        &lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; value=&quot;&quot; id=&quot;flexCheckDefault&quot;&gt;</span><br><span class="line">        &lt;label class=&quot;form-check-label&quot; for=&quot;flexCheckDefault&quot;&gt;</span><br><span class="line">          &lt;img src=&quot;&quot; alt=&quot;商品图片&quot; class=&quot;thumb&quot;&gt;</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>实现商品与复选框居中</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.form-check-input</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">3.4rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>在 App 组件中循环渲染 EsGoods 组件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;es-goods v-for=&quot;item in goodslist&quot; :key=&quot;item.id&quot;&gt;&lt;/es-goods&gt;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>为 EsGoods 添加顶边框</li>
</ol>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.goods-container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="comment">// 最终生成的选择器为 .goods-container + .goods-container</span></span><br><span class="line">    <span class="comment">// 在 css 中， + 是 ‘相邻兄弟选择器’，表示：选择紧连着另一个元素后的元素，二者具有相同的父元素</span></span><br><span class="line">    + <span class="selector-class">.goods-container</span> &#123;</span><br><span class="line">        <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#efefef</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ....省略其他样式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="10-5-6-3-封装自定义属性-id"><a href="#10-5-6-3-封装自定义属性-id" class="headerlink" title="10.5.6.3 封装自定义属性 id"></a>10.5.6.3 封装自定义属性 id</h5><blockquote>
<p>id 是每个商品的唯一标识符</p>
</blockquote>
<ol>
<li>在 EsGoods 组件的 props 节点中声明如下的自定义属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">id</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: [<span class="title class_">Number</span>, <span class="title class_">String</span>],</span><br><span class="line">        <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在渲染复选框时动态绑定 input 的 id 属性和 label 的 for 属性值</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; value=&quot;&quot; :id=&quot;id&quot;&gt;</span><br><span class="line">&lt;label class=&quot;form-check-label&quot; :for=&quot;id&quot;&gt;</span><br><span class="line">    &lt;img src=&quot;&quot; alt=&quot;商品图片&quot; class=&quot;thumb&quot;&gt;</span><br><span class="line">&lt;/label&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App 中使用 EsGoods 组件时，动态绑定 id 属性的值</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;es-goods v-for=&quot;item in goodslist&quot; :key=&quot;item.id&quot; :id=&quot;item.id&quot;&gt;&lt;/es-goods&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-5-6-4-封装其它属性"><a href="#10-5-6-4-封装其它属性" class="headerlink" title="10.5.6.4 封装其它属性"></a>10.5.6.4 封装其它属性</h5><blockquote>
<p>除了 id 属性之外，EsGoods 组件还要封装：</p>
<p>缩略图 thumb，商品名称 title，单价 price，数量 count，勾选状态 checked 这五个属性</p>
</blockquote>
<ol>
<li>在 EsGoods 组件的 props节点中，声明如下的自定义属性：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">thumb</span>: &#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">       <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line">   <span class="attr">title</span>: &#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">       <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">price</span>: &#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">       <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">count</span>: &#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">       <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">checked</span>: &#123;</span><br><span class="line">       <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">       <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 EsGoods 组件的 DOM 结构中渲染商品的信息数据</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;goods-container&quot;&gt;</span><br><span class="line">    &lt;!-- 左侧图片区域 --&gt;</span><br><span class="line">    &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;form-check&quot;&gt;</span><br><span class="line">        &lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; value=&quot;&quot; :id=&quot;id&quot; :checked=&quot;checked&quot;&gt;</span><br><span class="line">        &lt;label class=&quot;form-check-label&quot; :for=&quot;id&quot;&gt;</span><br><span class="line">          &lt;img :src=&quot;thumb&quot; alt=&quot;商品图片&quot; class=&quot;thumb&quot;&gt;</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 右侧信息区域 --&gt;</span><br><span class="line">    &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">      &lt;!-- 商品名称 --&gt;</span><br><span class="line">      &lt;div class=&quot;top&quot;&gt;&#123;&#123;title&#125;&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div class=&quot;bottom&quot;&gt;</span><br><span class="line">        &lt;!-- 商品价格 --&gt;</span><br><span class="line">        &lt;div class=&quot;price&quot;&gt;￥&#123;&#123;price.toFixed(2)&#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;!-- 商品数量 --&gt;</span><br><span class="line">        &lt;div class=&quot;count&quot;&gt;数量:&#123;&#123;count&#125;&#125;&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App 组件中使用 EsGoods 组件时，动态绑定对应的属性值</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;es-goods v-for=&quot;item in goodslist&quot; :key=&quot;item.id&quot; :id=&quot;item.id&quot; :thumb=&quot;item.goods_img&quot;:title=&quot;item.goods_name&quot;:price=&quot;item.goods_price&quot; :count=&quot;item.goods_count&quot; :checked=&quot;item.goods_state&quot;&gt;&lt;/es-goods&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-5-6-5-封装自定义事件-stateChange"><a href="#10-5-6-5-封装自定义事件-stateChange" class="headerlink" title="10.5.6.5 封装自定义事件 stateChange"></a>10.5.6.5 封装自定义事件 stateChange</h5><blockquote>
<p>点击复选框时，可以把最新的勾选状态，通过自定义事件的方式传递给组件的使用者</p>
</blockquote>
<ol>
<li>在 EsGoods 组件中，监听 checkbox 选中状态的事件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input class=&quot;form-check-input&quot; type=&quot;checkbox&quot; value=&quot;&quot; :id=&quot;id&quot; :checked=&quot;checked&quot; @change=&quot;onCheckBoxChange&quot;&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 EsGoods 组件的 methods 中声明对应的事件处理函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">onCheckBoxChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="comment">// console.log(e.target.checked);</span></span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 EsGoods 组件中声明自定义事件</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">emits</span>: [<span class="string">&#x27;stateChange&#x27;</span>],</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>完善 onCheckBoxChange 函数的处理逻辑，调用 $emit() 函数触发自定义事件</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">onCheckBoxChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="comment">// console.log(e.target.checked);</span></span><br><span class="line">        <span class="variable language_">this</span>.$emit(<span class="string">&#x27;stateChange&#x27;</span>, &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="variable language_">this</span>.<span class="property">id</span>,</span><br><span class="line">          <span class="attr">value</span>: e.<span class="property">target</span>.<span class="property">checked</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>在 App 组件中使用 EsGoods 组件时，监听它的 stateChange 事件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;es-goods v-for=&quot;item in goodslist&quot; :key=&quot;item.id&quot; :id=&quot;item.id&quot; :thumb=&quot;item.goods_img&quot; :title=&quot;item.goods_name&quot;</span><br><span class="line">      :price=&quot;item.goods_price&quot; :count=&quot;item.goods_count&quot; :checked=&quot;item.goods_state&quot; @stateChange=&quot;onGoodsStateChange&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>​    并在 App 的 methods 中声明如下的处理函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onGoodsStateChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> findResult = <span class="variable language_">this</span>.<span class="property">goodslist</span>.<span class="title function_">find</span>(<span class="function"><span class="params">x</span> =&gt;</span> x.<span class="property">id</span> === e.<span class="property">id</span>)</span><br><span class="line">        <span class="keyword">if</span>(findResult) &#123;</span><br><span class="line">          findResult.<span class="property">goods_state</span> = e.<span class="property">value</span></span><br><span class="line">          <span class="comment">// console.log(findResult.goods_state);</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-5-7-实现合计、结算数量、全选功能"><a href="#10-5-7-实现合计、结算数量、全选功能" class="headerlink" title="10.5.7 实现合计、结算数量、全选功能"></a>10.5.7 实现合计、结算数量、全选功能</h4><h5 id="10-5-7-1-动态统计已勾选商品的总"><a href="#10-5-7-1-动态统计已勾选商品的总" class="headerlink" title="10.5.7.1 动态统计已勾选商品的总"></a>10.5.7.1 动态统计已勾选商品的总</h5><blockquote>
<p>需求分析：</p>
<p>合计的商品总价格，依赖于 goodslist 数组中每一件商品信息的变化，此场景下适合使用计算属性</p>
</blockquote>
<ol>
<li>在 App 中声明如下的计算属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">      <span class="comment">// 已勾选商品的总价格</span></span><br><span class="line">      <span class="title function_">amount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> a = <span class="number">0</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">goodslist</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> x.<span class="property">goods_state</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">x</span> =&gt;</span> &#123;</span><br><span class="line">          a += x.<span class="property">goods_count</span> * x.<span class="property">goods_price</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 已勾选商品的总数量</span></span><br><span class="line">      <span class="title function_">total</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> t = <span class="number">0</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">goodslist</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> x.<span class="property">goods_state</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">x</span> =&gt;</span> &#123;</span><br><span class="line">          t += x.<span class="property">goods_count</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> t</span><br><span class="line">      &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App 中使用 EsGoods 组件时，动态绑定已勾选商品的总价格</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;es-footer :amount=&quot;amount&quot; :total=&quot;total&quot; @fullChange=&quot;onFullStateChange&quot;&gt;&lt;/es-footer&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-5-8-封装-es-counter-组件"><a href="#10-5-8-封装-es-counter-组件" class="headerlink" title="10.5.8 封装 es-counter 组件"></a>10.5.8 封装 es-counter 组件</h4><h5 id="10-5-8-1-创建并注册-EsCounter-组件"><a href="#10-5-8-1-创建并注册-EsCounter-组件" class="headerlink" title="10.5.8.1 创建并注册 EsCounter 组件"></a>10.5.8.1 创建并注册 EsCounter 组件</h5><p>…</p>
<h5 id="10-5-8-2-封装-es-counter-组件"><a href="#10-5-8-2-封装-es-counter-组件" class="headerlink" title="10.5.8.2 封装 es-counter 组件"></a>10.5.8.2 封装 es-counter 组件</h5><ol start="0">
<li>封装需求</li>
</ol>
<ul>
<li>渲染组件的基础布局</li>
<li>实现数量值的加减操作</li>
<li>处理 min 最小值</li>
<li>使用 watch 侦听器处理文本框输入的结果</li>
<li>封装 numChange 自定义事件</li>
</ul>
<h3 id="10-6-ref-引用"><a href="#10-6-ref-引用" class="headerlink" title="10.6 ref 引用"></a>10.6 ref 引用</h3><h4 id="10-6-1-什么是-ref-引用"><a href="#10-6-1-什么是-ref-引用" class="headerlink" title="10.6.1 什么是 ref 引用"></a>10.6.1 什么是 ref 引用</h4><p>ref 用来辅助开发者在不依赖于 jQuery 的情况下，获取 DOM 元素或组件的引用。</p>
<p>每个 vue 的组件实例上，都包含了一个 $refs 对象，里面存储着对应的 DOM 元素或组件的引用，默认形况下，$refs 指向一个空对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;h3&gt;MyRef&lt;/h3&gt;</span><br><span class="line">	&lt;button @click=&quot;getRef&quot;&gt;获取 $refs 引用&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            getRef() &#123;</span><br><span class="line">                console.log(this) // this 代表当前组件的实例对象，this.$refs 默认指向空对象</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-6-2-如何使用-ref-引用-DOM-元素"><a href="#10-6-2-如何使用-ref-引用-DOM-元素" class="headerlink" title="10.6.2 如何使用 ref 引用 DOM 元素"></a>10.6.2 如何使用 ref 引用 DOM 元素</h4><p>如果想要使用 ref 引用页面上的 DOM 元素，则可以按照如下的方式进行操作：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用 ref 属性，为对应的 <span class="variable constant_">DOM</span> 添加引用名称 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">ref</span>=<span class="string">&quot;myh3&quot;</span>&gt;</span>MyRef<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getRef&quot;</span>&gt;</span>获取 $refs 引用<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">method</span>: &#123;</span><br><span class="line">    <span class="title function_">getRef</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">myh3</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">myh3</span>.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-6-3-使用-ref-引用组件实例"><a href="#10-6-3-使用-ref-引用组件实例" class="headerlink" title="10.6.3 使用 ref 引用组件实例"></a>10.6.3 使用 ref 引用组件实例</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用 ref 属性，为对应的组件添加引用名称 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">my-counter</span> <span class="attr">ref</span>=<span class="string">&quot;conterRef&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-counter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getRef&quot;</span>&gt;</span>获取 $refs 引用<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">method</span>: &#123;</span><br><span class="line">    <span class="title function_">getRef</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">conterRef</span>)</span><br><span class="line">        <span class="comment">// 引用到组件的实例之后，就可以调用组件上的 methods 方法</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">counterRef</span>.<span class="title function_">add</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-6-4-控制文本框和按钮的按需切换"><a href="#10-6-4-控制文本框和按钮的按需切换" class="headerlink" title="10.6.4 控制文本框和按钮的按需切换"></a>10.6.4 控制文本框和按钮的按需切换</h4><p>通过布尔值 inputVisible 来控制组件中的文本框与按钮的按需切换</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;input type=&quot;text&quot; v-if=&quot;inputVisible&quot;&gt;</span><br><span class="line">	&lt;button v-else @click=&quot;showInput&quot;&gt;展示 input 输入框&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">inputVisible</span>: flase,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">		<span class="title function_">showInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">inputVisible</span> = <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-6-5-让文本框自动获得焦点"><a href="#10-6-5-让文本框自动获得焦点" class="headerlink" title="10.6.5 让文本框自动获得焦点"></a>10.6.5 让文本框自动获得焦点</h4><p>当文本框展示出来之后，如果希望它立即获得焦点，则可以添加 ref 引用，并调用原生的 DOM 对象的 .focus() 方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;input type=&quot;text&quot; v-if=&quot;inputVisible&quot; ref=&quot;ipt&quot;&gt;</span><br><span class="line">	&lt;button v-else @click=&quot;showInput&quot;&gt;展示 input 输入框&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            showInput() &#123;</span><br><span class="line">                this.inputVisible = true,</span><br><span class="line">                this.$refs.ipt.focus()  </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>报错</p>
</blockquote>
<h4 id="10-6-6-this-nextTick-cb-方法"><a href="#10-6-6-this-nextTick-cb-方法" class="headerlink" title="10.6.6 this.$nextTick(cb) 方法"></a>10.6.6 this.$nextTick(cb) 方法</h4><p>组件的 $nextTick(cb) 方法，会把 cb 回调推迟到下一个 DOM 更新周期之后执行。通俗的理解是：等组件的 DOM 异步地重新渲染完成之后，在执行 cb 回调函数，从而保证 cb 回调函数可以操作到最新的 DOM 元素。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;input type=&quot;text&quot; v-if=&quot;inputVisible&quot; ref=&quot;ipt&quot;&gt;</span><br><span class="line">	&lt;button v-else @click=&quot;showInput&quot;&gt;展示 input 输入框&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            showInput() &#123;</span><br><span class="line">                this.inputVisible = true,</span><br><span class="line">                this.$nextTick(() =&gt; &#123;</span><br><span class="line">                    this.$refs.ipt.focus()</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="10-7-动态组件"><a href="#10-7-动态组件" class="headerlink" title="10.7 动态组件"></a>10.7 动态组件</h3><h4 id="10-7-1-什么是动态组件"><a href="#10-7-1-什么是动态组件" class="headerlink" title="10.7.1 什么是动态组件"></a>10.7.1 什么是动态组件</h4><p>动态组件指的是动态切换组件的显示和隐藏，vue 提供了一个内置的 <code>&lt;component&gt;</code>组件，专门用来实现组件的动态渲染。</p>
<ul>
<li><code>&lt;component&gt;</code> 是组件的占位符</li>
<li>通过 is 属性动态指定要渲染的组件名称</li>
<li><code>&lt;component is=&quot;要渲染的组件的名称&quot;&gt; &lt;component&gt;</code></li>
</ul>
<h4 id="10-7-2-如何实现动态组件渲染"><a href="#10-7-2-如何实现动态组件渲染" class="headerlink" title="10.7.2 如何实现动态组件渲染"></a>10.7.2 如何实现动态组件渲染</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">comName</span>: <span class="string">&#x27;my-ydnamic-1&#x27;</span> <span class="comment">// 1.当前要渲染的组件的名称</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- <span class="number">3.</span>点击按钮，动态切换组件的名称 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;comName=&#x27;my-dynamic-1&#x27;&quot;</span>&gt;</span>组件1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;comName=&#x27;my-dynamic-2&#x27;&quot;</span>&gt;</span>组件2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    &lt;!-- <span class="number">2.</span>通过 is 属性，动态指定要渲染的组件的名称 --&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;comName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;    </span><br></pre></td></tr></table></figure>

<h4 id="10-7-3-使用-keep-alive-保持状态"><a href="#10-7-3-使用-keep-alive-保持状态" class="headerlink" title="10.7.3 使用 keep-alive 保持状态"></a>10.7.3 使用 keep-alive 保持状态</h4><p>默认情况下，切换动态组件时无法保持组件的状态。此时可以使用 vue 内置的 <code>&lt;keep-alive&gt;</code> 组件保持动态组件的状态。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive&gt;</span><br><span class="line">	&lt;component :is=&quot;comName&quot;&gt;&lt;/component&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>

<h3 id="10-8-插槽"><a href="#10-8-插槽" class="headerlink" title="10.8 插槽"></a>10.8 插槽</h3><h4 id="10-8-1什么是插槽"><a href="#10-8-1什么是插槽" class="headerlink" title="10.8.1什么是插槽"></a>10.8.1什么是插槽</h4><p>插槽是 vue 为组件的封装者提供的能力。允许开发者在封装组件时，把不确定的、希望由用户指定的部分指定为插槽。</p>
<p><img src="https://s2.loli.net/2022/09/16/5iI823OPzdYeAyC.png" alt="image-20220916102759850.png"></p>
<p>可以把插槽认为时组件封装期间，为用户预留的内容的占位符。</p>
<h4 id="10-8-2-体验插槽的基本用法"><a href="#10-8-2-体验插槽的基本用法" class="headerlink" title="10.8.2 体验插槽的基本用法"></a>10.8.2 体验插槽的基本用法</h4><p>在封装组件时，可以通过 <code>&lt;slot&gt;</code>元素定义插槽，从而为用户预留内容占位符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p&gt;这是 MyCom 组件的第一个 p 标签&lt;/p&gt;</span><br><span class="line">	&lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">	&lt;p&gt;这是 MyCom 组件的最后一个 p 标签&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-com-1&gt;</span><br><span class="line">	&lt;p&gt;用户自定义的内容&lt;/p&gt;</span><br><span class="line">&lt;/my-com-1&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-8-2-1-没有预留插槽的内容会被丢弃"><a href="#10-8-2-1-没有预留插槽的内容会被丢弃" class="headerlink" title="10.8.2.1 没有预留插槽的内容会被丢弃"></a>10.8.2.1 没有预留插槽的内容会被丢弃</h5><p>如果在封装组件时没有预留任何 <code>&lt;slot&gt;</code>插槽，则用户提供的任何自定义内容都会被丢弃</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p&gt;这是 MyCom 组件的第一个 p 标签&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;这是 MyCom 组件的最后一个 p 标签&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-com-1&gt;</span><br><span class="line">	&lt;p&gt;用户自定义的内容&lt;/p&gt;</span><br><span class="line">&lt;/my-com-1&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-8-2-2-后备内容"><a href="#10-8-2-2-后备内容" class="headerlink" title="10.8.2.2 后备内容"></a>10.8.2.2 后备内容</h5><p>封装组件时，可以为预留的 <code>&lt;slot&gt;</code>插槽提供后备内容（默认内容）。如果组件的使用者没有为插槽提供任何内容，则后备内容会生效。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p&gt;这是 MyCom 组件的第一个 p 标签&lt;/p&gt;</span><br><span class="line">	&lt;slot&gt;这是后备内容&lt;/slot&gt;</span><br><span class="line">	&lt;p&gt;这是 MyCom 组件的最后一个 p 标签&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-8-3-具名插槽"><a href="#10-8-3-具名插槽" class="headerlink" title="10.8.3 具名插槽"></a>10.8.3 具名插槽</h4><p>如果在封装组件时需要预留多个插槽节点，则需要为每个 <code>&lt;slot&gt;</code> 插槽指定具体的 name 纳名称。这种带有具体名称的插槽叫做“具名插槽”。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">    	&lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">    &lt;main&gt;</span><br><span class="line">    	&lt;slot name=&quot;main&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/main&gt;</span><br><span class="line">    &lt;footer&gt;</span><br><span class="line">    	&lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/footer&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果没有指定 name 名称的插槽，会有隐含的名称叫做“default”</p>
</blockquote>
<h5 id="10-8-3-1-为具名插槽提供内容"><a href="#10-8-3-1-为具名插槽提供内容" class="headerlink" title="10.8.3.1 为具名插槽提供内容"></a>10.8.3.1 为具名插槽提供内容</h5><p>在向具名提供内容的时候，我们可以在一个 <code>&lt;template&gt;</code>元素上使用 v-slot 指令，并以 v-slot 的参数的形式提供其名称。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-com-1&gt;</span><br><span class="line">	&lt;template v-slot:header&gt;</span><br><span class="line">    	&lt;h1&gt;xxx&lt;/h1&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template v-slot:main&gt;</span><br><span class="line">    	&lt;p&gt;...&lt;/p&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template v-slot:footer&gt;</span><br><span class="line">		&lt;p&gt;xxx&lt;/p&gt;    </span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/my-com-1&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-8-3-2-具名插槽的简写形式"><a href="#10-8-3-2-具名插槽的简写形式" class="headerlink" title="10.8.3.2 具名插槽的简写形式"></a>10.8.3.2 具名插槽的简写形式</h5><p>跟 v-on 和 v-bind 一样，v-slot 也有缩写，即把参数之前的 v-slot：替换为 # 。</p>
<h4 id="10-8-4-作用域插槽"><a href="#10-8-4-作用域插槽" class="headerlink" title="10.8.4 作用域插槽"></a>10.8.4 作用域插槽</h4><p>在封装组件的过程中，可以为预留的 <code>&lt;slot&gt;</code> 插槽绑定 props 数据，这种带有 props 数据的 插槽叫做 “作用域” 插槽。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">	&lt;h3&gt;这是 Test 组件&lt;/h3&gt;</span><br><span class="line">    &lt;slot :info=&quot;infomation&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 使用自定义组件 --&gt;</span><br><span class="line">&lt;my-test&gt;</span><br><span class="line">	&lt;template v-slot:default=&quot;scope&quot;&gt;</span><br><span class="line">    	&#123;&#123;scope&#125;&#125;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/my-test&gt;</span><br></pre></td></tr></table></figure>

<h3 id="10-9-自定义指令"><a href="#10-9-自定义指令" class="headerlink" title="10.9 自定义指令"></a>10.9 自定义指令</h3><h4 id="10-9-1-什么是之定义指令"><a href="#10-9-1-什么是之定义指令" class="headerlink" title="10.9.1 什么是之定义指令"></a>10.9.1 什么是之定义指令</h4><p>vue 官方提供了 v-for、v-model、v-if 等常用的内置指令。除此之外 vue 还允许开发者自定义指令。</p>
<p>vue 中的自定义指令分为两类，分别是：</p>
<ul>
<li>私有自定义指令</li>
<li>全局自定义指令</li>
</ul>
<h4 id="10-9-2-声明私有自定义指令的语法"><a href="#10-9-2-声明私有自定义指令的语法" class="headerlink" title="10.9.2 声明私有自定义指令的语法"></a>10.9.2 声明私有自定义指令的语法</h4><p>在每个 vue 组件中，可以在 directives 节点下声明私有自定义指令。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">    <span class="comment">// 自定义一个私有指令</span></span><br><span class="line">    <span class="attr">focus</span>: &#123;</span><br><span class="line">        <span class="comment">// 当前绑定的元素插入到 DOM 中时，自动触发 mounted 函数</span></span><br><span class="line">        <span class="title function_">mounted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">            el.<span class="property">focus</span> <span class="comment">// 让被绑定的元素自动获得焦点</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-9-3-声明全局自定义指令的语法"><a href="#10-9-3-声明全局自定义指令的语法" class="headerlink" title="10.9.3 声明全局自定义指令的语法"></a>10.9.3 声明全局自定义指令的语法</h4><p>全局共享的自定义指令需要通过“单页面应用程序的实例对象”进行声明。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册一个全局自定义指令 ‘v-focus’</span></span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">// 当前绑定的元素插入到 DOM 中时，自动触发 mounted 函数</span></span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">        el.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="10-9-4-updated-函数"><a href="#10-9-4-updated-函数" class="headerlink" title="10.9.4 updated 函数"></a>10.9.4 updated 函数</h4><p>mounted 函数只在元素第一次插入 DOM 时被调用，当 DOM 更新时 mounted 函数不会被触发。updated 函数会在每次更新完成后被调用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params">el</span>) &#123;</span><br><span class="line">        el.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">updated</span>(<span class="params">el</span>) &#123;</span><br><span class="line">        el.<span class="title function_">focus</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意： 在 vue2  的项目中，使用自定义指令时，【 mounted -&gt; bind 】、【 updated -&gt; update 】</p>
</blockquote>
<h4 id="10-9-5-函数简写"><a href="#10-9-5-函数简写" class="headerlink" title="10.9.5 函数简写"></a>10.9.5 函数简写</h4><p>如果 mounted 和 updated 函数中的逻辑完全相同，则可以简写成：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, <span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">    el.<span class="title function_">focus</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="10-9-6-指令的参数值"><a href="#10-9-6-指令的参数值" class="headerlink" title="10.9.6 指令的参数值"></a>10.9.6 指令的参数值</h4><p>在绑定指令时，可以通过“等号”的形式为指令绑定具体的参数值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; v-model.number=&quot;count&quot; v-focus v-color=&quot;red&quot;&gt;</span><br><span class="line">&lt;p v-color=&quot;cyan&quot;&gt;&#123;&#123;count&#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;button @click=&quot;count++&quot; &gt;+1&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">// 自定义v-color 指令</span><br><span class="line">app.dirctive(&#x27;color, binding&#x27;, &#123;</span><br><span class="line">	// binding.value 就是通过“等号”为指定绑定的值</span><br><span class="line">	el.style.color = binding.value</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="10-10-Table-案例"><a href="#10-10-Table-案例" class="headerlink" title="10.10 Table 案例"></a>10.10 Table 案例</h3><p>用到的知识点：</p>
<ul>
<li>组件封装</li>
<li>具名插槽</li>
<li>作用域插槽</li>
<li>自定义指令</li>
</ul>
<p>实现步骤：</p>
<ol>
<li>搭建项目的基本结构</li>
<li>请求商品列表的数据</li>
<li>封装 MyTable 组件</li>
<li>实现删除功能</li>
<li>实现添加标签的功能</li>
</ol>
<h4 id="10-10-1-搭建项目基本结构"><a href="#10-10-1-搭建项目基本结构" class="headerlink" title="10.10.1 搭建项目基本结构"></a>10.10.1 搭建项目基本结构</h4><h5 id="10-10-1-1-初始化项目"><a href="#10-10-1-1-初始化项目" class="headerlink" title="10.10.1.1 初始化项目"></a>10.10.1.1 初始化项目</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm init vite-app table-demo</span><br><span class="line">npm install</span><br><span class="line">npm i less -D</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h4 id="10-10-2-请求商品列表数据"><a href="#10-10-2-请求商品列表数据" class="headerlink" title="10.10.2 请求商品列表数据"></a>10.10.2 请求商品列表数据</h4><ol>
<li>安装 Ajax</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios -S</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 main.js 中导如并配置全局 axios</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/css/bootstrap.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://www.escook.cn&#x27;</span></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$http</span> = axios</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App 的 data 中声明 goodslist 商品列表数据：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">goodslist</span>: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>methods 声明 getGoodsList 方法。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="keyword">async</span> <span class="title function_">getGoodsList</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;<span class="attr">data</span>:res&#125; = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">&#x27;/api/goods&#x27;</span>)</span><br><span class="line">        <span class="comment">// console.log(res)</span></span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">status</span> !== <span class="number">0</span> ) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;获取列表失败！&#x27;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">goodslist</span> = res.<span class="property">data</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>声明 created 函数并调用 getGoodsList 方法</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">getGoodsList</span>()</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>



<h4 id="10-10-3-封装-MyTable-组件"><a href="#10-10-3-封装-MyTable-组件" class="headerlink" title="10.10.3 封装 MyTable 组件"></a>10.10.3 封装 MyTable 组件</h4><h5 id="10-10-3-0-MyTable-组件的封装要求"><a href="#10-10-3-0-MyTable-组件的封装要求" class="headerlink" title="10.10.3.0 MyTable 组件的封装要求"></a>10.10.3.0 MyTable 组件的封装要求</h5><ol>
<li>用户通过名为 data 的 prop 属性，为 MyTable 组件指定数据源</li>
<li>在 MyTable 组件中，预留名称为 header 的具名插槽</li>
<li>在 MyTable 组件中，预留名称为 body 的作用域插槽</li>
</ol>
<h5 id="10-10-3-1-创建并使用-MyTable-组件"><a href="#10-10-3-1-创建并使用-MyTable-组件" class="headerlink" title="10.10.3.1 创建并使用 MyTable 组件"></a>10.10.3.1 创建并使用 MyTable 组件</h5><p>​    …</p>
<h5 id="10-10-3-2-为表格声明-data-数据源"><a href="#10-10-3-2-为表格声明-data-数据源" class="headerlink" title="10.10.3.2 为表格声明 data 数据源"></a>10.10.3.2 为表格声明 data 数据源</h5><ol>
<li>在 MyTable 组件的 props 节点中声明表格的 data 数据源</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>: &#123;</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="title class_">Array</span>,</span><br><span class="line">        <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">default</span>: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App 组件中使用 MyTable 组件时，通过属性绑定的形式为表格指定 data 数据源</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-table :data=&quot;goodslist&quot;&gt;&lt;/my-table&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-10-3-3-封装-MyTable-组件的模板结构"><a href="#10-10-3-3-封装-MyTable-组件的模板结构" class="headerlink" title="10.10.3.3 封装 MyTable 组件的模板结构"></a>10.10.3.3 封装 MyTable 组件的模板结构</h5><ol>
<li>基于 bootstrap 提供的 Tables，在 MyTable 组件中渲染最基本的模板结构</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;table class=&quot;table table-bordered table-striped table-hover&quot;&gt;</span><br><span class="line">    &lt;!-- 标题区域 --&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">    &lt;!-- 内容主体区域 --&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">      &lt;tr v-for=&quot;(item, index) in data&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;slot name=&quot;body&quot; :row=&quot;item&quot; :index=&quot;index&quot;&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">  &lt;/table&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>为了提高组件的复用性，最好把表格的标题区域预留为 slot 具名插槽，方便使用者自定义表格数据</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;table class=&quot;table table-bordered table-striped table-hover&quot;&gt;</span><br><span class="line">    &lt;!-- 标题区域 --&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">    &lt;!-- 内容主体区域 --&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">      &lt;tr v-for=&quot;(item, index) in data&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;slot name=&quot;body&quot; :row=&quot;item&quot; :index=&quot;index&quot;&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">  &lt;/table&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在 App 组件中，通过具名插槽的形式，为 MyTable 组件指定标题名称</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-table :data=&quot;goodslist&quot;&gt;</span><br><span class="line">      &lt;template #header&gt;</span><br><span class="line">        &lt;th&gt;#&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;商品名称&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;价格&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;标签&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template #body=&quot;&#123;row, index&#125;&quot;&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;index + 1&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;row.goods_name&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;￥&#123;&#123;row.goods_price&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;row.tags&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;</span><br><span class="line">          &lt;button type=&quot;button&quot; class=&quot;btn btn-danger btn-sm&quot;&gt;删除&lt;/button&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/my-table&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-10-3-4-预留名称为-body-的作用域插槽"><a href="#10-10-3-4-预留名称为-body-的作用域插槽" class="headerlink" title="10.10.3.4 预留名称为 body 的作用域插槽"></a>10.10.3.4 预留名称为 body 的作用域插槽</h5><ol>
<li>在 MyTable 组件中，通过 v-for 指令 循环渲染 表格的数据行</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;tbody&gt;</span><br><span class="line">      &lt;tr v-for=&quot;(item, index) in data&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;slot name=&quot;body&quot; :row=&quot;item&quot; :index=&quot;index&quot;&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>为了提高 MyTable 组件的复用性，最好把表格数据行里面的 td 单元格预留位 slot 具名插槽。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;tbody&gt;</span><br><span class="line">      &lt;tr v-for=&quot;(item, index) in data&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;slot name=&quot;body&quot; :row=&quot;item&quot; :index=&quot;index&quot;&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>为了让组件的使用者提供 body 插槽的内容时，能够自定义内容的渲染方式，需要把 body 具名插槽升级为 作用域插槽</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;tbody&gt;</span><br><span class="line">      &lt;tr v-for=&quot;(item, index) in data&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">        &lt;slot name=&quot;body&quot; :row=&quot;item&quot; :index=&quot;index&quot;&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>在 App 组件中，基于作用域插槽的方式渲染表格的数据</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-table :data=&quot;goodslist&quot;&gt;</span><br><span class="line">      &lt;template #header&gt;</span><br><span class="line">        &lt;th&gt;#&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;商品名称&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;价格&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;标签&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template #body=&quot;&#123;row, index&#125;&quot;&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;index + 1&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;row.goods_name&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;￥&#123;&#123;row.goods_price&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;row.tags&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;</span><br><span class="line">          &lt;button type=&quot;button&quot; class=&quot;btn btn-danger btn-sm&quot;&gt;删除&lt;/button&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/my-table&gt;</span><br></pre></td></tr></table></figure>

<h4 id="10-10-4-实现删除功能‘"><a href="#10-10-4-实现删除功能‘" class="headerlink" title="10.10.4 实现删除功能‘"></a>10.10.4 实现删除功能‘</h4><ol>
<li>为删除按钮绑定 click 事件处理函数</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button type=&quot;button&quot; class=&quot;btn btn-danger btn-sm&quot; @click=&quot;onRemove(row.id)&quot;&gt;删除&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在 App 组件的 methods 中声明事件处理函数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onRemove</span>(<span class="params">id</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">goodslist</span> = <span class="variable language_">this</span>.<span class="property">goodslist</span>.<span class="title function_">filter</span>( <span class="function"><span class="params">x</span> =&gt;</span> x.<span class="property">id</span> !== id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-10-5-实现添加功能"><a href="#10-10-5-实现添加功能" class="headerlink" title="10.10.5 实现添加功能"></a>10.10.5 实现添加功能</h4><h5 id="10-10-5-1-自定义渲染标签列"><a href="#10-10-5-1-自定义渲染标签列" class="headerlink" title="10.10.5.1 自定义渲染标签列"></a>10.10.5.1 自定义渲染标签列</h5><p>根据 bootstrap 提供的 Badge 效果，循环渲染商品的标签信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span class=&quot;badge bg-warning text-dark me-2&quot; v-for=&quot;item in row.tags&quot; :key=&quot;item&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-10-5-2-实现-input-和-button-按需展示"><a href="#10-10-5-2-实现-input-和-button-按需展示" class="headerlink" title="10.10.5.2 实现 input 和 button 按需展示"></a>10.10.5.2 实现 input 和 button 按需展示</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; class=&quot;form-control form-control-sm form-ipt&quot; v-if=&quot;row.inVisible&quot;&gt;</span><br><span class="line">&lt;button type=&quot;button&quot; class=&quot;btn btn-primary btn-sm&quot; v-else @click=&quot;row.inVisible = true&quot;&gt;+Tag&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-10-5-3-让-input-自动获取焦点"><a href="#10-10-5-3-让-input-自动获取焦点" class="headerlink" title="10.10.5.3 让 input 自动获取焦点"></a>10.10.5.3 让 input 自动获取焦点</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;form-control form-control-sm form-ipt&quot;</span> v-<span class="keyword">if</span>=<span class="string">&quot;row.inVisible&quot;</span> v-focus&gt;</span><br><span class="line">    </span><br><span class="line"><span class="attr">directives</span>: &#123;</span><br><span class="line">      <span class="title function_">focus</span>(<span class="params">el</span>) &#123;</span><br><span class="line">        el.<span class="title function_">focus</span>()</span><br><span class="line">      &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h5 id="10-10-5-4-文本失去焦点自动隐藏"><a href="#10-10-5-4-文本失去焦点自动隐藏" class="headerlink" title="10.10.5.4 文本失去焦点自动隐藏"></a>10.10.5.4 文本失去焦点自动隐藏</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;form-control form-control-sm form-ipt&quot;</span> v-<span class="keyword">if</span>=<span class="string">&quot;row.inputVisible&quot;</span> v-focus v-model.<span class="property">trim</span>=<span class="string">&quot;row.inputValue&quot;</span> @blur=<span class="string">&quot;onInputConfirm(row)&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<h5 id="10-10-5-5-为商品添加新的-tag-标签"><a href="#10-10-5-5-为商品添加新的-tag-标签" class="headerlink" title="10.10.5.5 为商品添加新的 tag 标签"></a>10.10.5.5 为商品添加新的 tag 标签</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onInputConfirm</span>(<span class="params">item</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> val = item.<span class="property">inputValue</span> </span><br><span class="line">        item.<span class="property">inputValue</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        item.<span class="property">inputVisible</span> = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">if</span>(!val || item.<span class="property">tags</span>.<span class="title function_">indexOf</span>(val) !== -<span class="number">1</span>) <span class="keyword">return</span> </span><br><span class="line">        item.<span class="property">tags</span>.<span class="title function_">push</span>(val)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="10-10-5-6-响应文本框的回车按钮"><a href="#10-10-5-6-响应文本框的回车按钮" class="headerlink" title="10.10.5.6 响应文本框的回车按钮"></a>10.10.5.6 响应文本框的回车按钮</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control form-control-sm form-ipt&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;row.inputVisible&quot;</span> <span class="attr">v-focus</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;row.inputValue&quot;</span> @<span class="attr">blur</span>=<span class="string">&quot;onInputConfirm(row)&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;onInputConfirm(row)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="10-10-5-7-响应文本框-esc-按钮"><a href="#10-10-5-7-响应文本框-esc-按钮" class="headerlink" title="10.10.5.7 响应文本框 esc 按钮"></a>10.10.5.7 响应文本框 esc 按钮</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control form-control-sm form-ipt&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;row.inputVisible&quot;</span> <span class="attr">v-focus</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;row.inputValue&quot;</span> @<span class="attr">blur</span>=<span class="string">&quot;onInputConfirm(row)&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;onInputConfirm(row)&quot;</span> @<span class="attr">keyup.esc</span>=<span class="string">&quot;row.inputValue=&#x27;&#x27;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="11-vue-cli"><a href="#11-vue-cli" class="headerlink" title="11 vue-cli"></a>11 vue-cli</h2><h3 id="11-1-什么是-vue-cli"><a href="#11-1-什么是-vue-cli" class="headerlink" title="11.1 什么是 vue-cli"></a>11.1 什么是 vue-cli</h3><p>vue-cli （俗称：vue 脚手架）是 vue 官方提供的快速生成 vue 工程化项目的工具。</p>
<p>特点：</p>
<ol>
<li>开箱即用</li>
<li>基于 webpack</li>
<li>功能丰富且易于扩展</li>
<li>支持创建 vue2 和 vue3 的项目</li>
</ol>
<h3 id="11-2-安装vue-cli"><a href="#11-2-安装vue-cli" class="headerlink" title="11.2 安装vue-cli"></a>11.2 安装vue-cli</h3><p>vue-cli 是基于 Node.js 开发出来的工具，因此需要使用 npm 将它安装为全局可用的工具</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>

<h4 id="解决-Windows-powershell-不识别-vue-命令的问题"><a href="#解决-Windows-powershell-不识别-vue-命令的问题" class="headerlink" title="解决 Windows powershell 不识别 vue 命令的问题"></a>解决 Windows powershell 不识别 vue 命令的问题</h4><p>默认情况下，在 PowerShell 中执行 vue –version 命令会提示错误。</p>
<p>解决方法：</p>
<ol>
<li>以管理员身份运行 powershell</li>
<li>执行 set-ExecutionPolicy RemoteSigned 命令</li>
<li>输入字符 Y ，回车</li>
</ol>
<h3 id="11-3-创建项目"><a href="#11-3-创建项目" class="headerlink" title="11.3 创建项目"></a>11.3 创建项目</h3><p>vue-cli 提供了创建项目的两种方式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令行</span></span><br><span class="line">vue create 项目名称</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可视化界面</span></span><br><span class="line">vue ui</span><br></pre></td></tr></table></figure>

<h2 id="12-组件库"><a href="#12-组件库" class="headerlink" title="12 组件库"></a>12 组件库</h2><h3 id="12-1什么是组件库"><a href="#12-1什么是组件库" class="headerlink" title="12.1什么是组件库"></a>12.1什么是组件库</h3><p>在实际开发中，前端开发者可以把自己封装的 .vue 组件整理、打包、并发布为 npm 包，从而供其他人下载和使用。这种可以直接下载并在项目中使用的现成组件，就叫做 vue 组件库。</p>
<h3 id="12-2vue-组件库和-bootstrap-的区别"><a href="#12-2vue-组件库和-bootstrap-的区别" class="headerlink" title="12.2vue 组件库和 bootstrap 的区别"></a>12.2vue 组件库和 bootstrap 的区别</h3><p>二者之间存在本质的区别：</p>
<ul>
<li>bootstrap 只提供了纯粹的原材料（css 样式、HTML 结构以及 js 特效），需要由开发者进一步的组装和改造。</li>
<li>vue 组件库是遵循 vue 语法、高度定制的现成组件，开箱即用。</li>
</ul>
<h3 id="12-3最常见的-vue-组件库"><a href="#12-3最常见的-vue-组件库" class="headerlink" title="12.3最常见的 vue 组件库"></a>12.3最常见的 vue 组件库</h3><ol>
<li>PC 端</li>
</ol>
<ul>
<li>Element UI</li>
<li>View UI</li>
</ul>
<ol start="2">
<li>移动端</li>
</ol>
<ul>
<li>MInt UI</li>
<li>Vant</li>
</ul>
<h3 id="12-4Element-UI"><a href="#12-4Element-UI" class="headerlink" title="12.4Element UI"></a>12.4Element UI</h3><p>Element UI 是饿了么前端团队开源的一套 PC 端 vue 组件库。支持在 vue2 和 vue3 的项目中使用：</p>
<ul>
<li>vue2 的项目中使用旧版的 Element UI</li>
<li>vue3 的项目中使用新版的 Element Plus</li>
</ul>
<h4 id="在-vue2-的项目中安装-element-ui"><a href="#在-vue2-的项目中安装-element-ui" class="headerlink" title="- 在 vue2 的项目中安装 element-ui"></a>- 在 vue2 的项目中安装 element-ui</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install element-ui -S</span><br></pre></td></tr></table></figure>

<h4 id="引入-element-ui"><a href="#引入-element-ui" class="headerlink" title="- 引入 element-ui"></a>- 引入 element-ui</h4><p>开发者可以一次性完整引入所有的 element-ui 组件，或是根据需求，只按需引入用到的 element-ui 组件：</p>
<ul>
<li>完整引入：操作简单，但是会额外引入一些用不到的组件，导致项目体积过大。</li>
<li>按需引入：操作相对复杂一些，但是只会引入用到的组件，能起到优化项目体积的目的。</li>
</ul>
<h4 id="完整引入"><a href="#完整引入" class="headerlink" title="- 完整引入"></a>- 完整引入</h4><p>在 main.js 中写入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 完整引入 element-ui 组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="comment">// 导入 element-ui 组件的样式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把 ElementUI 注册为 vue 的插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>) </span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="按需引入"><a href="#按需引入" class="headerlink" title="- 按需引入"></a>- 按需引入</h4><p>借助 babel-plugin-component，我们可以只引入需要的组件，以达到减小项目体积的目的。</p>
<ol>
<li>安装 babel-plugin-component</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-plugin-component</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改跟目录下的 babel.config.js 配置文件，新增 plugins 节点。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">presets</span>: [<span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>],</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        [</span><br><span class="line">            <span class="string">&#x27;component&#x27;</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">libraryName</span>: <span class="string">&#x27;element-ui&#x27;</span>,</span><br><span class="line">                <span class="attr">styleLibraryName</span>: <span class="string">&#x27;theme-chalk&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>如果你只希望引入部分组件，比如 Button，那么需要在 main.js 中写入。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 按需导入 element-ui 组件</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Button</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="title class_">Button</span>.<span class="property">name</span>, <span class="title class_">Button</span>)</span><br><span class="line"><span class="comment">// 或者 Vue.use(Button)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="把组件的导入和注册封装为独立的模块"><a href="#把组件的导入和注册封装为独立的模块" class="headerlink" title="- 把组件的导入和注册封装为独立的模块"></a>- 把组件的导入和注册封装为独立的模块</h4><p>在 src 目录下新建 element-ui/index.js 模块，并声明如下代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模块路径 /src/element-ui/index.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// 按需导入 element ui 组件</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Button</span>, <span class="title class_">Input</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册需要的组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Button</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Input</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 main.js 导入</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./element-ui&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="13-axios-拦截器"><a href="#13-axios-拦截器" class="headerlink" title="13 axios 拦截器"></a>13 axios 拦截器</h2><h3 id="13-1-回顾：在-vue3-的项目中全局配置axios"><a href="#13-1-回顾：在-vue3-的项目中全局配置axios" class="headerlink" title="13.1 回顾：在 vue3 的项目中全局配置axios"></a>13.1 回顾：在 vue3 的项目中全局配置axios</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createApp&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://www.escook.cn&#x27;</span></span><br><span class="line"></span><br><span class="line">app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$http</span> = axios</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="13-2-在-vue2-的项目中全局配置-axios"><a href="#13-2-在-vue2-的项目中全局配置-axios" class="headerlink" title="13.2 在 vue2 的项目中全局配置 axios"></a>13.2 在 vue2 的项目中全局配置 axios</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://www.escook.cn&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$http</span> = axios</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="13-3-什么是拦截器"><a href="#13-3-什么是拦截器" class="headerlink" title="13.3 什么是拦截器"></a>13.3 什么是拦截器</h3><p>拦截器（interceptors）会在每此发起 ajax 请求和得到响应的时候自动被触发。</p>
<p><img src="https://s2.loli.net/2022/09/24/UEovjr3M4DFgk8t.png" alt="image-20220924131944904.png"></p>
<p>应用场景：</p>
<ol>
<li>Token 身份认证</li>
<li>Loading 效果</li>
<li>etc…</li>
</ol>
<h3 id="13-4-配置请求拦截器"><a href="#13-4-配置请求拦截器" class="headerlink" title="13.4 配置请求拦截器"></a>13.4 配置请求拦截器</h3><p>通过 axios.interceptors.request.use(成功的回调，失败的回调) 可以配置请求拦截器。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;,<span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：失败的回调可以被省略</p>
</blockquote>
<h4 id="13-4-1-请求拦截器-Token-认证"><a href="#13-4-1-请求拦截器-Token-认证" class="headerlink" title="13.4.1 请求拦截器 - Token 认证"></a>13.4.1 请求拦截器 - Token 认证</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://www.escook.cn&#x27;</span></span><br><span class="line"></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 为当前请求配置 Token 认证字段</span></span><br><span class="line">    config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">&#x27;Bearer xxx&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$http</span> = axios</span><br></pre></td></tr></table></figure>

<h4 id="13-4-2-请求拦截器-展示-Loading-效果"><a href="#13-4-2-请求拦截器-展示-Loading-效果" class="headerlink" title="13.4.2 请求拦截器 - 展示 Loading 效果"></a>13.4.2 请求拦截器 - 展示 Loading 效果</h4><p>借助于 element ui 提供的 Loading 组件可以方便的实现 Loading 效果的展示。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按需导入 Loading 效果组件</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Loading</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 声明变量，用来存储 Loading 组件的实例对象</span></span><br><span class="line"><span class="keyword">let</span> loadingInstance = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 调用 Loading 组件的 service（）方法，创建 Loading 组件的实例，并全屏展示 Loading 效果</span></span><br><span class="line">    loadingInstance = <span class="title class_">Loading</span>.<span class="title function_">service</span>(&#123;<span class="attr">fullscreen</span>: <span class="literal">true</span>&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="13-5-配置响应拦截器"><a href="#13-5-配置响应拦截器" class="headerlink" title="13.5 配置响应拦截器"></a>13.5 配置响应拦截器</h3><p>通过 axios.interceeptors.response.use(成功的回调，失败的回调) 可以配置响应拦截器。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="property">interrceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">&#125;, <span class="keyword">function</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="13-5-1-响应拦截器-关闭-Loading-效果"><a href="#13-5-1-响应拦截器-关闭-Loading-效果" class="headerlink" title="13.5.1 响应拦截器 - 关闭 Loading 效果"></a>13.5.1 响应拦截器 - 关闭 Loading 效果</h4><p>调用 Loading 实力提供的 close（）方法即可关闭 Loading 效果。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function"><span class="params">resonse</span> =&gt;</span> &#123;</span><br><span class="line">    loadingInstance.<span class="title function_">clse</span>()</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="14-proxy-跨域代理"><a href="#14-proxy-跨域代理" class="headerlink" title="14 proxy 跨域代理"></a>14 proxy 跨域代理</h2><h3 id="14-1-接口的跨域问题"><a href="#14-1-接口的跨域问题" class="headerlink" title="14.1 接口的跨域问题"></a>14.1 接口的跨域问题</h3><p>vue 项目运行的地址： <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a></p>
<p>API 接口运行的地址：<a target="_blank" rel="noopener" href="https://www.escook.cn/api/users">https://www.escook.cn/api/users</a></p>
<p>由于当前的 API 接口没有开启 CORS 跨域资源共享，因此默认情况下，上面的接口无法请求成功。</p>
<p><img src="https://s2.loli.net/2022/09/24/8vcqbzM9xJGKfnD.png" alt="image-20220924134630271.png"></p>
<h3 id="14-2-通过代理解决接口的跨域问题"><a href="#14-2-通过代理解决接口的跨域问题" class="headerlink" title="14.2 通过代理解决接口的跨域问题"></a>14.2 通过代理解决接口的跨域问题</h3><p>通过 vue-cli 创建的项目在遇到接口跨域问题时，可以通过代理的方式来解决：</p>
<p><img src="https://s2.loli.net/2022/09/24/1u6ZJeSgmszNLBC.png" alt="image-20220924135112537.png"></p>
<ol>
<li>把 axios 的请求根路径设置为 vue 项目的运行地址（接口请求不再跨域）</li>
<li>vue 项目发现请求的接口不存在，把请求交给 proxy 代理</li>
<li>代理把请求根路径替换为 devServer.proxy 属性的值，发起真正的数据请求</li>
<li>代理把请求到的数据转发给 axios</li>
</ol>
<h3 id="14-3-在项目中配置-proxy-代理"><a href="#14-3-在项目中配置-proxy-代理" class="headerlink" title="14.3 在项目中配置 proxy 代理"></a>14.3 在项目中配置 proxy 代理</h3><ol>
<li>在 main.js 中，把 axios 的请求根路径改造为当前 web 项目的根路径</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;http://localhost:8080&#x27;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在项目根目录下创建 vue.config.js 的配置对象，并声明如下的配置</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">proxy</span>: <span class="string">&#x27;https://www.escook.cn&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：</p>
<ol>
<li>devServer.proxy 提供的代理功能，仅在开发调试阶段生效</li>
<li>项目上线发布时，依旧需要 API 接口服务器开启 CORS 跨域资源共享</li>
</ol>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Kshtor_Mango</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/10/21/Vue/">http://example.com/2022/10/21/Vue/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Mangoの</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Note/">Note</a><a class="post-meta__tags" href="/tags/Vue/">Vue</a></div><div class="post_share"><div class="social-share" data-image="/img/banner/14.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/10/23/ES6/" title="ES6"><img class="cover" src="/img/banner/16.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-23</div><div class="title">ES6</div></div></a></div><div><a href="/2022/10/23/vuex/" title="vuex"><img class="cover" src="/img/banner/16.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-23</div><div class="title">vuex</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Vue-%E7%AE%80%E4%BB%8B"><span class="toc-text">1 Vue 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AF-Vue"><span class="toc-text">1.1 什么是 Vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E6%9E%84%E5%BB%BA%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2%E7%9A%84%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F"><span class="toc-text">1.2 构建用户界面的传统方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E4%BD%BF%E7%94%A8-vue-%E6%9E%84%E5%BB%BA%E7%94%A8%E6%88%B7%E7%95%8C%E9%9D%A2"><span class="toc-text">1.3 使用 vue 构建用户界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E8%A7%A3%E8%AF%BB%E6%A0%B8%E5%BF%83%E5%85%B3%E9%94%AE%E8%AF%8D%EF%BC%9A%E6%A1%86%E6%9E%B6"><span class="toc-text">1.4 解读核心关键词：框架</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Vue-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2 Vue 的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-text">2.1 基本使用步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%9F%BA%E6%9C%AC%E4%BB%A3%E7%A0%81%E4%B8%8E-MVVM-%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB"><span class="toc-text">2.2  基本代码与 MVVM 的对应关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Vue-%E7%9A%84%E6%8C%87%E4%BB%A4%E4%B8%8E%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-text">3 Vue 的指令与过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%86%85%E5%AE%B9%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4"><span class="toc-text">3.1 内容渲染指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-v-text"><span class="toc-text">3.1.1 v-text</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-%E5%8F%8C%E6%8B%AC%E5%8F%B7%E8%AF%AD%E6%B3%95"><span class="toc-text">3.1.2 双括号语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-3-v-html"><span class="toc-text">3.1.3 v-html</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4"><span class="toc-text">3.2  属性绑定指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4%E7%9A%84%E7%AE%80%E5%86%99%E5%BD%A2%E5%BC%8F"><span class="toc-text">3.2.1 属性绑定指令的简写形式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4"><span class="toc-text">3.3 事件绑定指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E7%9A%84%E7%AE%80%E5%86%99%E5%BD%A2%E5%BC%8F"><span class="toc-text">3.3.1 事件绑定的简写形式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1-event"><span class="toc-text">3.3.2 事件对象 event</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3-%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6%E5%B9%B6%E4%BC%A0%E5%8F%82"><span class="toc-text">3.3.3 绑定事件并传参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-4-event"><span class="toc-text">3.3.4 $event</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-5-%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-text">3.3.5 事件修饰符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-6-%E6%8C%89%E9%94%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-text">3.3.6 按键修饰符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4"><span class="toc-text">3.4 双向绑定指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-v-model-%E6%8C%87%E4%BB%A4%E7%9A%84%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-text">3.4.1 v-model 指令的修饰符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4"><span class="toc-text">3.5 条件渲染指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-1-v-if-%E5%92%8C-v-show-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">3.5.1 v-if 和 v-show 的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-2-v-else"><span class="toc-text">3.5.2 v-else</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-3-v-else-if"><span class="toc-text">3.5.3 v-else-if</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4"><span class="toc-text">3.6 列表渲染指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-1-v-for-%E4%B8%AD%E7%9A%84%E7%B4%A2%E5%BC%95"><span class="toc-text">3.6.1 v-for 中的索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-2-%E4%BD%BF%E7%94%A8-key-%E7%BB%B4%E6%8A%A4%E5%88%97%E8%A1%A8%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-text">3.6.2 使用 key 维护列表的状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-3-key-%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">3.6.3 key 的注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-text">3.7 过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-1-%E5%AE%9A%E4%B9%89%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-text">3.7.1 定义过滤器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-2-%E7%A7%81%E6%9C%89%E8%BF%87%E6%BB%A4%E5%99%A8%E5%92%8C%E5%85%A8%E5%B1%80%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-text">3.7.2 私有过滤器和全局过滤器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-3-%E8%BF%9E%E7%BB%AD%E8%B0%83%E7%94%A8%E5%A4%9A%E4%B8%AA%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-text">3.7.3 连续调用多个过滤器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-4-%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BC%A0%E5%8F%82"><span class="toc-text">3.7.4 过滤器传参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-5-%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7"><span class="toc-text">3.7.5 过滤器的兼容性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-%E5%93%81%E7%89%8C%E5%88%97%E8%A1%A8%E6%A1%88%E4%BE%8B"><span class="toc-text">3.8 品牌列表案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-0-%E6%95%B4%E4%BD%93%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">3.8.0 整体实现步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-1-%E5%88%9B%E5%BB%BA%E5%9F%BA%E6%9C%AC%E7%9A%84-vue-%E5%AE%9E%E4%BE%8B"><span class="toc-text">3.8.1 创建基本的 vue 实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-2-%E5%9F%BA%E4%BA%8E-vue-%E6%B8%B2%E6%9F%93%E8%A1%A8%E6%A0%BC%E6%95%B0%E6%8D%AE"><span class="toc-text">3.8.2 基于 vue 渲染表格数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-3-%E6%B7%BB%E5%8A%A0%E5%93%81%E7%89%8C"><span class="toc-text">3.8.3 添加品牌</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-4-%E5%88%A0%E9%99%A4%E5%93%81%E7%89%8C"><span class="toc-text">3.8.4 删除品牌</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-text">4 单页面应用程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-text">4.1 什么是单页面应用程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-text">4.2 单页面应用程序的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-text">4.3 单页面应用程序的优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E5%8D%95%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-text">4.4 单页面应用程序的缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BA-vue-%E7%9A%84-SPA-%E9%A1%B9%E7%9B%AE"><span class="toc-text">4.5 如何快速创建 vue 的 SPA 项目</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-vite-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">5 vite 的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%88%9B%E5%BB%BA-vite-%E7%9A%84%E9%A1%B9%E7%9B%AE"><span class="toc-text">5.1 创建 vite 的项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E6%A2%B3%E7%90%86%E9%A1%B9%E7%9B%AE%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">5.2 梳理项目的结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-vite-%E9%A1%B9%E7%9B%AE%E7%9A%84%E8%BF%90%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">5.3 vite 项目的运行流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-1-%E5%9C%A8-App-vue-%E4%B8%AD%E7%BC%96%E5%86%99%E6%A8%A1%E6%9D%BF%E7%BB%93%E6%9E%84"><span class="toc-text">5.3.1 在 App.vue 中编写模板结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-2-%E5%9C%A8-index-html-%E4%B8%AD%E9%A2%84%E7%95%99-el-%E5%8C%BA%E5%9F%9F"><span class="toc-text">5.3.2 在 index.html 中预留 el 区域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-3-%E5%9C%A8-main-js-%E4%B8%AD%E8%BF%9B%E8%A1%8C%E6%B8%B2%E6%9F%93"><span class="toc-text">5.3.3 在 main.js 中进行渲染</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%E6%80%9D%E6%83%B3"><span class="toc-text">6 组件化开发思想</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-text">6.1 什么是组件化开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-text">6.2 组件化开发的好处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-vue-%E4%B8%AD%E7%9A%84%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91"><span class="toc-text">6.3 vue 中的组件化开发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-vue-%E7%BB%84%E4%BB%B6%E7%9A%84%E6%9E%84%E6%88%90"><span class="toc-text">7 vue 组件的构成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-vue-%E7%BB%84%E4%BB%B6%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84"><span class="toc-text">7.1 vue 组件组成结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E7%BB%84%E4%BB%B6%E7%9A%84-template-%E8%8A%82%E7%82%B9"><span class="toc-text">7.2 组件的 template 节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-1-%E5%9C%A8-template-%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-text">7.2.1 在 template 中使用指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-2-%E5%9C%A8-template-%E4%B8%AD%E5%AE%9A%E4%B9%89%E6%A0%B9%E8%8A%82%E7%82%B9"><span class="toc-text">7.2.2 在 template 中定义根节点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E7%BB%84%E4%BB%B6%E7%9A%84-script-%E8%8A%82%E7%82%B9"><span class="toc-text">7.3 组件的 script 节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-1-script-%E4%B8%AD%E7%9A%84-name-%E8%8A%82%E7%82%B9"><span class="toc-text">7.3.1 script 中的 name 节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-2-script-%E4%B8%AD%E7%9A%84-data-%E8%8A%82%E7%82%B9"><span class="toc-text">7.3.2 script 中的 data 节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-3-script-%E4%B8%AD%E7%9A%84-methods-%E8%8A%82%E7%82%B9"><span class="toc-text">7.3.3 script 中的 methods 节点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E7%BB%84%E4%BB%B6%E7%9A%84-style-%E8%8A%82%E7%82%B9"><span class="toc-text">7.4 组件的 style 节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-4-1-%E8%AE%A9-style-%E4%B8%AD%E6%94%AF%E6%8C%81-less-%E8%AF%AD%E6%B3%95"><span class="toc-text">7.4.1 让 style 中支持 less 语法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">8 组件的基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E7%BB%84%E4%BB%B6%E7%9A%84%E6%B3%A8%E5%86%8C"><span class="toc-text">8.1 组件的注册</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-1-%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">8.1.1 注册组件的两种方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-2-%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6"><span class="toc-text">8.1.2 全局注册组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-3-%E4%BD%BF%E7%94%A8%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6"><span class="toc-text">8.1.3 使用全局注册组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-4-%E5%B1%80%E9%83%A8%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6"><span class="toc-text">8.1.4 局部注册组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-5-%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C%E5%92%8C%E5%B1%80%E9%83%A8%E6%B3%A8%E5%86%8C%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">8.1.5 全局注册和局部注册的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-6-%E7%BB%84%E4%BB%B6%E6%B3%A8%E5%86%8C%E6%97%B6%E5%90%8D%E7%A7%B0%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99"><span class="toc-text">8.1.6 组件注册时名称的大小写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-7-%E9%80%9A%E8%BF%87-name-%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6"><span class="toc-text">8.1.7 通过 name 属性注册组件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E6%A0%B7%E5%BC%8F%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98"><span class="toc-text">8.2 组件之间的样式冲突问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-1-%E6%80%9D%E8%80%83%EF%BC%9A%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E5%86%B2%E7%AA%81%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">8.2.1 思考：如何解决组件样式冲突的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-2-style-%E8%8A%82%E7%82%B9%E7%9A%84-scoped-%E5%B1%9E%E6%80%A7"><span class="toc-text">8.2.2 style 节点的 scoped 属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-3-deep-%E6%A0%B7%E5%BC%8F%E7%A9%BF%E9%80%8F"><span class="toc-text">8.2.3 &#x2F;deep&#x2F; 样式穿透</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E7%BB%84%E4%BB%B6%E7%9A%84-props"><span class="toc-text">8.3 组件的 props</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-1-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E4%BB%B6%E7%9A%84-props"><span class="toc-text">8.3.1 什么是组件的 props</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-2-%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%AD%E5%A3%B0%E6%98%8E-props"><span class="toc-text">8.3.2 在组件中声明 props</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-3-%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E6%9C%AA%E5%A3%B0%E6%98%8E%E7%9A%84-props"><span class="toc-text">8.3.3 无法使用未声明的 props</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-4-%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A-props-%E7%9A%84%E5%80%BC"><span class="toc-text">8.3.4 动态绑定 props 的值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-5-props-%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99%E5%91%BD%E5%90%8D"><span class="toc-text">8.3.5 props 的大小写命名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-Class-%E4%B8%8E-Style-%E7%BB%91%E5%AE%9A"><span class="toc-text">8.4 Class 与 Style 绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-1-%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A-HTML-%E7%9A%84-class"><span class="toc-text">8.4.1 动态绑定 HTML 的 class</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-2-%E4%BB%A5%E6%95%B0%E7%BB%84%E8%AF%AD%E6%B3%95%E7%BB%91%E5%AE%9A-HTML-%E7%9A%84-class"><span class="toc-text">8.4.2 以数组语法绑定 HTML 的 class</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-3-%E4%BB%A5%E5%AF%B9%E8%B1%A1%E8%AF%AD%E6%B3%95%E7%BB%91%E5%AE%9A-HTML-%E7%9A%84-class"><span class="toc-text">8.4.3 以对象语法绑定 HTML 的 class</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-4-4-%E4%BB%A5%E5%AF%B9%E8%B1%A1%E8%AF%AD%E6%B3%95%E7%BB%91%E5%AE%9A%E5%86%85%E8%81%94%E7%9A%84-style%E4%BB%A5%E5%AF%B9%E8%B1%A1%E8%AF%AD%E6%B3%95%E7%BB%91%E5%AE%9A%E5%86%85%E8%81%94%E7%9A%84-style"><span class="toc-text">8.4.4 以对象语法绑定内联的 style以对象语法绑定内联的 style</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E6%A1%88%E4%BE%8B"><span class="toc-text">8.5 组件封装案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E7%BB%84%E4%BB%B6%E6%B7%B1%E5%85%A5"><span class="toc-text">9 组件深入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-props-%E9%AA%8C%E8%AF%81"><span class="toc-text">9.1 props 验证</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-1-%E4%BB%80%E4%B9%88%E6%98%AF-props-%E9%AA%8C%E8%AF%81"><span class="toc-text">9.1.1 什么是 props 验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-2-%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84-props-%E8%8A%82%E7%82%B9"><span class="toc-text">9.1.2 对象类型的 props 节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-3-%E5%9F%BA%E7%A1%80%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5"><span class="toc-text">9.1.3 基础的类型检查</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-4-%E5%A4%9A%E4%B8%AA%E5%8F%AF%E8%83%BD%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-text">9.1.4 多个可能的类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-5-%E5%BF%85%E5%A1%AB%E9%A1%B9%E6%A0%A1%E9%AA%8C"><span class="toc-text">9.1.5 必填项校验</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-6-%E5%B1%9E%E6%80%A7%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">9.1.6 属性默认值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-7-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%AA%8C%E8%AF%81%E5%87%BD%E6%95%B0"><span class="toc-text">9.1.7 自定义验证函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-text">9.2 计算属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-text">9.2.1 什么是计算属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-2-%E5%A6%82%E4%BD%95%E7%94%9F%E5%91%BD%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-text">9.2.2 如何生命计算属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-3-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E7%9A%84%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-text">9.2.3 计算属性的使用注意点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-4-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7-vs-%E6%96%B9%E6%B3%95"><span class="toc-text">9.2.4 计算属性 vs 方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-5-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E6%A1%88%E4%BE%8B"><span class="toc-text">9.2.5 计算属性案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-text">9.3 自定义事件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-text">9.3.1 什么是自定义事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E7%9A%84-3-%E4%B8%AA%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-text">9.3.2 自定义事件的 3 个使用步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-2-1-%E5%A3%B0%E6%98%8E%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-text">9.3.2.1 声明自定义事件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-2-2-%E8%A7%A6%E5%8F%91%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-text">9.3.2.2 触发自定义事件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-2-3-%E7%9B%91%E5%90%AC%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-text">9.3.2.3 监听自定义事件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-text">9.3.3 自定义事件传参</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E7%BB%84%E4%BB%B6%E4%B8%8A%E7%9A%84-v-model"><span class="toc-text">9.4 组件上的 v-model</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%8A%E4%BD%BF%E7%94%A8-v-model"><span class="toc-text">9.4.1 为什么需要在组件上使用 v-model</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-4-2-%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%8A%E4%BD%BF%E7%94%A8-v-model"><span class="toc-text">9.4.2 在组件上使用 v-model</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-%E6%A1%88%E4%BE%8B"><span class="toc-text">9.5 案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-1-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="toc-text">9.5.1 初始化项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-2-%E6%A2%B3%E7%90%86%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-text">9.5.2 梳理项目结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-3-%E5%B0%81%E8%A3%85-todo-list-%E7%BB%84%E4%BB%B6"><span class="toc-text">9.5.3 封装 todo-list 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-3-1-%E5%88%9B%E5%BB%BA%E5%B9%B6%E6%B3%A8%E5%86%8C-TodoList-%E7%BB%84%E4%BB%B6"><span class="toc-text">9.5.3.1 创建并注册 TodoList 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-3-2-%E5%9F%BA%E4%BA%8E-bootstrap-%E6%B8%B2%E6%9F%93%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">9.5.3.2 基于 bootstrap 渲染列表组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-3-3-%E4%B8%BA-TodoList-%E5%A3%B0%E6%98%8E-props-%E5%B1%9E%E6%80%A7"><span class="toc-text">9.5.3.3 为 TodoList 声明 props 属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-3-4-%E6%B8%B2%E6%9F%93%E5%88%97%E8%A1%A8%E7%9A%84-DOM-%E7%BB%93%E6%9E%84"><span class="toc-text">9.5.3.4 渲染列表的 DOM 结构</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-4-%E5%B0%81%E8%A3%85-todo-input-%E7%BB%84%E4%BB%B6"><span class="toc-text">9.5.4 封装 todo-input 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-4-1-%E5%88%9B%E5%BB%BA%E5%B9%B6%E6%B3%A8%E5%86%8C-TodoInput-%E7%BB%84%E4%BB%B6"><span class="toc-text">9.5.4.1 创建并注册 TodoInput 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-4-2-%E5%9F%BA%E4%BA%8E-bootstrap-%E6%B8%B2%E6%9F%93%E7%BB%84%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-text">9.5.4.2 基于 bootstrap 渲染组件结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-4-3-%E9%80%9A%E8%BF%87%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E5%90%91%E5%A4%96%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE"><span class="toc-text">9.5.4.3 通过自定义事件向外传递数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-4-4-%E5%AE%9E%E7%8E%B0%E6%B7%BB%E5%8A%A0%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-text">9.5.4.4 实现添加任务的功能</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-5-5-%E5%B0%81%E8%A3%85-todo-button-%E7%BB%84%E4%BB%B6"><span class="toc-text">9.5.5 封装 todo-button 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-5-1-%E5%88%9B%E5%BB%BA%E5%B9%B6%E6%B3%A8%E5%86%8C-TodoButton-%E7%BB%84%E4%BB%B6"><span class="toc-text">9.5.5.1 创建并注册 TodoButton 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-5-2-%E5%9F%BA%E4%BA%8E-bootstrap-%E6%B8%B2%E6%9F%93%E7%BB%84%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-text">9.5.5.2 基于 bootstrap 渲染组件结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-5-3-%E9%80%9A%E8%BF%87-props-%E6%8C%87%E5%AE%9A%E9%BB%98%E8%AE%A4%E6%BF%80%E6%B4%BB%E7%9A%84%E6%8C%89%E9%92%AE"><span class="toc-text">9.5.5.3 通过 props 指定默认激活的按钮</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-5-4-%E9%80%9A%E8%BF%87-v-model-%E6%9B%B4%E6%96%B0%E6%BF%80%E6%B4%BB%E9%A1%B9%E7%9A%84%E7%B4%A2%E5%BC%95"><span class="toc-text">9.5.5.4 通过 v-model 更新激活项的索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-5-5-5-%E9%80%9A%E8%BF%87%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E5%8A%A8%E6%80%81%E5%88%87%E6%8D%A2%E5%88%97%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">9.5.5.5 通过计算属性动态切换列表的数据</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E7%BB%84%E4%BB%B6%E9%AB%98%E7%BA%A7"><span class="toc-text">10 组件高级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-watch-%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-text">10.1 watch 侦听器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-1-%E4%BB%80%E4%B9%88%E6%98%AF-watch-%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-text">10.1.1 什么是 watch 侦听器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-2-watch-%E4%BE%A6%E5%90%AC%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">10.1.2 watch 侦听器的基本语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-%E4%BD%BF%E7%94%A8-watch-%E6%A3%80%E8%BD%A6%E7%94%A8%E6%88%B7%E5%90%8D%E6%98%AF%E5%90%A6%E5%8F%AF%E7%94%A8"><span class="toc-text">10.1.3 使用 watch 检车用户名是否可用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-4-immediate-%E9%80%89%E9%A1%B9"><span class="toc-text">10.1.4 immediate 选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-5-deep-%E9%80%89%E9%A1%B9"><span class="toc-text">10.1.5 deep 选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-6-%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E4%B8%AD%E5%8D%95%E4%B8%AA%E5%B1%9E%E6%80%A7%E7%9A%84%E5%8F%98%E5%8C%96"><span class="toc-text">10.1.6 监听对象中单个属性的变化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-7-%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7-vs-%E4%BE%A6%E5%90%AC%E5%99%A8"><span class="toc-text">10.1.7 计算属性 vs 侦听器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">10.2 组件的生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-1-%E7%BB%84%E4%BB%B6%E8%BF%90%E8%A1%8C%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-text">10.2.1 组件运行的过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-2-%E5%A6%82%E4%BD%95%E7%9B%91%E5%90%AC%E7%BB%84%E4%BB%B6%E7%9A%84%E4%B8%8D%E5%90%8C%E8%BF%87%E7%A8%8B"><span class="toc-text">10.2.2 如何监听组件的不同过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-3-%E5%A6%82%E4%BD%95%E7%9B%91%E5%90%AC%E7%BB%84%E4%BB%B6%E7%9A%84%E6%9B%B4%E6%96%B0"><span class="toc-text">10.2.3 如何监听组件的更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-4-%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%B8%BB%E8%A6%81%E7%9A%84%E5%A3%B0%E6%98%8E%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-text">10.2.4 组件中主要的声明周期函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-5-%E7%BB%84%E4%BB%B6%E4%B8%AD%E5%85%A8%E9%83%A8%E7%9A%84%E5%A3%B0%E6%98%8E%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-text">10.2.5 组件中全部的声明周期函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB"><span class="toc-text">10.3 组件之间的数据共享</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-3-1-%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">10.3.1 组件之间的关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-3-2-%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB"><span class="toc-text">10.3.2 父子组件之间的数据共享</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-2-1-%E7%88%B6%E7%BB%84%E4%BB%B6%E5%90%91%E5%AD%90%E7%BB%84%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-text">10.3.2.1 父组件向子组件共享数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-2-2-%E5%AD%90%E7%BB%84%E4%BB%B6%E5%90%91%E7%88%B6%E7%BB%84%E4%BB%B6%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-text">10.3.2.2 子组件向父组件共享数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-2-3-%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8F%8C%E5%90%91%E5%90%8C%E6%AD%A5"><span class="toc-text">10.3.2.3 父子组件之间数据的双向同步</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-3-3-%E5%85%84%E5%BC%9F%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB"><span class="toc-text">10.3.3 兄弟组件之间的数据共享</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-3-1-%E5%AE%89%E8%A3%85-mitt-%E4%BE%9D%E8%B5%96%E5%8C%85"><span class="toc-text">10.3.3.1 安装 mitt 依赖包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-3-2-%E5%88%9B%E5%BB%BA%E5%85%AC%E5%85%B1%E7%9A%84-EventBus-%E6%A8%A1%E5%9D%97"><span class="toc-text">10.3.3.2 创建公共的 EventBus 模块</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-3-3-%E5%9C%A8%E6%95%B0%E6%8D%AE%E6%8E%A5%E6%94%B6%E6%96%B9%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-text">10.3.3.3 在数据接收方自定义事件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-3-4-%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%8F%91%E9%80%81%E6%96%B9%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6"><span class="toc-text">10.3.3.4 在数据发送方触发事件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-3-4-%E5%90%8E%E5%B8%A6%E5%85%B3%E7%B3%BB%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB"><span class="toc-text">10.3.4 后带关系组件之间的数据共享</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-4-1-%E7%88%B6%E8%8A%82%E7%82%B9%E9%80%9A%E8%BF%87-provide-%E5%85%B1%E4%BA%AB%E6%95%B0%E6%8D%AE"><span class="toc-text">10.3.4.1 父节点通过 provide 共享数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-4-2-%E5%AD%90%E5%AD%99%E8%8A%82%E7%82%B9%E9%80%9A%E8%BF%87-inject-%E6%8E%A5%E6%94%B6%E6%95%B0%E6%8D%AE"><span class="toc-text">10.3.4.2 子孙节点通过 inject 接收数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-4-3-%E7%88%B6%E8%8A%82%E7%82%B9%E5%AF%B9%E5%A4%96%E5%85%B1%E4%BA%AB%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">10.3.4.3 父节点对外共享响应式的数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-3-4-4-%E5%AD%90%E5%AD%99%E8%8A%82%E7%82%B9%E4%BD%BF%E7%94%A8%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">10.3.4.4 子孙节点使用响应式的数据</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-3-5-vuex"><span class="toc-text">10.3.5 vuex</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-vue-3-x-%E4%B8%AD%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-axios"><span class="toc-text">10.4 vue 3.x 中全局配置 axios</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-4-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-axios"><span class="toc-text">10.4.1 为什么要全局配置 axios</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-4-2-%E5%A6%82%E4%BD%95%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-axios"><span class="toc-text">10.4.2 如何全局配置 axios</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A1%88%E4%BE%8B"><span class="toc-text">10.5 购物车案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-1-%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-text">10.5.1 实现步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-2-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-text">10.5.2 初始化项目结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-3-%E5%B0%81%E8%A3%85-es-header-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.3 封装 es-header 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-3-1-%E5%88%9B%E5%BB%BA%E5%B9%B6%E6%B3%A8%E5%86%8C-EsHeader-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.3.1 创建并注册 EsHeader 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-3-2-%E5%B0%81%E8%A3%85-es-header-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.3.2 封装 es-header 组件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-4-%E5%9F%BA%E4%BA%8E-axios-%E8%AF%B7%E6%B1%82%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-text">10.5.4 基于 axios 请求商品列表数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-4-1-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-axios"><span class="toc-text">10.5.4.1 全局配置 axios</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-4-2-%E8%AF%B7%E6%B1%82%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-text">10.5.4.2 请求商品列表数据</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-5-%E5%B0%81%E8%A3%85-es-footer-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.5 封装 es-footer 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-5-1-%E5%88%9B%E5%BB%BA%E5%B9%B6%E6%B3%A8%E5%86%8C-EsFooter-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.5.1 创建并注册 EsFooter 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-5-2-%E5%B0%81%E8%A3%85-es-footer-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.5.2 封装 es-footer 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-5-3-%E5%B0%81%E8%A3%85%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7-amount"><span class="toc-text">10.5.5.3 封装自定义属性 amount</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-5-4-%E5%B0%81%E8%A3%85%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7-total"><span class="toc-text">10.5.5.4 封装自定义属性 total</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-5-5-%E5%B0%81%E8%A3%85%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7-isfull"><span class="toc-text">10.5.5.5 封装自定义属性 isfull</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-5-6-%E5%B0%81%E8%A3%85%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6-fullChange"><span class="toc-text">10.5.5.6 封装自定义事件 fullChange</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-6-%E5%B0%81%E8%A3%85-es-goods-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.6 封装 es-goods 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-6-1-%E5%88%9B%E5%BB%BA%E5%B9%B6%E6%B3%A8%E5%86%8C-EsGood-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.6.1 创建并注册 EsGood 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-6-2-%E5%B0%81%E8%A3%85-es-goods-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.6.2 封装 es-goods 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-6-3-%E5%B0%81%E8%A3%85%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7-id"><span class="toc-text">10.5.6.3 封装自定义属性 id</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-6-4-%E5%B0%81%E8%A3%85%E5%85%B6%E5%AE%83%E5%B1%9E%E6%80%A7"><span class="toc-text">10.5.6.4 封装其它属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-6-5-%E5%B0%81%E8%A3%85%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6-stateChange"><span class="toc-text">10.5.6.5 封装自定义事件 stateChange</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-7-%E5%AE%9E%E7%8E%B0%E5%90%88%E8%AE%A1%E3%80%81%E7%BB%93%E7%AE%97%E6%95%B0%E9%87%8F%E3%80%81%E5%85%A8%E9%80%89%E5%8A%9F%E8%83%BD"><span class="toc-text">10.5.7 实现合计、结算数量、全选功能</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-7-1-%E5%8A%A8%E6%80%81%E7%BB%9F%E8%AE%A1%E5%B7%B2%E5%8B%BE%E9%80%89%E5%95%86%E5%93%81%E7%9A%84%E6%80%BB"><span class="toc-text">10.5.7.1 动态统计已勾选商品的总</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-5-8-%E5%B0%81%E8%A3%85-es-counter-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.8 封装 es-counter 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-8-1-%E5%88%9B%E5%BB%BA%E5%B9%B6%E6%B3%A8%E5%86%8C-EsCounter-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.8.1 创建并注册 EsCounter 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-5-8-2-%E5%B0%81%E8%A3%85-es-counter-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.5.8.2 封装 es-counter 组件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6-ref-%E5%BC%95%E7%94%A8"><span class="toc-text">10.6 ref 引用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-6-1-%E4%BB%80%E4%B9%88%E6%98%AF-ref-%E5%BC%95%E7%94%A8"><span class="toc-text">10.6.1 什么是 ref 引用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-6-2-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-ref-%E5%BC%95%E7%94%A8-DOM-%E5%85%83%E7%B4%A0"><span class="toc-text">10.6.2 如何使用 ref 引用 DOM 元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-6-3-%E4%BD%BF%E7%94%A8-ref-%E5%BC%95%E7%94%A8%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B"><span class="toc-text">10.6.3 使用 ref 引用组件实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-6-4-%E6%8E%A7%E5%88%B6%E6%96%87%E6%9C%AC%E6%A1%86%E5%92%8C%E6%8C%89%E9%92%AE%E7%9A%84%E6%8C%89%E9%9C%80%E5%88%87%E6%8D%A2"><span class="toc-text">10.6.4 控制文本框和按钮的按需切换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-6-5-%E8%AE%A9%E6%96%87%E6%9C%AC%E6%A1%86%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%BE%97%E7%84%A6%E7%82%B9"><span class="toc-text">10.6.5 让文本框自动获得焦点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-6-6-this-nextTick-cb-%E6%96%B9%E6%B3%95"><span class="toc-text">10.6.6 this.$nextTick(cb) 方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-7-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-text">10.7 动态组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-7-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-text">10.7.1 什么是动态组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-7-2-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-text">10.7.2 如何实现动态组件渲染</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-7-3-%E4%BD%BF%E7%94%A8-keep-alive-%E4%BF%9D%E6%8C%81%E7%8A%B6%E6%80%81"><span class="toc-text">10.7.3 使用 keep-alive 保持状态</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-8-%E6%8F%92%E6%A7%BD"><span class="toc-text">10.8 插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-1%E4%BB%80%E4%B9%88%E6%98%AF%E6%8F%92%E6%A7%BD"><span class="toc-text">10.8.1什么是插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-2-%E4%BD%93%E9%AA%8C%E6%8F%92%E6%A7%BD%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text">10.8.2 体验插槽的基本用法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-8-2-1-%E6%B2%A1%E6%9C%89%E9%A2%84%E7%95%99%E6%8F%92%E6%A7%BD%E7%9A%84%E5%86%85%E5%AE%B9%E4%BC%9A%E8%A2%AB%E4%B8%A2%E5%BC%83"><span class="toc-text">10.8.2.1 没有预留插槽的内容会被丢弃</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-8-2-2-%E5%90%8E%E5%A4%87%E5%86%85%E5%AE%B9"><span class="toc-text">10.8.2.2 后备内容</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-3-%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-text">10.8.3 具名插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-8-3-1-%E4%B8%BA%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD%E6%8F%90%E4%BE%9B%E5%86%85%E5%AE%B9"><span class="toc-text">10.8.3.1 为具名插槽提供内容</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-8-3-2-%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD%E7%9A%84%E7%AE%80%E5%86%99%E5%BD%A2%E5%BC%8F"><span class="toc-text">10.8.3.2 具名插槽的简写形式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-8-4-%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-text">10.8.4 作用域插槽</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-text">10.9 自定义指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-9-1-%E4%BB%80%E4%B9%88%E6%98%AF%E4%B9%8B%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-text">10.9.1 什么是之定义指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-9-2-%E5%A3%B0%E6%98%8E%E7%A7%81%E6%9C%89%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-text">10.9.2 声明私有自定义指令的语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-9-3-%E5%A3%B0%E6%98%8E%E5%85%A8%E5%B1%80%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-text">10.9.3 声明全局自定义指令的语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-9-4-updated-%E5%87%BD%E6%95%B0"><span class="toc-text">10.9.4 updated 函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-9-5-%E5%87%BD%E6%95%B0%E7%AE%80%E5%86%99"><span class="toc-text">10.9.5 函数简写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-9-6-%E6%8C%87%E4%BB%A4%E7%9A%84%E5%8F%82%E6%95%B0%E5%80%BC"><span class="toc-text">10.9.6 指令的参数值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-10-Table-%E6%A1%88%E4%BE%8B"><span class="toc-text">10.10 Table 案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-10-1-%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-text">10.10.1 搭建项目基本结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-1-1-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE"><span class="toc-text">10.10.1.1 初始化项目</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-10-2-%E8%AF%B7%E6%B1%82%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-text">10.10.2 请求商品列表数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-10-3-%E5%B0%81%E8%A3%85-MyTable-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.10.3 封装 MyTable 组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-3-0-MyTable-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%B0%81%E8%A3%85%E8%A6%81%E6%B1%82"><span class="toc-text">10.10.3.0 MyTable 组件的封装要求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-3-1-%E5%88%9B%E5%BB%BA%E5%B9%B6%E4%BD%BF%E7%94%A8-MyTable-%E7%BB%84%E4%BB%B6"><span class="toc-text">10.10.3.1 创建并使用 MyTable 组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-3-2-%E4%B8%BA%E8%A1%A8%E6%A0%BC%E5%A3%B0%E6%98%8E-data-%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-text">10.10.3.2 为表格声明 data 数据源</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-3-3-%E5%B0%81%E8%A3%85-MyTable-%E7%BB%84%E4%BB%B6%E7%9A%84%E6%A8%A1%E6%9D%BF%E7%BB%93%E6%9E%84"><span class="toc-text">10.10.3.3 封装 MyTable 组件的模板结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-3-4-%E9%A2%84%E7%95%99%E5%90%8D%E7%A7%B0%E4%B8%BA-body-%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-text">10.10.3.4 预留名称为 body 的作用域插槽</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-10-4-%E5%AE%9E%E7%8E%B0%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD%E2%80%98"><span class="toc-text">10.10.4 实现删除功能‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-10-5-%E5%AE%9E%E7%8E%B0%E6%B7%BB%E5%8A%A0%E5%8A%9F%E8%83%BD"><span class="toc-text">10.10.5 实现添加功能</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-5-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B8%B2%E6%9F%93%E6%A0%87%E7%AD%BE%E5%88%97"><span class="toc-text">10.10.5.1 自定义渲染标签列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-5-2-%E5%AE%9E%E7%8E%B0-input-%E5%92%8C-button-%E6%8C%89%E9%9C%80%E5%B1%95%E7%A4%BA"><span class="toc-text">10.10.5.2 实现 input 和 button 按需展示</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-5-3-%E8%AE%A9-input-%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96%E7%84%A6%E7%82%B9"><span class="toc-text">10.10.5.3 让 input 自动获取焦点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-5-4-%E6%96%87%E6%9C%AC%E5%A4%B1%E5%8E%BB%E7%84%A6%E7%82%B9%E8%87%AA%E5%8A%A8%E9%9A%90%E8%97%8F"><span class="toc-text">10.10.5.4 文本失去焦点自动隐藏</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-5-5-%E4%B8%BA%E5%95%86%E5%93%81%E6%B7%BB%E5%8A%A0%E6%96%B0%E7%9A%84-tag-%E6%A0%87%E7%AD%BE"><span class="toc-text">10.10.5.5 为商品添加新的 tag 标签</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-5-6-%E5%93%8D%E5%BA%94%E6%96%87%E6%9C%AC%E6%A1%86%E7%9A%84%E5%9B%9E%E8%BD%A6%E6%8C%89%E9%92%AE"><span class="toc-text">10.10.5.6 响应文本框的回车按钮</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#10-10-5-7-%E5%93%8D%E5%BA%94%E6%96%87%E6%9C%AC%E6%A1%86-esc-%E6%8C%89%E9%92%AE"><span class="toc-text">10.10.5.7 响应文本框 esc 按钮</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-vue-cli"><span class="toc-text">11 vue-cli</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E4%BB%80%E4%B9%88%E6%98%AF-vue-cli"><span class="toc-text">11.1 什么是 vue-cli</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-%E5%AE%89%E8%A3%85vue-cli"><span class="toc-text">11.2 安装vue-cli</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3-Windows-powershell-%E4%B8%8D%E8%AF%86%E5%88%AB-vue-%E5%91%BD%E4%BB%A4%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">解决 Windows powershell 不识别 vue 命令的问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">11.3 创建项目</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-text">12 组件库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1%E4%BB%80%E4%B9%88%E6%98%AF%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-text">12.1什么是组件库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2vue-%E7%BB%84%E4%BB%B6%E5%BA%93%E5%92%8C-bootstrap-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">12.2vue 组件库和 bootstrap 的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3%E6%9C%80%E5%B8%B8%E8%A7%81%E7%9A%84-vue-%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-text">12.3最常见的 vue 组件库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-4Element-UI"><span class="toc-text">12.4Element UI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8-vue2-%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%AE%89%E8%A3%85-element-ui"><span class="toc-text">- 在 vue2 的项目中安装 element-ui</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5-element-ui"><span class="toc-text">- 引入 element-ui</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E5%BC%95%E5%85%A5"><span class="toc-text">- 完整引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%BC%95%E5%85%A5"><span class="toc-text">- 按需引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%8A%E7%BB%84%E4%BB%B6%E7%9A%84%E5%AF%BC%E5%85%A5%E5%92%8C%E6%B3%A8%E5%86%8C%E5%B0%81%E8%A3%85%E4%B8%BA%E7%8B%AC%E7%AB%8B%E7%9A%84%E6%A8%A1%E5%9D%97"><span class="toc-text">- 把组件的导入和注册封装为独立的模块</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-axios-%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">13 axios 拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-%E5%9B%9E%E9%A1%BE%EF%BC%9A%E5%9C%A8-vue3-%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AEaxios"><span class="toc-text">13.1 回顾：在 vue3 的项目中全局配置axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-%E5%9C%A8-vue2-%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE-axios"><span class="toc-text">13.2 在 vue2 的项目中全局配置 axios</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-%E4%BB%80%E4%B9%88%E6%98%AF%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">13.3 什么是拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-4-%E9%85%8D%E7%BD%AE%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">13.4 配置请求拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#13-4-1-%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8-Token-%E8%AE%A4%E8%AF%81"><span class="toc-text">13.4.1 请求拦截器 - Token 认证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-4-2-%E8%AF%B7%E6%B1%82%E6%8B%A6%E6%88%AA%E5%99%A8-%E5%B1%95%E7%A4%BA-Loading-%E6%95%88%E6%9E%9C"><span class="toc-text">13.4.2 请求拦截器 - 展示 Loading 效果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-5-%E9%85%8D%E7%BD%AE%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text">13.5 配置响应拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#13-5-1-%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8-%E5%85%B3%E9%97%AD-Loading-%E6%95%88%E6%9E%9C"><span class="toc-text">13.5.1 响应拦截器 - 关闭 Loading 效果</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-proxy-%E8%B7%A8%E5%9F%9F%E4%BB%A3%E7%90%86"><span class="toc-text">14 proxy 跨域代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-%E6%8E%A5%E5%8F%A3%E7%9A%84%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-text">14.1 接口的跨域问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-%E9%80%9A%E8%BF%87%E4%BB%A3%E7%90%86%E8%A7%A3%E5%86%B3%E6%8E%A5%E5%8F%A3%E7%9A%84%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-text">14.2 通过代理解决接口的跨域问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%85%8D%E7%BD%AE-proxy-%E4%BB%A3%E7%90%86"><span class="toc-text">14.3 在项目中配置 proxy 代理</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022  <i id="heartbeat" class="fa fas fa-heartbeat"></i> Kshtor_Mango</div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script data-pjax defer src="https://npm.elemecdn.com/tzy-blog/lib/js/theme/chocolate.js"></script><script src="/js/VolantisTags.js"></script><script src="/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/xiabo2/CDN@latest/fishes.js"></script><div class="aplayer no-destroy" data-id="60198" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="チ,ャ,ウ,・,ジ,ジ,ュ,ン" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":20,"vOffset":-20},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>